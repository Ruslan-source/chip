/*! For license information please see main.174ac97c.js.LICENSE.txt */
!function(){var e={4575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},693:function(e,t,n){var r=n(9713);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach((function(t){r(e,t,n[t])}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},9591:function(e,t,n){var r=n(8).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(N){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=f;var d={};function p(){}function v(){}function y(){}var m={};l(m,u,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(T([])));k&&k!==n&&a.call(k,u)&&(m=k);var w=y.prototype=p.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(i,o,u,s){var c=h(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,s)}),(function(e){n("throw",e,u,s)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=y,l(w,"constructor",y),l(y,"constructor",v),v.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},b(_.prototype),l(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new _(f(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(w),l(w,c,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7757:function(e,t,n){var r=n(9591)();e.exports=r;try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},7215:function(e,t,n){var r=n(3867).w_;e.exports.u=function(e){return r({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"}}]})(e)}},8987:function(e,t,n){var r=n(3867).w_;e.exports.Q=function(e){return r({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"}}]})(e)}},3867:function(e,t,n){"use strict";n.d(t,{w_:function(){return c}});var r=n(2791),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.createContext&&r.createContext(i),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function s(e){return e&&e.map((function(e,t){return r.createElement(e.tag,o({key:t},e.attr),s(e.child))}))}function c(e){return function(t){return r.createElement(l,o({attr:o({},e.attr)},t),s(e.child))}}function l(e){var t=function(t){var n,i=e.attr,a=e.size,s=e.title,c=u(e,["attr","size","title"]),l=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:n,style:o(o({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&r.createElement("title",null,s),e.children)};return void 0!==a?r.createElement(a.Consumer,null,(function(e){return t(e)})):t(i)}},3288:function(e,t,n){var r=n(3867).w_;e.exports.v=function(e){return r({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}}]})(e)}},6867:function(e,t,n){"use strict";n.d(t,{$:function(){return ae},A:function(){return L},B:function(){return m},C:function(){return F},D:function(){return w},E:function(){return c},F:function(){return U},G:function(){return H},H:function(){return R},I:function(){return Y},J:function(){return q},K:function(){return $},L:function(){return ue},M:function(){return le},N:function(){return ie},O:function(){return he},P:function(){return D},Q:function(){return P},R:function(){return M},S:function(){return B},T:function(){return O},U:function(){return me},V:function(){return ne},W:function(){return Z},X:function(){return X},Y:function(){return J},Z:function(){return ee},_:function(){return te},a:function(){return j},a0:function(){return oe},a1:function(){return se},a2:function(){return ce},a3:function(){return fe},a4:function(){return de},a5:function(){return pe},a6:function(){return ve},a7:function(){return ye},b:function(){return V},d:function(){return z},e:function(){return A},f:function(){return W},g:function(){return K},h:function(){return G},i:function(){return g},j:function(){return I},k:function(){return u},l:function(){return E},m:function(){return k},n:function(){return N},o:function(){return d},p:function(){return l},q:function(){return y},r:function(){return h},s:function(){return x},t:function(){return s},u:function(){return f},v:function(){return S},y:function(){return _},z:function(){return b}});var r=n(7408),i=n(7462),a=n(5609);var o=function(e,t){var n;void 0===t&&(t=!0);var i=new Promise((function(r){n=setTimeout(r,e,t)}));return i[r.n1]=function(){clearTimeout(n)},i},u=function(e){return function(){return e}}(!0),s=function(){};var c=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var l=function(e,t){(0,i.Z)(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))},f=function(e,t){var n;return(n=[]).concat.apply(n,t.map(e))};function h(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function d(e){var t=!1;return function(){t||(t=!0,e())}}var p=function(e){throw e},v=function(e){return{value:e,done:!0}};function y(e,t,n){void 0===t&&(t=p),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:v,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function m(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var g=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},k=function(e){return Array.apply(null,new Array(e))},w=function(e){return function(t){return e(Object.defineProperty(t,r.Nm,{value:!0}))}},b=function(e){return e===r.EO},_=function(e){return e===r.Wd},x=function(e){return b(e)||_(e)};function E(e,t){var n=Object.keys(e),r=n.length;var i,o=0,u=(0,a.IX)(e)?k(r):{},c={};return n.forEach((function(e){var n=function(n,a){i||(a||x(n)?(t.cancel(),t(n,a)):(u[e]=n,++o===r&&(i=!0,t(u))))};n.cancel=s,c[e]=n})),t.cancel=function(){i||(i=!0,n.forEach((function(e){return c[e].cancel()})))},c}function I(e){return{name:e.name||"anonymous",location:S(e)}}function S(e){return e[r.b_]}var T={isEmpty:u,put:s,take:s};function C(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,i=0,a=0,o=function(t){n[i]=t,i=(i+1)%e,r++},u=function(){if(0!=r){var t=n[a];return n[a]=null,r--,a=(a+1)%e,t}},s=function(){for(var e=[];r;)e.push(u());return e};return{isEmpty:function(){return 0==r},put:function(u){var c;if(r<e)o(u);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[i]=u,a=i=(i+1)%e;break;case 4:c=2*e,n=s(),r=n.length,i=n.length,a=0,n.length=c,e=c,o(u)}},take:u,flush:s}}var N=function(){return T},P=function(e){return C(e,3)},A=function(e){return C(e,4)},R=Object.freeze({__proto__:null,none:N,fixed:function(e){return C(e,1)},dropping:function(e){return C(e,2)},sliding:P,expanding:A}),O="TAKE",D="PUT",L="ALL",M="RACE",F="CALL",j="CPS",U="FORK",q="JOIN",V="CANCEL",B="SELECT",z="ACTION_CHANNEL",W="CANCELLED",K="FLUSH",H="GET_CONTEXT",G="SET_CONTEXT",Z=Object.freeze({__proto__:null,TAKE:O,PUT:D,ALL:L,RACE:M,CALL:F,CPS:j,FORK:U,JOIN:q,CANCEL:V,SELECT:B,ACTION_CHANNEL:z,CANCELLED:W,FLUSH:K,GET_CONTEXT:H,SET_CONTEXT:G}),Q=function(e,t){var n;return(n={})[r.IO]=!0,n.combinator=!1,n.type=e,n.payload=t,n},Y=function(e){return Q(U,(0,i.Z)({},e.payload,{detached:!0}))};function $(e,t){return void 0===e&&(e="*"),(0,a.uj)(e)?Q(O,{pattern:e}):(0,a.Om)(e)&&(0,a.d5)(t)&&(0,a.uj)(t)?Q(O,{channel:e,pattern:t}):(0,a.CE)(e)?Q(O,{channel:e}):void 0}var X=function(){var e=$.apply(void 0,arguments);return e.payload.maybe=!0,e};function J(e,t){return(0,a.sR)(t)&&(t=e,e=void 0),Q(D,{channel:e,action:t})}var ee=function(){var e=J.apply(void 0,arguments);return e.payload.resolve=!0,e};function te(e){var t=Q(L,e);return t.combinator=!0,t}function ne(e){var t=Q(M,e);return t.combinator=!0,t}function re(e,t){var n,r=null;return(0,a.Yl)(e)?n=e:((0,a.IX)(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&(0,a.Z_)(n)&&(0,a.Yl)(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function ie(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Q(F,re(e,n))}function ae(e,t,n){void 0===n&&(n=[]);return Q(F,re([e,t],n))}function oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Q(j,re(e,n))}function ue(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Q(U,re(e,n))}function se(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Y(ue.apply(void 0,[e].concat(n)))}function ce(e){return Q(q,e)}function le(e){return void 0===e&&(e=r.sC),Q(V,e)}function fe(e){void 0===e&&(e=c);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Q(B,{selector:e,args:n})}function he(e,t){return Q(z,{pattern:e,buffer:t})}function de(){return Q(W,{})}function pe(e){return Q(K,e)}function ve(e){return Q(H,e)}function ye(e){return Q(G,e)}var me=ie.bind(null,o)},5609:function(e,t,n){"use strict";n.d(t,{CE:function(){return h},IX:function(){return s},MC:function(){return c},NA:function(){return p},Om:function(){return v},Yl:function(){return o},Z_:function(){return u},d5:function(){return a},eR:function(){return d},hZ:function(){return l},sR:function(){return i},uj:function(){return f}});var r=n(7408),i=function(e){return null===e||void 0===e},a=function(e){return null!==e&&void 0!==e},o=function(e){return"function"===typeof e},u=function(e){return"string"===typeof e},s=Array.isArray,c=function(e){return e&&o(e.then)},l=function(e){return e&&o(e.next)&&o(e.throw)},f=function e(t){return t&&(u(t)||p(t)||o(t)||s(t)&&t.every(e))},h=function(e){return e&&o(e.take)&&o(e.close)},d=function(e){return o(e)&&e.hasOwnProperty("toString")},p=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},v=function(e){return h(e)&&e[r.AS]}},7408:function(e,t,n){"use strict";n.d(t,{AS:function(){return s},Cs:function(){return f},EO:function(){return d},IO:function(){return o},Nm:function(){return c},Wd:function(){return h},b_:function(){return p},n1:function(){return i},sC:function(){return l},sZ:function(){return a},uq:function(){return u}});var r=function(e){return"@@redux-saga/"+e},i=r("CANCEL_PROMISE"),a=r("CHANNEL_END"),o=r("IO"),u=r("MATCH"),s=r("MULTICAST"),c=r("SAGA_ACTION"),l=r("SELF_CANCELLATION"),f=r("TASK"),h=r("TASK_CANCEL"),d=r("TERMINATE"),p=r("LOCATION")},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var u in n)r.call(n,u)&&n[u]&&e.push(u);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},2110:function(e,t,n){"use strict";var r=n(7441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},2176:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,u],l=0;(s=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},3573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}return(0,a.default)(r)};var r,i=n(6054),a=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},6054:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,a,o){var u=i||"<<anonymous>>",s=o||r;if(null==n[r])return t?new Error("Required "+a+" `"+s+"` was not specified in `"+u+"`."):null;for(var c=arguments.length,l=Array(c>6?c-6:0),f=6;f<c;f++)l[f-6]=arguments[f];return e.apply(void 0,[n,r,u,a,s].concat(l))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function q(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function V(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case I:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ee=null;function Ie(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),_e(e.stateNode,e.type,t))}}function Se(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Pe=!1;function Ae(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ce(e,t,n)}finally{Pe=!1,(null!==xe||null!==Ee)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,qe={onError:function(e){Me=!0,Fe=e}};function Ve(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(qe,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,_t,xt,Et,It,St=!1,Tt=[],Ct=null,Nt=null,Pt=null,At=new Map,Rt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void It(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function qt(){St=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==Pt&&jt(Pt)&&(Pt=null),At.forEach(Ut),Rt.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,qt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<Tt.length){Vt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==Nt&&Vt(Nt,e),null!==Pt&&Vt(Pt,e),At.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var zt=w.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=Qt(e,t,n,r);if(null===i)Wr(e,t,r,Zt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Mt(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Qt(e,t,n,r))&&Wr(e,t,r,Zt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Zt=null;function Qt(e,t,n,r){if(Zt=null,null!==(e=gi(e=be(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function In(){return En}var Sn=F({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Pn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(An),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function qn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Zn(e){jr(e,0)}function Qn(e){if(G(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(l){var Xn;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Xn=Jn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Kn(t,Gn,e,be(e)),Ae(Zn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function ar(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Z(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},xr={},Er={};function Ir(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Sr=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Nr=Ir("transitionend"),Pr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Pr.set(e,t),s(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Dr=Ar[Or];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function qr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||qr(t,!1,e),qr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,qr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=be(n),o=[];e:{var u=Pr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Sr:case Tr:case Cr:s=mn;break;case Nr:s=Pn;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Zr(o,u,s,l,!1),null!==c&&null!==f&&Zr(o,f,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Yn;else if(Wn(u))if($n)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?wi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?qn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(m=Hr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Vn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&qn(e,t)?(e=en(),Jt=Xt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Re(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var _i=[],xi=-1;function Ei(e){return{current:e}}function Ii(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Si(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Ni=Ei(!1),Pi=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ii(Ni),Ii(Ci)}function Di(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Pi=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(Ci),Si(Ci,e)):Ii(Ni),Si(Ni,n)}var ji=null,Ui=!1,qi=!1;function Vi(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!qi&&null!==ji){qi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Je,Bi),i}finally{kt=t,qi=!1}}return null}var zi=w.ReactCurrentBatchConfig;function Wi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ki=Ei(null),Hi=null,Gi=null,Zi=null;function Qi(){Zi=Gi=Hi=null}function Yi(e){var t=Ki.current;Ii(Ki),e._currentValue=t}function $i(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Xi(e,t){Hi=e,Zi=Gi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ji(e){var t=e._currentValue;if(Zi!==e)if(e={context:e,memoizedValue:t,next:null},null===Gi){if(null===Hi)throw Error(a(308));Gi=e,Hi.dependencies={lanes:0,firstContext:e}}else Gi=Gi.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sa(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:ta=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Os|=o,e.lanes=o,e.memoizedState=f}}function ca(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var la=(new r.Component).refs;function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ha={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$s(),i=Xs(e),a=ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Js(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$s(),i=Xs(e),a=ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Js(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$s(),r=Xs(e),i=ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),aa(e,i),null!==(t=Js(e,r,n))&&oa(t,e,r)}};function da(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function pa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ji(a):(i=Ri(t)?Pi:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ha,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ha.enqueueReplaceState(t,t.state,null)}function ya(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=la,na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ji(a):(a=Ri(t)?Pi:Ci.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(fa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ha.enqueueReplaceState(i,i.state,null),sa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var ma=[],ga=0,ka=null,wa=0,ba=[],_a=0,xa=null,Ea=1,Ia="";function Sa(e,t){ma[ga++]=wa,ma[ga++]=ka,ka=e,wa=t}function Ta(e,t,n){ba[_a++]=Ea,ba[_a++]=Ia,ba[_a++]=xa,xa=e;var r=Ea;e=Ia;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ea=1<<32-ot(t)+i|n<<i|r,Ia=a+e}else Ea=1<<a|n<<i|r,Ia=e}function Ca(e){null!==e.return&&(Sa(e,1),Ta(e,1,0))}function Na(e){for(;e===ka;)ka=ma[--ga],ma[ga]=null,wa=ma[--ga],ma[ga]=null;for(;e===xa;)xa=ba[--_a],ba[_a]=null,Ia=ba[--_a],ba[_a]=null,Ea=ba[--_a],ba[_a]=null}var Pa=null,Aa=null,Ra=!1,Oa=null;function Da(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function La(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Pa=e,Aa=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Pa=e,Aa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==xa?{id:Ea,overflow:Ia}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Pa=e,Aa=null,!0);default:return!1}}function Ma(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Fa(e){if(Ra){var t=Aa;if(t){var n=t;if(!La(e,t)){if(Ma(e))throw Error(a(418));t=ci(n.nextSibling);var r=Pa;t&&La(e,t)?Da(r,n):(e.flags=-4097&e.flags|2,Ra=!1,Pa=e)}}else{if(Ma(e))throw Error(a(418));e.flags=-4097&e.flags|2,Ra=!1,Pa=e}}}function ja(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Pa=e}function Ua(e){if(e!==Pa)return!1;if(!Ra)return ja(e),Ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Aa)){if(Ma(e)){for(e=Aa;e;)e=ci(e.nextSibling);throw Error(a(418))}for(;t;)Da(e,t),t=ci(t.nextSibling)}if(ja(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Aa=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Aa=null}}else Aa=Pa?ci(e.stateNode.nextSibling):null;return!0}function qa(){Aa=Pa=null,Ra=!1}function Va(e){null===Oa?Oa=[e]:Oa.push(e)}function Ba(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===la&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function za(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wa(e){return(0,e._init)(e._payload)}function Ka(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Wa(a)===t.type)?((r=i(t,n.props)).ref=Ba(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ba(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ba(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Dc(t,e.mode,n,null)).return=e,t;za(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);za(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);za(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),Ra&&Sa(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Ra&&Sa(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),Ra&&Sa(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),Ra&&Sa(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return Ra&&Sa(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Ra&&Sa(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Wa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ba(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Dc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Ba(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);za(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ha=Ka(!0),Ga=Ka(!1),Za={},Qa=Ei(Za),Ya=Ei(Za),$a=Ei(Za);function Xa(e){if(e===Za)throw Error(a(174));return e}function Ja(e,t){switch(Si($a,t),Si(Ya,e),Si(Qa,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Qa),Si(Qa,t)}function eo(){Ii(Qa),Ii(Ya),Ii($a)}function to(e){Xa($a.current);var t=Xa(Qa.current),n=se(t,e.type);t!==n&&(Si(Ya,e),Si(Qa,n))}function no(e){Ya.current===e&&(Ii(Qa),Ii(Ya))}var ro=Ei(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var uo=w.ReactCurrentDispatcher,so=w.ReactCurrentBatchConfig,co=0,lo=null,fo=null,ho=null,po=!1,vo=!1,yo=0,mo=0;function go(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function wo(e,t,n,r,i,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=null===e||null===e.memoizedState?ru:iu,e=n(r,i),vo){o=0;do{if(vo=!1,yo=0,25<=o)throw Error(a(301));o+=1,ho=fo=null,t.updateQueue=null,uo.current=au,e=n(r,i)}while(vo)}if(uo.current=nu,t=null!==fo&&null!==fo.next,co=0,ho=fo=lo=null,po=!1,t)throw Error(a(300));return e}function bo(){var e=0!==yo;return yo=0,e}function _o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?lo.memoizedState=ho=e:ho=ho.next=e,ho}function xo(){if(null===fo){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?lo.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?lo.memoizedState=ho=e:ho=ho.next=e}return ho}function Eo(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((co&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,lo.lanes|=f,Os|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,lo.lanes|=o,Os|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function Co(e,t){var n=lo,r=xo(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Uo(Ao.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Do(9,Po.bind(null,n,r,i,t),void 0,null),null===Ss)throw Error(a(349));0!==(30&co)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&Js(e,1,-1)}function Ao(e,t,n){return n((function(){Ro(t)&&Js(e,1,-1)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Oo(e){var t=_o();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:e},t.queue=e,e=e.dispatch=$o.bind(null,lo,e),[t.memoizedState,e]}function Do(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return xo().memoizedState}function Mo(e,t,n,r){var i=_o();lo.flags|=e,i.memoizedState=Do(1|t,n,void 0,void 0===r?null:r)}function Fo(e,t,n,r){var i=xo();r=void 0===r?null:r;var a=void 0;if(null!==fo){var o=fo.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Do(t,n,a,r))}lo.flags|=e,i.memoizedState=Do(1|t,n,a,r)}function jo(e,t){return Mo(8390656,8,e,t)}function Uo(e,t){return Fo(2048,8,e,t)}function qo(e,t){return Fo(4,2,e,t)}function Vo(e,t){return Fo(4,4,e,t)}function Bo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,Bo.bind(null,t,e),n)}function Wo(){}function Ko(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ho(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Go(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),lo.lanes|=n,Os|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{kt=n,so.transition=r}}function Qo(){return xo().memoizedState}function Yo(e,t,n){var r=Xs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xo(e)?Jo(t,n):(eu(e,t,n),null!==(e=Js(e,r,n=$s()))&&tu(e,t,r))}function $o(e,t,n){var r=Xs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xo(e))Jo(t,i);else{eu(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o))return}catch(s){}null!==(e=Js(e,r,n=$s()))&&tu(e,t,r)}}function Xo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function Jo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eu(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function tu(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var nu={readContext:Ji,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ru={readContext:Ji,useCallback:function(e,t){return _o().memoizedState=[e,void 0===t?null:t],e},useContext:Ji,useEffect:jo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,Bo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=_o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_o();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yo.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_o().memoizedState=e},useState:Oo,useDebugValue:Wo,useDeferredValue:function(e){return _o().memoizedState=e},useTransition:function(){var e=Oo(!1),t=e[0];return e=Zo.bind(null,e[1]),_o().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,i=_o();if(Ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ss)throw Error(a(349));0!==(30&co)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,jo(Ao.bind(null,r,o,e),[e]),r.flags|=2048,Do(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=_o(),t=Ss.identifierPrefix;if(Ra){var n=Ia;t=":"+t+"R"+(n=(Ea&~(1<<32-ot(Ea)-1)).toString(32)+n),0<(n=yo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iu={readContext:Ji,useCallback:Ko,useContext:Ji,useEffect:Uo,useImperativeHandle:zo,useInsertionEffect:qo,useLayoutEffect:Vo,useMemo:Ho,useReducer:Io,useRef:Lo,useState:function(){return Io(Eo)},useDebugValue:Wo,useDeferredValue:function(e){return Go(xo(),fo.memoizedState,e)},useTransition:function(){return[Io(Eo)[0],xo().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Qo,unstable_isNewReconciler:!1},au={readContext:Ji,useCallback:Ko,useContext:Ji,useEffect:Uo,useImperativeHandle:zo,useInsertionEffect:qo,useLayoutEffect:Vo,useMemo:Ho,useReducer:So,useRef:Lo,useState:function(){return So(Eo)},useDebugValue:Wo,useDeferredValue:function(e){var t=xo();return null===fo?t.memoizedState=e:Go(t,fo.memoizedState,e)},useTransition:function(){return[So(Eo)[0],xo().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Qo,unstable_isNewReconciler:!1};function ou(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var su,cu,lu,fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vs||(Vs=!0,Bs=r),uu(0,t)},n}function du(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uu(0,t),"function"!==typeof r&&(null===zs?zs=new Set([this]):zs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function vu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function mu(e,t){if(!Ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ku(e,t,n){var r=t.pendingProps;switch(Na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gu(t),null;case 1:case 17:return Ri(t.type)&&Oi(),gu(t),null;case 3:return r=t.stateNode,eo(),Ii(Ni),Ii(Ci),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Oa&&(ac(Oa),Oa=null))),gu(t),null;case 5:no(t);var i=Xa($a.current);if(n=t.type,null!==e&&null!=t.stateNode)cu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return gu(t),null}if(e=Xa(Qa.current),Ua(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":H(r),J(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,su(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),J(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return gu(t),null;case 6:if(e&&null!=t.stateNode)lu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Xa($a.current),Xa(Qa.current),Ua(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=Pa))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return gu(t),null;case 13:if(Ii(ro),r=t.memoizedState,Ra&&null!==Aa&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Aa;r;)r=ci(r.nextSibling);return qa(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ua(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[hi]=t}else qa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return gu(t),null}return null!==Oa&&(ac(Oa),Oa=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ua(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===As&&(As=3):pc())),null!==t.updateQueue&&(t.flags|=4),gu(t),null);case 4:return eo(),null===e&&Br(t.stateNode.containerInfo),gu(t),null;case 10:return Yi(t.type._context),gu(t),null;case 19:if(Ii(ro),null===(o=t.memoizedState))return gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)mu(o,!1);else{if(0!==As||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=io(e))){for(t.flags|=128,mu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Us&&(t.flags|=128,r=!0,mu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),mu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Ra)return gu(t),null}else 2*$e()-o.renderingStartTime>Us&&1073741824!==n&&(t.flags|=128,r=!0,mu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=ro.current,Si(ro,r?1&n|2:1&n),t):(gu(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ns)&&(gu(t),6&t.subtreeFlags&&(t.flags|=8192)):gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}su=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xa(Qa.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var wu=w.ReactCurrentOwner,bu=!1;function _u(e,t,n,r){t.child=null===e?Ga(t,null,n,r):Ha(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Xi(t,i),r=wo(e,t,n,r,a,i),n=bo(),null===e||bu?(Ra&&n&&Ca(t),t.flags|=1,_u(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Eu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ac(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Cu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ps,Ns),Ns|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ps,Ns),Ns|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ps,Ns),Ns|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ps,Ns),Ns|=r;return _u(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,i){var a=Ri(n)?Pi:Ci.current;return a=Ai(t,a),Xi(t,i),n=wo(e,t,n,r,a,i),r=bo(),null===e||bu?(Ra&&r&&Ca(t),t.flags|=1,_u(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Nu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Xi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ya(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ji(c):c=Ai(t,c=Ri(n)?Pi:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&va(t,o,r,c),ta=!1;var h=t.memoizedState;o.state=h,sa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||ta?("function"===typeof l&&(fa(t,n,l,r),s=t.memoizedState),(u=ta||da(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Wi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ji(s):s=Ai(t,s=Ri(n)?Pi:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&va(t,o,r,s),ta=!1,h=t.memoizedState,o.state=h,sa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||ta?("function"===typeof d&&(fa(t,n,d,r),p=t.memoizedState),(c=ta||da(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Pu(e,t,n,r,a,i)}function Pu(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,wu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ha(t,e.child,null,a),t.child=Ha(t,null,u,a)):_u(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ja(e,t.containerInfo)}function Ru(e,t,n,r,i){return qa(),Va(i),t.flags|=256,_u(e,t,n,r),t.child}var Ou={dehydrated:null,treeContext:null,retryLane:0};function Du(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lu(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Mu(e,t,n){var r,i=t.pendingProps,o=ro.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(ro,1&o),null===e)return Fa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Lc(o,i,0,null),e=Dc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Du(n),t.memoizedState=Ou,e):Fu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,qu(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Lc({mode:"visible",children:i.children},o,0,null),(u=Dc(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&Ha(t,e.child,null,n),t.child.memoizedState=Du(n),t.memoizedState=Ou,u);if(0===(1&t.mode))t=qu(e,t,n,null);else if("$!"===r.data)t=qu(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),bu||i){if(null!==(i=Ss)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Js(e,i,-1))}pc(),t=qu(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Aa=ci(r.nextSibling),Pa=t,Ra=!0,Oa=null,null!==n&&(ba[_a++]=Ea,ba[_a++]=Ia,ba[_a++]=xa,Ea=n.id,Ia=n.overflow,xa=t),(t=Fu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Uu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Du(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Ou,i):(n=ju(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Uu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Du(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Ou,i):(n=ju(e,t,i.children,n),t.memoizedState=null,n)}function Fu(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){var i=e.child;return e=i.sibling,n=Rc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Uu(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=Rc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Rc(o,r):(r=Dc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function qu(e,t,n,r){return null!==r&&Va(r),Ha(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),$i(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_u(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Os|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){switch(Na(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ii(Ni),Ii(Ci),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ii(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));qa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(ro),null;case 4:return eo(),null;case 10:return Yi(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var Hu=!1,Gu=!1,Zu="function"===typeof WeakSet?WeakSet:Set,Qu=null;function Yu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function $u(e,t,n){try{n()}catch(r){xc(e,t,r)}}var Xu=!1;function Ju(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&$u(t,n,a)}i=i.next}while(i!==r)}}function es(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ts(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ns(e){var t=e.alternate;null!==t&&(e.alternate=null,ns(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rs(e){return 5===e.tag||3===e.tag||4===e.tag}function is(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function as(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(as(e,t,n),e=e.sibling;null!==e;)as(e,t,n),e=e.sibling}function os(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(os(e,t,n),e=e.sibling;null!==e;)os(e,t,n),e=e.sibling}var us=null,ss=!1;function cs(e,t,n){for(n=n.child;null!==n;)ls(e,t,n),n=n.sibling}function ls(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Gu||Yu(n,t);case 6:var r=us,i=ss;us=null,cs(e,t,n),ss=i,null!==(us=r)&&(ss?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ss?(e=us,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(us,n.stateNode));break;case 4:r=us,i=ss,us=n.stateNode.containerInfo,ss=!0,cs(e,t,n),us=r,ss=i;break;case 0:case 11:case 14:case 15:if(!Gu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&$u(n,t,o),i=i.next}while(i!==r)}cs(e,t,n);break;case 1:if(!Gu&&(Yu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){xc(n,t,u)}cs(e,t,n);break;case 21:cs(e,t,n);break;case 22:1&n.mode?(Gu=(r=Gu)||null!==n.memoizedState,cs(e,t,n),Gu=r):cs(e,t,n);break;default:cs(e,t,n)}}function fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zu),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ss=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ss=!0;break e}s=s.return}if(null===us)throw Error(a(160));ls(o,u,i),us=null,ss=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){xc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ds(t,e),t=t.sibling}function ds(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hs(t,e),ps(e),4&r){try{Ju(3,e,e.return),es(3,e)}catch(v){xc(e,e.return,v)}try{Ju(5,e,e.return)}catch(v){xc(e,e.return,v)}}break;case 1:hs(t,e),ps(e),512&r&&null!==n&&Yu(n,n.return);break;case 5:if(hs(t,e),ps(e),512&r&&null!==n&&Yu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(v){xc(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(v){xc(e,e.return,v)}}break;case 6:if(hs(t,e),ps(e),4&r){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(v){xc(e,e.return,v)}}break;case 3:if(hs(t,e),ps(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(v){xc(e,e.return,v)}break;case 4:default:hs(t,e),ps(e);break;case 13:hs(t,e),ps(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(js=$e()),4&r&&fs(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Gu=(f=Gu)||l,hs(t,e),Gu=f):hs(t,e),ps(e),8192&r){f=null!==e.memoizedState;e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,f?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=d.stateNode,u=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(v){xc(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(v){xc(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(f&&!l&&0!==(1&e.mode))for(Qu=e,e=e.child;null!==e;){for(l=Qu=e;null!==Qu;){switch(h=(f=Qu).child,f.tag){case 0:case 11:case 14:case 15:Ju(4,f,f.return);break;case 1:if(Yu(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){d=f,p=f.return;try{i=d,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(v){xc(d,p,v)}}break;case 5:Yu(f,f.return);break;case 22:if(null!==f.memoizedState){gs(l);continue}}null!==h?(h.return=f,Qu=h):gs(l)}e=e.sibling}}break;case 19:hs(t,e),ps(e),4&r&&fs(e);case 21:}}function ps(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rs(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),os(e,is(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;as(e,is(e),o);break;default:throw Error(a(161))}}catch(u){xc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vs(e,t,n){Qu=e,ys(e,t,n)}function ys(e,t,n){for(var r=0!==(1&e.mode);null!==Qu;){var i=Qu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Hu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Gu;u=Hu;var c=Gu;if(Hu=o,(Gu=s)&&!c)for(Qu=i;null!==Qu;)s=(o=Qu).child,22===o.tag&&null!==o.memoizedState?ks(i):null!==s?(s.return=o,Qu=s):ks(i);for(;null!==a;)Qu=a,ys(a,t,n),a=a.sibling;Qu=i,Hu=u,Gu=c}ms(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Qu=a):ms(e)}}function ms(e){for(;null!==Qu;){var t=Qu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Gu||es(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Gu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Wi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ca(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ca(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Gu||512&t.flags&&ts(t)}catch(d){xc(t,t.return,d)}}if(t===e){Qu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qu=n;break}Qu=t.return}}function gs(e){for(;null!==Qu;){var t=Qu;if(t===e){Qu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qu=n;break}Qu=t.return}}function ks(e){for(;null!==Qu;){var t=Qu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{es(4,t)}catch(s){xc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){xc(t,i,s)}}var a=t.return;try{ts(t)}catch(s){xc(t,a,s)}break;case 5:var o=t.return;try{ts(t)}catch(s){xc(t,o,s)}}}catch(s){xc(t,t.return,s)}if(t===e){Qu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Qu=u;break}Qu=t.return}}var ws,bs=Math.ceil,_s=w.ReactCurrentDispatcher,xs=w.ReactCurrentOwner,Es=w.ReactCurrentBatchConfig,Is=0,Ss=null,Ts=null,Cs=0,Ns=0,Ps=Ei(0),As=0,Rs=null,Os=0,Ds=0,Ls=0,Ms=null,Fs=null,js=0,Us=1/0,qs=null,Vs=!1,Bs=null,zs=null,Ws=!1,Ks=null,Hs=0,Gs=0,Zs=null,Qs=-1,Ys=0;function $s(){return 0!==(6&Is)?$e():-1!==Qs?Qs:Qs=$e()}function Xs(e){return 0===(1&e.mode)?1:0!==(2&Is)&&0!==Cs?Cs&-Cs:null!==zi.transition?(0===Ys&&(Ys=vt()),Ys):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function Js(e,t,n){if(50<Gs)throw Gs=0,Zs=null,Error(a(185));var r=ec(e,t);return null===r?null:(mt(r,t,n),0!==(2&Is)&&r===Ss||(r===Ss&&(0===(2&Is)&&(Ds|=t),4===As&&oc(r,Cs)),nc(r,n),1===t&&0===Is&&0===(1&e.mode)&&(Us=$e()+500,Ui&&Bi())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Ss||null!==ea)&&0!==(1&e.mode)&&0===(2&Is)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ss?Cs:0);if(0===r)null!==n&&Ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ze(n),1===t)0===e.tag?function(e){Ui=!0,Vi(e)}(uc.bind(null,e)):Vi(uc.bind(null,e)),oi((function(){0===Is&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Qs=-1,Ys=0,0!==(6&Is))throw Error(a(327));var n=e.callbackNode;if(bc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ss?Cs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Is;Is|=2;var o=dc();for(Ss===e&&Cs===t||(qs=null,Us=$e()+500,fc(e,t));;)try{mc();break}catch(s){hc(e,s)}Qi(),_s.current=o,Is=i,null!==Ts?t=0:(Ss=null,Cs=0,t=As)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Rs,fc(e,0),oc(e,r),nc(e,$e()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Rs,fc(e,0),oc(e,r),nc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Fs,qs);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=js+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){$s(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Fs,qs),t);break}wc(e,Fs,qs);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bs(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Fs,qs),r);break}wc(e,Fs,qs);break;default:throw Error(a(329))}}}return nc(e,$e()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Ms;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Fs,Fs=n,null!==t&&ac(t)),e}function ac(e){null===Fs?Fs=e:Fs.push.apply(Fs,e)}function oc(e,t){for(t&=~Ls,t&=~Ds,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Is))throw Error(a(327));bc();var t=ht(e,0);if(0===(1&t))return nc(e,$e()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Rs,fc(e,0),oc(e,t),nc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Fs,qs),nc(e,$e()),null}function sc(e,t){var n=Is;Is|=1;try{return e(t)}finally{0===(Is=n)&&(Us=$e()+500,Ui&&Bi())}}function cc(e){null!==Ks&&0===Ks.tag&&0===(6&Is)&&bc();var t=Is;Is|=1;var n=Es.transition,r=kt;try{if(Es.transition=null,kt=1,e)return e()}finally{kt=r,Es.transition=n,0===(6&(Is=t))&&Bi()}}function lc(){Ns=Ps.current,Ii(Ps)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ts)for(n=Ts.return;null!==n;){var r=n;switch(Na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:eo(),Ii(Ni),Ii(Ci),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ii(ro);break;case 10:Yi(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Ss=e,Ts=e=Rc(e.current,null),Cs=Ns=t,As=0,Rs=null,Ls=Ds=Os=0,Fs=Ms=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function hc(e,t){for(;;){var n=Ts;try{if(Qi(),uo.current=nu,po){for(var r=lo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,ho=fo=lo=null,vo=!1,yo=0,xs.current=null,null===n||null===n.return){As=1,Rs=t,Ts=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Cs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vu(u);if(null!==p){p.flags&=-257,yu(p,u,s,0,t),1&p.mode&&pu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){pu(o,l,t),pc();break e}c=Error(a(426))}else if(Ra&&1&s.mode){var m=vu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),yu(m,u,s,0,t),Va(c);break e}}o=c,4!==As&&(As=2),null===Ms?Ms=[o]:Ms.push(o),c=ou(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ua(s,hu(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===zs||!zs.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ua(s,du(s,o,t));break e}}s=s.return}while(null!==s)}kc(n)}catch(w){t=w,Ts===n&&null!==n&&(Ts=n=n.return);continue}break}}function dc(){var e=_s.current;return _s.current=nu,null===e?nu:e}function pc(){0!==As&&3!==As&&2!==As||(As=4),null===Ss||0===(268435455&Os)&&0===(268435455&Ds)||oc(Ss,Cs)}function vc(e,t){var n=Is;Is|=2;var r=dc();for(Ss===e&&Cs===t||(qs=null,fc(e,t));;)try{yc();break}catch(i){hc(e,i)}if(Qi(),Is=n,_s.current=r,null!==Ts)throw Error(a(261));return Ss=null,Cs=0,As}function yc(){for(;null!==Ts;)gc(Ts)}function mc(){for(;null!==Ts&&!Qe();)gc(Ts)}function gc(e){var t=ws(e.alternate,e,Ns);e.memoizedProps=e.pendingProps,null===t?kc(e):Ts=t,xs.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ku(n,t,Ns)))return void(Ts=n)}else{if(null!==(n=Ku(n,t)))return n.flags&=32767,void(Ts=n);if(null===e)return As=6,void(Ts=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ts=t);Ts=t=e}while(null!==t);0===As&&(As=5)}function wc(e,t,n){var r=kt,i=Es.transition;try{Es.transition=null,kt=1,function(e,t,n,r){do{bc()}while(null!==Ks);if(0!==(6&Is))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ss&&(Ts=Ss=null,Cs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Cc(tt,(function(){return bc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Es.transition,Es.transition=null;var u=kt;kt=1;var s=Is;Is|=4,xs.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Qu=t;null!==Qu;)if(e=(t=Qu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qu=e;else for(;null!==Qu;){t=Qu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Wi(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;if(1===w.nodeType)w.textContent="";else if(9===w.nodeType){var b=w.body;null!=b&&(b.textContent="")}break;default:throw Error(a(163))}}catch(_){xc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Qu=e;break}Qu=t.return}v=Xu,Xu=!1}(e,n),ds(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,vs(n,e,i),Ye(),Is=s,kt=u,Es.transition=o}else e.current=n;if(Ws&&(Ws=!1,Ks=e,Hs=i),0===(o=e.pendingLanes)&&(zs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Vs)throw Vs=!1,e=Bs,Bs=null,e;0!==(1&Hs)&&0!==e.tag&&bc(),0!==(1&(o=e.pendingLanes))?e===Zs?Gs++:(Gs=0,Zs=e):Gs=0,Bi()}(e,t,n,r)}finally{Es.transition=i,kt=r}return null}function bc(){if(null!==Ks){var e=wt(Hs),t=Es.transition,n=kt;try{if(Es.transition=null,kt=16>e?16:e,null===Ks)var r=!1;else{if(e=Ks,Ks=null,Hs=0,0!==(6&Is))throw Error(a(331));var i=Is;for(Is|=4,Qu=e.current;null!==Qu;){var o=Qu,u=o.child;if(0!==(16&Qu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Qu=l;null!==Qu;){var f=Qu;switch(f.tag){case 0:case 11:case 15:Ju(8,f,o)}var h=f.child;if(null!==h)h.return=f,Qu=h;else for(;null!==Qu;){var d=(f=Qu).sibling,p=f.return;if(ns(f),f===l){Qu=null;break}if(null!==d){d.return=p,Qu=d;break}Qu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Qu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Qu=u;else e:for(;null!==Qu;){if(0!==(2048&(o=Qu).flags))switch(o.tag){case 0:case 11:case 15:Ju(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Qu=g;break e}Qu=o.return}}var k=e.current;for(Qu=k;null!==Qu;){var w=(u=Qu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Qu=w;else e:for(u=k;null!==Qu;){if(0!==(2048&(s=Qu).flags))try{switch(s.tag){case 0:case 11:case 15:es(9,s)}}catch(_){xc(s,s.return,_)}if(s===u){Qu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Qu=b;break e}Qu=s.return}}if(Is=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Es.transition=t}}return!1}function _c(e,t,n){aa(e,t=hu(0,t=ou(n,t),1)),t=$s(),null!==(e=ec(e,1))&&(mt(e,1,t),nc(e,t))}function xc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zs||!zs.has(r))){aa(t,e=du(t,e=ou(n,e),1)),e=$s(),null!==(t=ec(t,1))&&(mt(t,1,e),nc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=$s(),e.pingedLanes|=e.suspendedLanes&n,Ss===e&&(Cs&n)===n&&(4===As||3===As&&(130023424&Cs)===Cs&&500>$e()-js?fc(e,0):Ls|=n),nc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=$s();null!==(e=ec(e,t))&&(mt(e,t,n),nc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Cc(e,t){return Ge(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Nc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Ac(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Dc(n.children,i,o,t);case E:u=8,i|=8;break;case I:return(e=Pc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case P:return(e=Pc(19,n,t,i)).elementType=P,e.lanes=o,e;case O:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case A:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Dc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={},e}function Mc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function qc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Vc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,u,s){return(e=Uc(n,r,!0,e,0,a,0,u,s)).context=Vc(null),n=e.current,(a=ia(r=$s(),i=Xs(n))).callback=void 0!==t&&null!==t?t:null,aa(n,a),e.current.lanes=i,mt(e,i,r),nc(e,r),e}function zc(e,t,n,r){var i=t.current,a=$s(),o=Xs(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=Js(i,o,a))&&oa(e,i,o),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}ws=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),qa();break;case 5:to(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Ja(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(Ki,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Si(ro,1&ro.current),null!==(e=Wu(e,t,n))?e.sibling:null);Si(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Wu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,Ra&&0!==(1048576&t.flags)&&Ta(t,wa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ai(t,Ci.current);Xi(t,n),i=wo(null,t,r,e,i,n);var o=bo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=ha,t.stateNode=i,i._reactInternals=t,ya(t,r,e,n),t=Pu(null,t,r,!0,o,n)):(t.tag=0,Ra&&o&&Ca(t),_u(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=Wi(r,e),i){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=Nu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=Eu(null,t,r,Wi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Nu(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),sa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Ru(e,t,r,n,i=Error(a(424)));break e}for(Aa=ci(t.stateNode.containerInfo.firstChild),Pa=t,Ra=!0,Oa=null,n=Ga(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(qa(),r===i){t=Wu(e,t,n);break e}_u(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Fa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),_u(e,t,u,n),t.child;case 6:return null===e&&Fa(t),null;case 13:return Mu(e,t,n);case 4:return Ja(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ha(t,null,r,n):_u(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 7:return _u(e,t,t.pendingProps,n),t.child;case 8:case 12:return _u(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(Ki,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ia(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),$i(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),$i(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}_u(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Xi(t,n),r=r(i=Ji(i)),t.flags|=1,_u(e,t,r,n),t.child;case 14:return i=Wi(r=t.type,t.pendingProps),Eu(e,t,r,i=Wi(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Xi(t,n),pa(t,r,i),ya(t,r,i,n),Pu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Jc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Wc(o);u.call(e)}}zc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wc(s);u.call(e)}}var s=Uc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),cc((function(){zc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(o)}Qc.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zc(e,t,null,null)},Qc.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){zc(null,e,null,null)})),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),nc(t,$e()),0===(6&Is)&&(Us=$e()+500,Bi()))}break;case 13:var r=$s();cc((function(){return Js(e,1,r)})),Hc(e,1)}},_t=function(e){13===e.tag&&(Js(e,134217728,$s()),Hc(e,134217728))},xt=function(e){if(13===e.tag){var t=$s(),n=Xs(e);Js(e,n,t),Hc(e,n)}},Et=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=sc,Ne=cc;var el={usingClientEntryPoint:!1,Events:[ki,wi,bi,Se,Te,sc]},tl={findFiberByHostInstance:gi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{it=rl.inject(nl),at=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return qc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Zc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(cc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=sc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Jc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||b(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===m)},t.typeOf=b},7441:function(e,t,n){"use strict";e.exports=n(1372)},8459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},6900:function(e,t,n){"use strict";n(8459)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var w=k.prototype=new g;w.constructor=k,v(w,m.prototype),w.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.1.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},5484:function(e,t,n){"use strict";var r=n(7781).qC;t.Uo="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?r:r.apply(null,arguments)},"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__},8106:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){0};t.default=n},8952:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7757)),a=n(5792),o=n(7780),u=i.default.mark(C),s=i.default.mark(N),c=i.default.mark(P),l=i.default.mark(A),f=i.default.mark(R),h=i.default.mark(O),d=i.default.mark(D),p=i.default.mark(L),v=i.default.mark(M),y=i.default.mark(F),m=i.default.mark(j),g=i.default.mark(U),k=i.default.mark(q),w=i.default.mark(V),b=i.default.mark(B),_=i.default.mark(z),x=i.default.mark(W),E=i.default.mark(K),I=i.default.mark(H),S=i.default.mark(G),T=i.default.mark(Z);function C(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.applyActionCode],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),u,this)}function N(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.confirmPasswordReset],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),s,this)}function P(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.createUserWithEmailAndPassword],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),c,this)}function A(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.app.auth(),t.next=3,(0,o.call)([e.currentUser,e.currentUser.delete]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),l,this)}function R(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.linkWithPopup],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),f,this)}function O(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.linkWithRedirect],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),h,this)}function D(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.sendEmailVerification],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),d,this)}function L(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.sendPasswordResetEmail],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),p,this)}function M(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.signInAndRetrieveDataWithCredential],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),v,this)}function F(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.app.auth(),t.next=3,(0,o.call)([e,e.signInAnonymously]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),y,this)}function j(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.signInWithCredential],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),m,this)}function U(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.signInWithCustomToken],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),g,this)}function q(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.signInWithEmailAndPassword],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),k,this)}function V(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.signInWithPhoneNumber],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),w,this)}function B(e){var t,n,r;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.app.auth(),i.next=3,(0,o.call)([t,t.signInWithPopup],e);case 3:return n=i.sent,r=n.credential,i.abrupt("return",r);case 6:case"end":return i.stop()}}),b,this)}function z(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.signInWithRedirect],e);case 3:case"end":return n.stop()}}),_,this)}function W(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.app.auth(),t.next=3,(0,o.call)([e,e.signOut]);case 3:case"end":return t.stop()}}),x,this)}function K(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.unlink],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),E,this)}function H(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.updateEmail],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),I,this)}function G(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.updatePassword],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),S,this)}function Z(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.updateProfile],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),T,this)}var Q={applyActionCode:C,channel:function(){if(this._authChannel)return this._authChannel;var e=this.app.auth(),t=(0,a.eventChannel)((function(t){return e.onAuthStateChanged((function(e){return t({user:e})}),(function(e){return t({error:e})}))}));return this._authChannel=t,t},confirmPasswordReset:N,createUserWithEmailAndPassword:P,deleteProfile:A,linkWithPopup:R,linkWithRedirect:O,sendEmailVerification:D,sendPasswordResetEmail:L,signInAndRetrieveDataWithCredential:M,signInAnonymously:F,signInWithCredential:j,signInWithCustomToken:U,signInWithEmailAndPassword:q,signInWithPhoneNumber:V,signInWithPopup:B,signInWithRedirect:z,signOut:W,unlink:K,updateEmail:H,updatePassword:G,updateProfile:Z};t.default=Q},5966:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getRef=void 0;var i=r(n(693)),a=r(n(7757)),o=n(5792),u=n(7780),s=n(2133),c=a.default.mark(y),l=a.default.mark(m),f=a.default.mark(g),h=a.default.mark(k),d=a.default.mark(w),p=a.default.mark(_),v=function(e,t){return"string"===typeof t?e.app.database().ref(t):t};function y(e){var t,n;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=v(this,e),r.next=3,(0,u.call)([t,t.once],"value");case 3:return n=r.sent,r.abrupt("return",n.val());case 5:case"end":return r.stop()}}),c,this)}function m(e,t){var n,r;return a.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=v(this,e),i.next=3,(0,u.call)([n,n.push],t);case 3:return r=i.sent,i.abrupt("return",r.key);case 5:case"end":return i.stop()}}),l,this)}function g(e,t){var n;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=v(this,e),r.next=3,(0,u.call)([n,n.set],t);case 3:case"end":return r.stop()}}),f,this)}function k(e,t){var n;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=v(this,e),r.next=3,(0,u.call)([n,n.update],t);case 3:case"end":return r.stop()}}),h,this)}function w(e){var t;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=v(this,e),n.next=3,(0,u.call)([t,t.remove]);case 3:case"end":return n.stop()}}),d,this)}t.getRef=v;var b=function(e){return e.value};function _(e,t,n){var r;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,u.call)(this.database.channel,e,n);case 2:return r=a.sent,a.next=5,(0,u.fork)(s.syncChannel,r,(0,i.default)({transform:b},t));case 5:case"end":return a.stop()}}),p,this)}var x={read:y,create:m,update:g,patch:k,delete:w,channel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.buffers.none(),r=v(this,e),i=(0,o.eventChannel)((function(e){var n=r.on(t,(function(t){return e({snapshot:t,value:t.val()})}));return function(){return r.off(t,n)}}),n);return i},sync:_};t.default=x},9282:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getDocumentRef=t.getCollectionRef=void 0;var i=r(n(7757)),a=n(5792),o=n(7780),u=r(n(8106)),s=n(2133),c=i.default.mark(k),l=i.default.mark(w),f=i.default.mark(b),h=i.default.mark(_),d=i.default.mark(x),p=i.default.mark(E),v=i.default.mark(I),y=i.default.mark(S),m=function(e,t){return(0,u.default)(!!e.app.firestore,"Firestore isn't installed. Did you forget to `import '@firebase/firestore'`? See https://redux-saga-firebase.js.org/ for more information."),"string"===typeof t?e.app.firestore().collection(t):t};t.getCollectionRef=m;var g=function(e,t){return(0,u.default)(!!e.app.firestore,"Firestore isn't installed. Did you forget to `import '@firebase/firestore'`? See https://redux-saga-firebase.js.org/ for more information."),"string"===typeof t?e.app.firestore().doc(t):t};function k(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=m(this,e),r.next=3,(0,o.call)([n,n.add],t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),c,this)}function w(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=g(this,e),n.next=3,(0,o.call)([t,t.delete]);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),l,this)}function b(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=m(this,e),n.next=3,(0,o.call)([t,t.get]);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),f,this)}function _(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=g(this,e),n.next=3,(0,o.call)([t,t.get]);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),h,this)}function x(e,t,n){var r;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=g(this,e),i.next=3,(0,o.call)([r,r.set],t,n);case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}}),d,this)}function E(e){var t,n,r,a,u=arguments;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:for(t=g(this,e),n=u.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=u[a];return i.next=4,o.call.apply(void 0,[[t,t.update]].concat(r));case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}}),p,this)}function I(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,o.call)(this.firestore.channel,e,"collection",void 0,t.snapshotListenOptions);case 2:return n=r.sent,r.next=5,(0,o.fork)(s.syncChannel,n,t);case 5:case"end":return r.stop()}}),v,this)}function S(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,o.call)(this.firestore.channel,e,"document",void 0,t.snapshotListenOptions);case 2:return n=r.sent,r.next=5,(0,o.fork)(s.syncChannel,n,t);case 5:case"end":return r.stop()}}),y,this)}t.getDocumentRef=g;var T={addDocument:k,channel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"collection",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.buffers.none(),r=arguments.length>3?arguments[3]:void 0,i="collection"===t?m(this,e):g(this,e),o=(0,a.eventChannel)((function(e){return r?i.onSnapshot(r,e):i.onSnapshot(e)}),n);return o},deleteDocument:w,getCollection:b,getDocument:_,setDocument:x,syncCollection:I,syncDocument:S,updateDocument:E};t.default=T},8622:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionURL=u,t.default=void 0;var i=r(n(7757)),a=n(7780),o=i.default.mark(s);function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=/^https?:\/\//.test(e)?e:"https://".concat(this.region,"-").concat(this.projectId(),".cloudfunctions.net/").concat(e),r=Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&");return r?"".concat(n,"?").concat(r):n}function s(e){var t,n,r,s,c,l,f,h=arguments;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=h.length>1&&void 0!==h[1]?h[1]:{},n=h.length>2&&void 0!==h[2]?h[2]:{},r=u.call(this,e,t),i.next=5,(0,a.call)(fetch,r,n);case 5:if((s=i.sent).ok){i.next=8;break}throw s;case 8:return c=s.headers.get("Content-Type"),l=c.startsWith("application/json")?s.json:s.text,i.next=12,(0,a.call)([s,l]);case 12:return f=i.sent,i.abrupt("return",f);case 14:case"end":return i.stop()}}),o,this)}var c={call:s};t.default=c},9969:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(8952)),u=r(n(5966)),s=r(n(9282)),c=r(n(8622)),l=r(n(230)),f=r(n(6692)),h=function(){function e(t){(0,i.default)(this,e),this.app=t,this.region="us-central1",this.auth={applyActionCode:o.default.applyActionCode.bind(this),channel:o.default.channel.bind(this),confirmPasswordReset:o.default.confirmPasswordReset.bind(this),createUserWithEmailAndPassword:o.default.createUserWithEmailAndPassword.bind(this),deleteProfile:o.default.deleteProfile.bind(this),linkWithPopup:o.default.linkWithPopup.bind(this),linkWithRedirect:o.default.linkWithRedirect.bind(this),sendEmailVerification:o.default.sendEmailVerification.bind(this),sendPasswordResetEmail:o.default.sendPasswordResetEmail.bind(this),signInAndRetrieveDataWithCredential:o.default.signInAndRetrieveDataWithCredential.bind(this),signInAnonymously:o.default.signInAnonymously.bind(this),signInWithCredential:o.default.signInWithCredential.bind(this),signInWithCustomToken:o.default.signInWithCustomToken.bind(this),signInWithEmailAndPassword:o.default.signInWithEmailAndPassword.bind(this),signInWithPopup:o.default.signInWithPopup.bind(this),signInWithPhoneNumber:o.default.signInWithPhoneNumber.bind(this),signInWithRedirect:o.default.signInWithRedirect.bind(this),signOut:o.default.signOut.bind(this),unlink:o.default.unlink.bind(this),updateEmail:o.default.updateEmail.bind(this),updatePassword:o.default.updatePassword.bind(this),updateProfile:o.default.updateProfile.bind(this)},this.database={read:u.default.read.bind(this),create:u.default.create.bind(this),update:u.default.update.bind(this),patch:u.default.patch.bind(this),delete:u.default.delete.bind(this),channel:u.default.channel.bind(this),sync:u.default.sync.bind(this)},this.firestore={addDocument:s.default.addDocument.bind(this),channel:s.default.channel.bind(this),deleteDocument:s.default.deleteDocument.bind(this),getCollection:s.default.getCollection.bind(this),getDocument:s.default.getDocument.bind(this),setDocument:s.default.setDocument.bind(this),syncCollection:s.default.syncCollection.bind(this),syncDocument:s.default.syncDocument.bind(this),updateDocument:s.default.updateDocument.bind(this)},this.functions={call:c.default.call.bind(this)},this.messaging={channel:l.default.channel.bind(this),syncMessages:l.default.syncMessages.bind(this),syncToken:l.default.syncToken.bind(this),tokenRefreshChannel:l.default.tokenRefreshChannel.bind(this)},this.storage={uploadFile:f.default.uploadFile.bind(this),uploadString:f.default.uploadString.bind(this),getDownloadURL:f.default.getDownloadURL.bind(this),getFileMetadata:f.default.getFileMetadata.bind(this),updateFileMetadata:f.default.updateFileMetadata.bind(this),deleteFile:f.default.deleteFile.bind(this)}}return(0,a.default)(e,[{key:"projectId",value:function(){if(this._projectId)return this._projectId;var e=this.app.options.authDomain.match(/^([a-z0-9-]+)\.firebaseapp\.com$/)[1];return this._projectId=e,e}}]),e}();t.Z=h},230:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7757)),a=n(5792),o=n(7780),u=n(2133),s=i.default.mark(l),c=i.default.mark(f);function l(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,o.call)(this.messaging.channel);case 2:return t=n.sent,n.next=5,(0,o.fork)(u.syncChannel,t,e);case 5:case"end":return n.stop()}}),s,this)}function f(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,o.call)(this.messaging.tokenRefreshChannel);case 2:return t=n.sent,n.next=5,(0,o.fork)(u.syncChannel,t,e);case 5:case"end":return n.stop()}}),c,this)}var h={channel:function(){if(this._messageChannel)return this._messageChannel;var e=this.app.messaging(),t=(0,a.eventChannel)((function(t){return e.onMessage(t)}));return this._messageChannel=t,t},syncMessages:l,syncToken:f,tokenRefreshChannel:function(){if(this._tokenRefreshChannel)return this._tokenRefreshChannel;var e=this.app.messaging(),t=(0,a.eventChannel)((function(t){return e.onTokenRefresh((function(){e.getToken().then(t)}))}));return this._tokenRefreshChannel=t,t}};t.default=h},6692:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getRef=void 0;var i=r(n(7757)),a=n(7780),o=i.default.mark(f),u=i.default.mark(h),s=i.default.mark(d),c=i.default.mark(p),l=function(e,t){return"string"===typeof t?e.app.storage().ref(t):t};function f(e){var t,n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=l(this,e),r.next=3,(0,a.call)([t,t.getDownloadURL]);case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),o,this)}function h(e){var t,n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=l(this,e),r.next=3,(0,a.call)([t,t.getMetadata]);case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),u,this)}function d(e,t){var n,r;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=l(this,e),i.next=3,(0,a.call)([n,n.updateMetadata],t);case 3:return r=i.sent,i.abrupt("return",r);case 5:case"end":return i.stop()}}),s,this)}function p(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=l(this,e),n.next=3,(0,a.call)([t,t.delete]);case 3:case"end":return n.stop()}}),c,this)}t.getRef=l;var v={uploadFile:function(e,t,n){return l(this,e).put(t,n)},uploadString:function(e,t,n,r){return l(this,e).putString(t,n,r)},getDownloadURL:f,getFileMetadata:h,updateFileMetadata:d,deleteFile:p};t.default=v},2133:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.syncChannel=u;var i=r(n(7757)),a=n(7780),o=i.default.mark(u);function u(e,t){var n,r,u,s,c;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=t.successActionCreator,r=t.failureActionCreator,u=t.transform,i.prev=1;case 2:return i.next=5,(0,a.take)(e);case 5:return s=i.sent,c=u?u(s):s,i.next=9,(0,a.put)(n(c));case 9:i.next=2;break;case 11:i.next=21;break;case 13:if(i.prev=13,i.t0=i.catch(1),!r){i.next=20;break}return i.next=18,(0,a.put)(r(i.t0));case 18:i.next=21;break;case 20:console.error("The following error has been ignored because no `failureActionCreator` has been set:",i.t0);case 21:return i.prev=21,i.next=24,(0,a.cancelled)();case 24:if(!i.sent){i.next=26;break}e.close();case 26:return i.finish(21);case 27:case"end":return i.stop()}}),o,this,[[1,13,21,27]])}},5792:function(e,t,n){"use strict";n.r(t),n.d(t,{CANCEL:function(){return r.n1},END:function(){return I},SAGA_LOCATION:function(){return r.b_},buffers:function(){return u.H},channel:function(){return T},default:function(){return Q},detach:function(){return u.I},eventChannel:function(){return C},isEnd:function(){return S},multicastChannel:function(){return N},runSaga:function(){return G},stdChannel:function(){return P}});var r=n(7408),i=n(7462),a=n(3366),o=n(5609),u=n(6867),s=n(7781);function c(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}var l=c,f=[],h=0;function d(e){try{y(),e()}finally{m()}}function p(e){f.push(e),h||(y(),g())}function v(e){try{return y(),e()}finally{g()}}function y(){h++}function m(){h--}function g(){var e;for(m();!h&&void 0!==(e=f.shift());)d(e)}var k=function(e){return function(t){return e.some((function(e){return E(e)(t)}))}},w=function(e){return function(t){return e(t)}},b=function(e){return function(t){return t.type===String(e)}},_=function(e){return function(t){return t.type===e}},x=function(){return u.k};function E(e){var t="*"===e?x:(0,o.Z_)(e)?b:(0,o.IX)(e)?k:(0,o.eR)(e)?b:(0,o.Yl)(e)?w:(0,o.NA)(e)?_:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var I={type:r.sZ},S=function(e){return e&&e.type===r.sZ};function T(e){void 0===e&&(e=(0,u.e)());var t=!1,n=[];return{take:function(r){t&&e.isEmpty()?r(I):e.isEmpty()?(n.push(r),r.cancel=function(){(0,u.r)(n,r)}):r(e.take())},put:function(r){if(!t){if(0===n.length)return e.put(r);n.shift()(r)}},flush:function(n){t&&e.isEmpty()?n(I):n(e.flush())},close:function(){if(!t){t=!0;var e=n;n=[];for(var r=0,i=e.length;r<i;r++){(0,e[r])(I)}}}}}function C(e,t){void 0===t&&(t=(0,u.n)());var n,r=!1,i=T(t),a=function(){r||(r=!0,(0,o.Yl)(n)&&n(),i.close())};return n=e((function(e){S(e)?a():i.put(e)})),n=(0,u.o)(n),r&&n(),{take:i.take,flush:i.flush,close:a}}function N(){var e,t=!1,n=[],i=n;var a=function(){i===n&&(i=n.slice())},o=function(){t=!0;var e=n=i;i=[],e.forEach((function(e){e(I)}))};return(e={})[r.AS]=!0,e.put=function(e){if(!t)if(S(e))o();else for(var a=n=i,u=0,s=a.length;u<s;u++){var c=a[u];c[r.uq](e)&&(c.cancel(),c(e))}},e.take=function(e,n){void 0===n&&(n=x),t?e(I):(e[r.uq]=n,a(),i.push(e),e.cancel=(0,u.o)((function(){a(),(0,u.r)(i,e)})))},e.close=o,e}function P(){var e=N(),t=e.put;return e.put=function(e){e[r.Nm]?t(e):p((function(){t(e)}))},e}function A(e,t){var n=e[r.n1];(0,o.Yl)(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var R,O=0,D=function(){return++O};function L(e){e.isRunning()&&e.cancel()}var M=((R={})[u.T]=function(e,t,n){var i=t.channel,a=void 0===i?e.channel:i,u=t.pattern,s=t.maybe,c=function(e){e instanceof Error?n(e,!0):!S(e)||s?n(e):n(r.EO)};try{a.take(c,(0,o.d5)(u)?E(u):null)}catch(l){return void n(l,!0)}n.cancel=c.cancel},R[u.P]=function(e,t,n){var r=t.channel,i=t.action,a=t.resolve;p((function(){var t;try{t=(r?r.put:e.dispatch)(i)}catch(u){return void n(u,!0)}a&&(0,o.MC)(t)?A(t,n):n(t)}))},R[u.A]=function(e,t,n,r){var i=r.digestEffect,a=O,s=Object.keys(t);if(0!==s.length){var c=(0,u.l)(t,n);s.forEach((function(e){i(t[e],a,c[e],e)}))}else n((0,o.IX)(t)?[]:{})},R[u.R]=function(e,t,n,r){var i=r.digestEffect,a=O,s=Object.keys(t),c=(0,o.IX)(t)?(0,u.m)(s.length):{},l={},f=!1;s.forEach((function(e){var t=function(t,r){f||(r||(0,u.s)(t)?(n.cancel(),n(t,r)):(n.cancel(),f=!0,c[e]=t,n(c)))};t.cancel=u.t,l[e]=t})),n.cancel=function(){f||(f=!0,s.forEach((function(e){return l[e].cancel()})))},s.forEach((function(e){f||i(t[e],a,l[e],e)}))},R[u.C]=function(e,t,n,r){var i=t.context,a=t.fn,s=t.args,c=r.task;try{var l=a.apply(i,s);if((0,o.MC)(l))return void A(l,n);if((0,o.hZ)(l))return void H(e,l,c.context,O,(0,u.j)(a),!1,n);n(l)}catch(f){n(f,!0)}},R[u.a]=function(e,t,n){var r=t.context,i=t.fn,a=t.args;try{var u=function(e,t){(0,o.sR)(e)?n(t):n(e,!0)};i.apply(r,a.concat(u)),u.cancel&&(n.cancel=u.cancel)}catch(s){n(s,!0)}},R[u.F]=function(e,t,n,r){var i=t.context,a=t.fn,s=t.args,c=t.detached,l=r.task,f=function(e){var t=e.context,n=e.fn,r=e.args;try{var i=n.apply(t,r);if((0,o.hZ)(i))return i;var a=!1;return(0,u.q)((function(e){return a?{value:e,done:!0}:(a=!0,{value:i,done:!(0,o.MC)(i)})}))}catch(s){return(0,u.q)((function(){throw s}))}}({context:i,fn:a,args:s}),h=function(e,t){return e.isSagaIterator?{name:e.meta.name}:(0,u.j)(t)}(f,a);v((function(){var t=H(e,f,l.context,O,h,c,void 0);c?n(t):t.isRunning()?(l.queue.addTask(t),n(t)):t.isAborted()?l.queue.abort(t.error()):n(t)}))},R[u.J]=function(e,t,n,r){var i=r.task,a=function(e,t){if(e.isRunning()){var n={task:i,cb:t};t.cancel=function(){e.isRunning()&&(0,u.r)(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if((0,o.IX)(t)){if(0===t.length)return void n([]);var s=(0,u.l)(t,n);t.forEach((function(e,t){a(e,s[t])}))}else a(t,n)},R[u.b]=function(e,t,n,i){var a=i.task;t===r.sC?L(a):(0,o.IX)(t)?t.forEach(L):L(t),n()},R[u.S]=function(e,t,n){var r=t.selector,i=t.args;try{n(r.apply(void 0,[e.getState()].concat(i)))}catch(a){n(a,!0)}},R[u.d]=function(e,t,n){var r=t.pattern,i=T(t.buffer),a=E(r),o=function t(n){S(n)||e.channel.take(t,a),i.put(n)},u=i.close;i.close=function(){o.cancel(),u()},e.channel.take(o,a),n(i)},R[u.f]=function(e,t,n,r){n(r.task.isCancelled())},R[u.g]=function(e,t,n){t.flush(n)},R[u.G]=function(e,t,n,r){n(r.task.context[t])},R[u.h]=function(e,t,n,r){var i=r.task;(0,u.p)(i.context,t),n()},R);function F(e,t){return e+"?"+t}function j(e){var t=e.name,n=e.location;return n?t+"  "+F(n.fileName,n.lineNumber):t}function U(e){var t=(0,u.u)((function(e){return e.cancelledTasks}),e);return t.length?["Tasks cancelled due to error:"].concat(t).join("\n"):""}var q=null,V=[],B=function(e){e.crashedEffect=q,V.push(e)},z=function(){q=null,V.length=0},W=function(){var e=V[0],t=V.slice(1),n=e.crashedEffect?function(e){var t=(0,u.v)(e);return t?t.code+"  "+F(t.fileName,t.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+j(e.meta)+(n?" \n when executing effect "+n:"")].concat(t.map((function(e){return"    created by "+j(e.meta)})),[U(V)]).join("\n")};function K(e,t,n,i,a,o,s){var c;void 0===s&&(s=u.t);var f,h,d=0,p=null,v=[],y=Object.create(n),m=function(e,t,n){var r,i=[],a=!1;function o(e){t(),c(),n(e,!0)}function s(t){i.push(t),t.cont=function(s,c){a||((0,u.r)(i,t),t.cont=u.t,c?o(s):(t===e&&(r=s),i.length||(a=!0,n(r))))}}function c(){a||(a=!0,i.forEach((function(e){e.cont=u.t,e.cancel()})),i=[])}return s(e),{addTask:s,cancelAll:c,abort:o,getTasks:function(){return i}}}(t,(function(){v.push.apply(v,m.getTasks().map((function(e){return e.meta.name})))}),g);function g(t,n){if(n){if(d=2,B({meta:a,cancelledTasks:v}),k.isRoot){var i=W();z(),e.onError(t,{sagaStack:i})}h=t,p&&p.reject(t)}else t===r.Wd?d=1:1!==d&&(d=3),f=t,p&&p.resolve(t);k.cont(t,n),k.joiners.forEach((function(e){e.cb(t,n)})),k.joiners=null}var k=((c={})[r.Cs]=!0,c.id=i,c.meta=a,c.isRoot=o,c.context=y,c.joiners=[],c.queue=m,c.cancel=function(){0===d&&(d=1,m.cancelAll(),g(r.Wd,!1))},c.cont=s,c.end=g,c.setContext=function(e){(0,u.p)(y,e)},c.toPromise=function(){return p||(p=l(),2===d?p.reject(h):0!==d&&p.resolve(f)),p.promise},c.isRunning=function(){return 0===d},c.isCancelled=function(){return 1===d||0===d&&1===t.status},c.isAborted=function(){return 2===d},c.result=function(){return f},c.error=function(){return h},c);return k}function H(e,t,n,i,a,s,c){var l=e.finalizeRunEffect((function(t,n,i){if((0,o.MC)(t))A(t,i);else if((0,o.hZ)(t))H(e,t,h.context,n,a,!1,i);else if(t&&t[r.IO]){(0,M[t.type])(e,t.payload,i,d)}else i(t)}));p.cancel=u.t;var f={meta:a,cancel:function(){0===f.status&&(f.status=1,p(r.Wd))},status:0},h=K(e,f,n,i,a,s,c),d={task:h,digestEffect:v};return c&&(c.cancel=h.cancel),p(),h;function p(e,n){try{var a;n?(a=t.throw(e),z()):(0,u.y)(e)?(f.status=1,p.cancel(),a=(0,o.Yl)(t.return)?t.return(r.Wd):{done:!0,value:r.Wd}):a=(0,u.z)(e)?(0,o.Yl)(t.return)?t.return():{done:!0}:t.next(e),a.done?(1!==f.status&&(f.status=3),f.cont(a.value)):v(a.value,i,p)}catch(s){if(1===f.status)throw s;f.status=2,f.cont(s,!0)}}function v(t,n,r,i){void 0===i&&(i="");var a,o=D();function s(n,i){a||(a=!0,r.cancel=u.t,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(o,n):e.sagaMonitor.effectResolved(o,n)),i&&function(e){q=e}(t),r(n,i))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:o,parentEffectId:n,label:i,effect:t}),s.cancel=u.t,r.cancel=function(){a||(a=!0,s.cancel(),s.cancel=u.t,e.sagaMonitor&&e.sagaMonitor.effectCancelled(o))},l(t,o,s)}}function G(e,t){var n=e.channel,r=void 0===n?P():n,i=e.dispatch,a=e.getState,o=e.context,c=void 0===o?{}:o,l=e.sagaMonitor,f=e.effectMiddlewares,h=e.onError,d=void 0===h?u.B:h;for(var p=arguments.length,y=new Array(p>2?p-2:0),m=2;m<p;m++)y[m-2]=arguments[m];var g=t.apply(void 0,y);var k,w=D();if(l&&(l.rootSagaStarted=l.rootSagaStarted||u.t,l.effectTriggered=l.effectTriggered||u.t,l.effectResolved=l.effectResolved||u.t,l.effectRejected=l.effectRejected||u.t,l.effectCancelled=l.effectCancelled||u.t,l.actionDispatched=l.actionDispatched||u.t,l.rootSagaStarted({effectId:w,saga:t,args:y})),f){var b=s.qC.apply(void 0,f);k=function(e){return function(t,n,r){return b((function(t){return e(t,n,r)}))(t)}}}else k=u.E;var _={channel:r,dispatch:(0,u.D)(i),getState:a,sagaMonitor:l,onError:d,finalizeRunEffect:k};return v((function(){var e=H(_,g,c,w,(0,u.j)(t),!0,void 0);return l&&l.effectResolved(w,e),e}))}var Z=function(e){var t,n=void 0===e?{}:e,r=n.context,o=void 0===r?{}:r,s=n.channel,c=void 0===s?P():s,l=n.sagaMonitor,f=(0,a.Z)(n,["context","channel","sagaMonitor"]);function h(e){var n=e.getState,r=e.dispatch;return t=G.bind(null,(0,i.Z)({},f,{context:o,channel:c,dispatch:r,getState:n,sagaMonitor:l})),function(e){return function(t){l&&l.actionDispatched&&l.actionDispatched(t);var n=e(t);return c.put(t),n}}}return h.run=function(){return t.apply(void 0,arguments)},h.setContext=function(e){(0,u.p)(o,e)},h},Q=Z},7780:function(e,t,n){"use strict";n.r(t),n.d(t,{actionChannel:function(){return i.O},all:function(){return i._},apply:function(){return i.$},call:function(){return i.N},cancel:function(){return i.M},cancelled:function(){return i.a4},cps:function(){return i.a0},debounce:function(){return w},delay:function(){return i.U},effectTypes:function(){return i.W},flush:function(){return i.a5},fork:function(){return i.L},getContext:function(){return i.a6},join:function(){return i.a2},put:function(){return i.Y},putResolve:function(){return i.Z},race:function(){return i.V},retry:function(){return k},select:function(){return i.a3},setContext:function(){return i.a7},spawn:function(){return i.a1},take:function(){return i.K},takeEvery:function(){return v},takeLatest:function(){return y},takeLeading:function(){return m},takeMaybe:function(){return i.X},throttle:function(){return g}});var r=n(5609),i=n(6867),a=function(e){return{done:!0,value:e}},o={};function u(e){return(0,r.CE)(e)?"channel":(0,r.eR)(e)?String(e):(0,r.Yl)(e)?e.name:String(e)}function s(e,t,n){var r,u,s,c=t;function l(t,n){if(c===o)return a(t);if(n&&!u)throw c=o,n;r&&r(t);var i=n?e[u](n):e[c]();return c=i.nextState,s=i.effect,r=i.stateUpdater,u=i.errorState,c===o?a(t):s}return(0,i.q)(l,(function(e){return l(null,e)}),n)}function c(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o,c={done:!1,value:(0,i.K)(e)},l=function(e){return{done:!1,value:i.L.apply(void 0,[t].concat(r,[e]))}},f=function(e){return o=e};return s({q1:function(){return{nextState:"q2",effect:c,stateUpdater:f}},q2:function(){return{nextState:"q1",effect:l(o)}}},"q1","takeEvery("+u(e)+", "+t.name+")")}function l(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o,c,l={done:!1,value:(0,i.K)(e)},f=function(e){return{done:!1,value:i.L.apply(void 0,[t].concat(r,[e]))}},h=function(e){return{done:!1,value:(0,i.M)(e)}},d=function(e){return o=e},p=function(e){return c=e};return s({q1:function(){return{nextState:"q2",effect:l,stateUpdater:p}},q2:function(){return o?{nextState:"q3",effect:h(o)}:{nextState:"q1",effect:f(c),stateUpdater:d}},q3:function(){return{nextState:"q1",effect:f(c),stateUpdater:d}}},"q1","takeLatest("+u(e)+", "+t.name+")")}function f(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o,c={done:!1,value:(0,i.K)(e)},l=function(e){return{done:!1,value:i.N.apply(void 0,[t].concat(r,[e]))}},f=function(e){return o=e};return s({q1:function(){return{nextState:"q2",effect:c,stateUpdater:f}},q2:function(){return{nextState:"q1",effect:l(o)}}},"q1","takeLeading("+u(e)+", "+t.name+")")}function h(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];var c,l,f={done:!1,value:(0,i.O)(t,(0,i.Q)(1))},h=function(){return{done:!1,value:(0,i.K)(l)}},d=function(e){return{done:!1,value:i.L.apply(void 0,[n].concat(a,[e]))}},p={done:!1,value:(0,i.U)(e)},v=function(e){return c=e},y=function(e){return l=e};return s({q1:function(){return{nextState:"q2",effect:f,stateUpdater:y}},q2:function(){return{nextState:"q3",effect:h(),stateUpdater:v}},q3:function(){return{nextState:"q4",effect:d(c)}},q4:function(){return{nextState:"q2",effect:p}}},"q1","throttle("+u(t)+", "+n.name+")")}function d(e,t,n){for(var r=e,a=arguments.length,u=new Array(a>3?a-3:0),c=3;c<a;c++)u[c-3]=arguments[c];var l={done:!1,value:i.N.apply(void 0,[n].concat(u))},f={done:!1,value:(0,i.U)(t)};return s({q1:function(){return{nextState:"q2",effect:l,errorState:"q10"}},q2:function(){return{nextState:o}},q10:function(e){if((r-=1)<=0)throw e;return{nextState:"q1",effect:f}}},"q1","retry("+n.name+")")}function p(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];var c,l,f={done:!1,value:(0,i.K)(t)},h={done:!1,value:(0,i.V)({action:(0,i.K)(t),debounce:(0,i.U)(e)})},d=function(e){return{done:!1,value:i.L.apply(void 0,[n].concat(a,[e]))}},p=function(e){return{done:!1,value:e}},v=function(e){return c=e},y=function(e){return l=e};return s({q1:function(){return{nextState:"q2",effect:f,stateUpdater:v}},q2:function(){return{nextState:"q3",effect:h,stateUpdater:y}},q3:function(){return l.debounce?{nextState:"q1",effect:d(c)}:{nextState:"q2",effect:p(l.action),stateUpdater:v}}},"q1","debounce("+u(t)+", "+n.name+")")}function v(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return i.L.apply(void 0,[c,e,t].concat(r))}function y(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return i.L.apply(void 0,[l,e,t].concat(r))}function m(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return i.L.apply(void 0,[f,e,t].concat(r))}function g(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];return i.L.apply(void 0,[h,e,t,n].concat(a))}function k(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];return i.N.apply(void 0,[d,e,t,n].concat(a))}function w(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];return i.L.apply(void 0,[p,e,t,n].concat(a))}},7781:function(e,t,n){"use strict";n.d(t,{MT:function(){return c},UY:function(){return l},md:function(){return h},qC:function(){return f}});var r=n(1413);function i(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var a="function"===typeof Symbol&&Symbol.observable||"@@observable",o=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function s(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(i(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(i(1));return n(c)(e,t)}if("function"!==typeof e)throw new Error(i(2));var o=e,l=t,f=[],h=f,d=!1;function p(){h===f&&(h=f.slice())}function v(){if(d)throw new Error(i(3));return l}function y(e){if("function"!==typeof e)throw new Error(i(4));if(d)throw new Error(i(5));var t=!0;return p(),h.push(e),function(){if(t){if(d)throw new Error(i(6));t=!1,p();var n=h.indexOf(e);h.splice(n,1),f=null}}}function m(e){if(!s(e))throw new Error(i(7));if("undefined"===typeof e.type)throw new Error(i(8));if(d)throw new Error(i(9));try{d=!0,l=o(l,e)}finally{d=!1}for(var t=f=h,n=0;n<t.length;n++){(0,t[n])()}return e}function g(e){if("function"!==typeof e)throw new Error(i(10));o=e,m({type:u.REPLACE})}function k(){var e,t=y;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(i(11));function n(){e.next&&e.next(v())}return n(),{unsubscribe:t(n)}}})[a]=function(){return this},e}return m({type:u.INIT}),(r={dispatch:m,subscribe:y,getState:v,replaceReducer:g})[a]=k,r}function l(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];0,"function"===typeof e[a]&&(n[a]=e[a])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:u.INIT}))throw new Error(i(12));if("undefined"===typeof n(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(i(13))}))}(n)}catch(c){o=c}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,a={},u=0;u<s.length;u++){var c=s[u],l=n[c],f=e[c],h=l(f,t);if("undefined"===typeof h){t&&t.type;throw new Error(i(14))}a[c]=h,r=r||h!==f}return(r=r||s.length!==Object.keys(e).length)?a:e}}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),a=function(){throw new Error(i(15))},o={getState:n.getState,dispatch:function(){return a.apply(void 0,arguments)}},u=t.map((function(e){return e(o)}));return a=f.apply(void 0,u)(n.dispatch),(0,r.Z)((0,r.Z)({},n),{},{dispatch:a})}}}},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&D(b,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,I=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function P(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?x():(E=!1,I=null)}}else E=!1}if("function"===typeof k)x=function(){k(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=P,x=function(){R.postMessage(null)}}else x=function(){m(P,0)};function O(e){I=e,E||(E=!0,x())}function D(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,D(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},1561:function(e,t,n){"use strict";var r=n(2791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},7595:function(e,t,n){"use strict";var r=n(2791),i=n(7248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},7248:function(e,t,n){"use strict";e.exports=n(1561)},327:function(e,t,n){"use strict";e.exports=n(7595)},4942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},1413:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".386c1b5b.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="chip:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/chip/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkchip=self.webpackChunkchip||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ya},SDK_VERSION:function(){return gu},_DEFAULT_ENTRY_NAME:function(){return au},_addComponent:function(){return cu},_addOrOverwriteComponent:function(){return lu},_apps:function(){return uu},_clearComponents:function(){return pu},_components:function(){return su},_getProvider:function(){return hu},_registerComponent:function(){return fu},_removeServiceInstance:function(){return du},deleteApp:function(){return _u},getApp:function(){return wu},getApps:function(){return bu},initializeApp:function(){return ku},onLog:function(){return Iu},registerVersion:function(){return Eu},setLogLevel:function(){return Su}});var t=n(2791),r=n(1250),i=n(1413),a=n(3366);function o(e,t){if(null==e)return{};var n,r,i=(0,a.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=n(1694),s=n.n(u),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},l=t.createContext(null),f=n(7462);n(2176);function h(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function d(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function p(e,n){return Object.keys(n).reduce((function(r,i){var o,u=r,s=u[h(i)],c=u[i],l=(0,a.Z)(u,[h(i),i].map(d)),p=n[i],v=function(e,n,r){var i=(0,t.useRef)(void 0!==e),a=(0,t.useState)(n),o=a[0],u=a[1],s=void 0!==e,c=i.current;return i.current=s,!s&&c&&o!==n&&u(n),[s?e:o,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),u(e)}),[r])]}(c,s,e[p]),y=v[0],m=v[1];return(0,f.Z)({},l,((o={})[i]=y,o[p]=m,o))}),e)}function v(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function y(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function m(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}v.__suppressDeprecationWarning=!0,y.__suppressDeprecationWarning=!0,m.__suppressDeprecationWarning=!0;var g=/-(.)/g;var k=n(184),w=["xxl","xl","lg","md","sm","xs"],b=t.createContext({prefixes:{},breakpoints:w});b.Consumer,b.Provider;function _(e,n){var r=(0,t.useContext)(b).prefixes;return e||r[n]||n}var x=["className","bsPrefix","as"],E=function(e){return e[0].toUpperCase()+function(e){return e.replace(g,(function(e,t){return t.toUpperCase()}))}(e).slice(1)};function I(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.displayName,a=void 0===r?E(e):r,u=n.Component,c=n.defaultProps,l=t.forwardRef((function(t,n){var r=t.className,a=t.bsPrefix,c=t.as,l=void 0===c?u||"div":c,f=o(t,x),h=_(a,e);return(0,k.jsx)(l,(0,i.Z)({ref:n,className:s()(r,h)},f))}));return l.defaultProps=c,l.displayName=a,l}var S=["bsPrefix","className","as"],T=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.as,u=o(e,S);n=_(n,"navbar-brand");var c=a||(u.href?"a":"span");return(0,k.jsx)(c,(0,i.Z)((0,i.Z)({},u),{},{ref:t,className:s()(r,n)}))}));T.displayName="NavbarBrand";var C=T,N=n(4942);function P(e){return e&&e.ownerDocument||document}function A(e,t){return function(e){var t=P(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var R=/([A-Z])/g;var O=/^ms-/;function D(e){return function(e){return e.replace(R,"-$1").toLowerCase()}(e).replace(O,"-ms-")}var L=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var M=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(D(t))||A(e).getPropertyValue(D(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!L.test(e))}(i)?n+=D(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(D(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}var j=n(4164),U=!1,q=t.createContext(null),V="unmounted",B="exited",z="entering",W="entered",K="exiting",H=function(e){var n,r;function i(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=B,r.appearStatus=z):i=W:i=t.unmountOnExit||t.mountOnEnter?V:B,r.state={status:i},r.nextCallback=null,r}r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,F(n,r),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===V?{status:B}:null};var o=i.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==z&&n!==W&&(t=z):n!==z&&n!==W||(t=K)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===z?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===B&&this.setState({status:V})},o.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[j.findDOMNode(this),r],a=i[0],o=i[1],u=this.getTimeouts(),s=r?u.appear:u.enter;!e&&!n||U?this.safeSetState({status:W},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:z},(function(){t.props.onEntering(a,o),t.onTransitionEnd(s,(function(){t.safeSetState({status:W},(function(){t.props.onEntered(a,o)}))}))})))},o.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:j.findDOMNode(this);t&&!U?(this.props.onExit(r),this.safeSetState({status:K},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:B},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:B},(function(){e.props.onExited(r)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:j.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===V)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,a.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(q.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},i}(t.Component);function G(){}H.contextType=q,H.propTypes={},H.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:G,onEntering:G,onEntered:G,onExit:G,onExiting:G,onExited:G},H.UNMOUNTED=V,H.EXITED=B,H.ENTERING=z,H.ENTERED=W,H.EXITING=K;var Z=H,Q=!("undefined"===typeof window||!window.document||!window.document.createElement),Y=!1,$=!1;try{var X={get passive(){return Y=!0},get once(){return $=Y=!0}};Q&&(window.addEventListener("test",X,X),window.removeEventListener("test",X,!0))}catch(FU){}var J=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!$){var i=r.once,a=r.capture,o=n;!$&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,Y?r:a)}e.addEventListener(t,n,r)};var ee=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var te=function(e,t,n,r){return J(e,t,n,r),function(){ee(e,t,n,r)}};function ne(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=te(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function re(e,t,n,r){null==n&&(n=function(e){var t=M(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=ne(e,n,r),a=te(e,"transitionend",t);return function(){i(),a()}}function ie(e,t){var n=M(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function ae(e,t){var n=ie(e,"transitionDuration"),r=ie(e,"transitionDelay"),i=re(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}var oe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)};function ue(e){e.offsetHeight}var se=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var ce=function(e,n){return(0,t.useMemo)((function(){return function(e,t){var n=se(e),r=se(t);return function(e){n&&n(e),r&&r(e)}}(e,n)}),[e,n])};var le,fe=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],he=t.forwardRef((function(e,n){var r=e.onEnter,a=e.onEntering,u=e.onEntered,s=e.onExit,c=e.onExiting,l=e.onExited,f=e.addEndListener,h=e.children,d=e.childRef,p=o(e,fe),v=(0,t.useRef)(null),y=ce(v,d),m=function(e){var t;y((t=e)&&"setState"in t?j.findDOMNode(t):null!=t?t:null)},g=function(e){return function(t){e&&v.current&&e(v.current,t)}},w=(0,t.useCallback)(g(r),[r]),b=(0,t.useCallback)(g(a),[a]),_=(0,t.useCallback)(g(u),[u]),x=(0,t.useCallback)(g(s),[s]),E=(0,t.useCallback)(g(c),[c]),I=(0,t.useCallback)(g(l),[l]),S=(0,t.useCallback)(g(f),[f]);return(0,k.jsx)(Z,(0,i.Z)((0,i.Z)({ref:n},p),{},{onEnter:w,onEntered:_,onEntering:b,onExit:x,onExited:I,onExiting:E,addEndListener:S,nodeRef:v,children:"function"===typeof h?function(e,t){return h(e,(0,i.Z)((0,i.Z)({},t),{},{ref:m}))}:t.cloneElement(h,{ref:m})}))})),de=he,pe=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],ve={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function ye(e,t){var n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=ve[e];return n+parseInt(M(t,r[0]),10)+parseInt(M(t,r[1]),10)}var me=(le={},(0,N.Z)(le,B,"collapse"),(0,N.Z)(le,K,"collapsing"),(0,N.Z)(le,z,"collapsing"),(0,N.Z)(le,W,"collapse show"),le),ge={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:ye},ke=t.forwardRef((function(e,n){var r=e.onEnter,a=e.onEntering,u=e.onEntered,c=e.onExit,l=e.onExiting,f=e.className,h=e.children,d=e.dimension,p=void 0===d?"height":d,v=e.getDimensionValue,y=void 0===v?ye:v,m=o(e,pe),g="function"===typeof p?p():p,w=(0,t.useMemo)((function(){return oe((function(e){e.style[g]="0"}),r)}),[g,r]),b=(0,t.useMemo)((function(){return oe((function(e){var t="scroll".concat(g[0].toUpperCase()).concat(g.slice(1));e.style[g]="".concat(e[t],"px")}),a)}),[g,a]),_=(0,t.useMemo)((function(){return oe((function(e){e.style[g]=null}),u)}),[g,u]),x=(0,t.useMemo)((function(){return oe((function(e){e.style[g]="".concat(y(g,e),"px"),ue(e)}),c)}),[c,y,g]),E=(0,t.useMemo)((function(){return oe((function(e){e.style[g]=null}),l)}),[g,l]);return(0,k.jsx)(de,(0,i.Z)((0,i.Z)({ref:n,addEndListener:ae},m),{},{"aria-expanded":m.role?m.in:null,onEnter:w,onEntering:b,onEntered:_,onExit:x,onExiting:E,childRef:h.ref,children:function(e,n){return t.cloneElement(h,(0,i.Z)((0,i.Z)({},n),{},{className:s()(f,h.props.className,me[e],"width"===g&&"collapse-horizontal")}))}}))}));ke.defaultProps=ge;var we=ke,be=t.createContext(null);be.displayName="NavbarContext";var _e=be,xe=["children","bsPrefix"],Ee=t.forwardRef((function(e,n){var r=e.children,a=e.bsPrefix,u=o(e,xe);a=_(a,"navbar-collapse");var s=(0,t.useContext)(_e);return(0,k.jsx)(we,(0,i.Z)((0,i.Z)({in:!(!s||!s.expanded)},u),{},{children:(0,k.jsx)("div",{ref:n,className:a,children:r})}))}));Ee.displayName="NavbarCollapse";var Ie=Ee;var Se=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};function Te(e){var n=Se(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var Ce=["bsPrefix","className","children","label","as","onClick"],Ne=t.forwardRef((function(e,n){var r=e.bsPrefix,a=e.className,u=e.children,c=e.label,l=e.as,f=void 0===l?"button":l,h=e.onClick,d=o(e,Ce);r=_(r,"navbar-toggler");var p=(0,t.useContext)(_e)||{},v=p.onToggle,y=p.expanded,m=Te((function(e){h&&h(e),v&&v()}));return"button"===f&&(d.type="button"),(0,k.jsx)(f,(0,i.Z)((0,i.Z)({},d),{},{ref:n,onClick:m,"aria-label":c,className:s()(a,r,!y&&"collapsed"),children:u||(0,k.jsx)("span",{className:"".concat(r,"-icon")})}))}));Ne.displayName="NavbarToggle",Ne.defaultProps={label:"Toggle navigation"};var Pe=Ne,Ae="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,Re="undefined"!==typeof document||Ae?t.useLayoutEffect:t.useEffect,Oe=new WeakMap,De=function(e,t){if(e&&t){var n=Oe.get(t)||new Map;Oe.set(t,n);var r=n.get(e);return r||((r=t.matchMedia(e)).refCount=0,n.set(r.media,r)),r}};function Le(e,n){void 0===n&&(n="undefined"===typeof window?void 0:window);var r=De(e,n),i=(0,t.useState)((function(){return!!r&&r.matches})),a=i[0],o=i[1];return Re((function(){var t=De(e,n);if(!t)return o(!1);var r=Oe.get(n),i=function(){o(t.matches)};return t.refCount++,t.addListener(i),i(),function(){t.removeListener(i),t.refCount--,t.refCount<=0&&(null==r||r.delete(t.media)),t=void 0}}),[e]),a}var Me=function(e){var n=Object.keys(e);function r(e,t){return e===t?t:e?e+" and "+t:t}function i(t){var r=function(e){return n[Math.min(n.indexOf(e)+1,n.length-1)]}(t),i=e[r];return"(max-width: "+(i="number"===typeof i?i-.2+"px":"calc("+i+" - 0.2px)")+")"}return function(n,a,o){var u,s;"object"===typeof n?(u=n,o=a,a=!0):((s={})[n]=a=a||!0,u=s);var c=(0,t.useMemo)((function(){return Object.entries(u).reduce((function(t,n){var a=n[0],o=n[1];return"up"!==o&&!0!==o||(t=r(t,function(t){var n=e[t];return"number"===typeof n&&(n+="px"),"(min-width: "+n+")"}(a))),"down"!==o&&!0!==o||(t=r(t,i(a))),t}),"")}),[JSON.stringify(u)]);return Le(c,o)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),Fe=Me;function je(e){if(Array.isArray(e))return e}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qe(e,t){if(e){if("string"===typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ue(e,t):void 0}}function Ve(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Be(e,t){return je(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||qe(e,t)||Ve()}function ze(e){void 0===e&&(e=P());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(FU){return e.body}}function We(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function Ke(e){var n=function(e){var n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)((function(){return function(){return n.current()}}),[])}function He(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ge(e){return function(e){if(Array.isArray(e))return Ue(e)}(e)||He(e)||qe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t,n){return t&&Qe(e.prototype,t),n&&Qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $e(e){return"".concat("data-rr-ui-").concat(e)}var Xe=$e("modal-open"),Je=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,r=t.handleContainerOverflow,i=void 0===r||r,a=t.isRTL,o=void 0!==a&&a;Ze(this,e),this.handleContainerOverflow=i,this.isRTL=o,this.modals=[],this.ownerDocument=n}return Ye(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style=(0,N.Z)({overflow:r.style.overflow},n,r.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(M(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(Xe,""),M(r,t)}},{key:"reset",value:function(){var e=this;Ge(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(Xe),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),et=Je,tt=(0,t.createContext)(Q?window:void 0);tt.Provider;function nt(){return(0,t.useContext)(tt)}var rt=function(e,t){var n;return Q?null==e?(t||P()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null):null};var it,at=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function ot(e){var n=nt(),r=e||function(e){return it||(it=new et({ownerDocument:null==e?void 0:e.document})),it}(n),i=(0,t.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:function(){return r.add(i.current)},remove:function(){return r.remove(i.current)},isTopModal:function(){return r.isTopModal(i.current)},setDialogRef:(0,t.useCallback)((function(e){i.current.dialog=e}),[]),setBackdropRef:(0,t.useCallback)((function(e){i.current.backdrop=e}),[])})}var ut=(0,t.forwardRef)((function(e,n){var r=e.show,i=void 0!==r&&r,a=e.role,o=void 0===a?"dialog":a,u=e.className,s=e.style,c=e.children,l=e.backdrop,f=void 0===l||l,h=e.keyboard,d=void 0===h||h,p=e.onBackdropClick,v=e.onEscapeKeyDown,y=e.transition,m=e.backdropTransition,g=e.autoFocus,w=void 0===g||g,b=e.enforceFocus,_=void 0===b||b,x=e.restoreFocus,E=void 0===x||x,I=e.restoreFocusOptions,S=e.renderDialog,T=e.renderBackdrop,C=void 0===T?function(e){return(0,k.jsx)("div",Object.assign({},e))}:T,N=e.manager,P=e.container,A=e.onShow,R=e.onHide,O=void 0===R?function(){}:R,D=e.onExit,L=e.onExited,M=e.onExiting,F=e.onEnter,U=e.onEntering,q=e.onEntered,V=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,at),B=function(e,n){var r=nt(),i=Be((0,t.useState)((function(){return rt(e,null==r?void 0:r.document)})),2),a=i[0],o=i[1];if(!a){var u=rt(e);u&&o(u)}return(0,t.useEffect)((function(){n&&a&&n(a)}),[n,a]),(0,t.useEffect)((function(){var t=rt(e);t!==a&&o(t)}),[e,a]),a}(P),z=ot(N),W=function(){var e=(0,t.useRef)(!0),n=(0,t.useRef)((function(){return e.current}));return(0,t.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),n.current}(),K=function(e){var n=(0,t.useRef)(null);return(0,t.useEffect)((function(){n.current=e})),n.current}(i),H=Be((0,t.useState)(!i),2),G=H[0],Z=H[1],Y=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(function(){return z}),[z]),Q&&!K&&i&&(Y.current=ze()),y||i||G?i&&G&&Z(!1):Z(!0);var $=Te((function(){if(z.add(),ie.current=te(document,"keydown",ne),re.current=te(document,"focus",(function(){return setTimeout(J)}),!0),A&&A(),w){var e=ze(document);z.dialog&&e&&!We(z.dialog,e)&&(Y.current=e,z.dialog.focus())}})),X=Te((function(){var e;(z.remove(),null==ie.current||ie.current(),null==re.current||re.current(),E)&&(null==(e=Y.current)||null==e.focus||e.focus(I),Y.current=null)}));(0,t.useEffect)((function(){i&&B&&$()}),[i,B,$]),(0,t.useEffect)((function(){G&&X()}),[G,X]),Ke((function(){X()}));var J=Te((function(){if(_&&W()&&z.isTopModal()){var e=ze();z.dialog&&e&&!We(z.dialog,e)&&z.dialog.focus()}})),ee=Te((function(e){e.target===e.currentTarget&&(null==p||p(e),!0===f&&O())})),ne=Te((function(e){d&&27===e.keyCode&&z.isTopModal()&&(null==v||v(e),e.defaultPrevented||O())})),re=(0,t.useRef)(),ie=(0,t.useRef)(),ae=y;if(!B||!(i||ae&&!G))return null;var oe=Object.assign({role:o,ref:z.setDialogRef,"aria-modal":"dialog"===o||void 0},V,{style:s,className:u,tabIndex:-1}),ue=S?S(oe):(0,k.jsx)("div",Object.assign({},oe,{children:t.cloneElement(c,{role:"document"})}));ae&&(ue=(0,k.jsx)(ae,{appear:!0,unmountOnExit:!0,in:!!i,onExit:D,onExiting:M,onExited:function(){Z(!0),null==L||L.apply(void 0,arguments)},onEnter:F,onEntering:U,onEntered:q,children:ue}));var se=null;if(f){var ce=m;se=C({ref:z.setBackdropRef,onClick:ee}),ce&&(se=(0,k.jsx)(ce,{appear:!0,in:!!i,children:se}))}return(0,k.jsx)(k.Fragment,{children:j.createPortal((0,k.jsxs)(k.Fragment,{children:[se,ue]}),B)})}));ut.displayName="Modal";var st,ct=Object.assign(ut,{Manager:et}),lt=["className","children","transitionClasses"],ft=(st={},(0,N.Z)(st,z,"show"),(0,N.Z)(st,W,"show"),st),ht=t.forwardRef((function(e,n){var r=e.className,a=e.children,u=e.transitionClasses,c=void 0===u?{}:u,l=o(e,lt),f=(0,t.useCallback)((function(e,t){ue(e),null==l.onEnter||l.onEnter(e,t)}),[l]);return(0,k.jsx)(de,(0,i.Z)((0,i.Z)({ref:n,addEndListener:ae},l),{},{onEnter:f,childRef:a.ref,children:function(e,n){return t.cloneElement(a,(0,i.Z)((0,i.Z)({},n),{},{className:s()("fade",r,a.props.className,ft[e],c[e])}))}}))}));ht.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},ht.displayName="Fade";var dt,pt=ht,vt=I("offcanvas-body"),yt=["bsPrefix","className","children"],mt=(dt={},(0,N.Z)(dt,z,"show"),(0,N.Z)(dt,W,"show"),dt),gt=t.forwardRef((function(e,n){var r=e.bsPrefix,a=e.className,u=e.children,c=o(e,yt);return r=_(r,"offcanvas"),(0,k.jsx)(de,(0,i.Z)((0,i.Z)({ref:n,addEndListener:ae},c),{},{childRef:u.ref,children:function(e,n){return t.cloneElement(u,(0,i.Z)((0,i.Z)({},n),{},{className:s()(a,u.props.className,(e===z||e===K)&&"".concat(r,"-toggling"),mt[e])}))}}))}));gt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1},gt.displayName="OffcanvasToggling";var kt=gt,wt=t.createContext({onHide:function(){}}),bt=n(2007),_t=n.n(bt),xt=["className","variant"],Et={"aria-label":_t().string,onClick:_t().func,variant:_t().oneOf(["white"])},It=t.forwardRef((function(e,t){var n=e.className,r=e.variant,a=o(e,xt);return(0,k.jsx)("button",(0,i.Z)({ref:t,type:"button",className:s()("btn-close",r&&"btn-close-".concat(r),n)},a))}));It.displayName="CloseButton",It.propTypes=Et,It.defaultProps={"aria-label":"Close"};var St=It,Tt=["closeLabel","closeVariant","closeButton","onHide","children"],Ct=t.forwardRef((function(e,n){var r=e.closeLabel,a=e.closeVariant,u=e.closeButton,s=e.onHide,c=e.children,l=o(e,Tt),f=(0,t.useContext)(wt),h=Te((function(){null==f||f.onHide(),null==s||s()}));return(0,k.jsxs)("div",(0,i.Z)((0,i.Z)({ref:n},l),{},{children:[c,u&&(0,k.jsx)(St,{"aria-label":r,variant:a,onClick:h})]}))}));Ct.defaultProps={closeLabel:"Close",closeButton:!1};var Nt=Ct,Pt=["bsPrefix","className"],At=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=o(e,Pt);return n=_(n,"offcanvas-header"),(0,k.jsx)(Nt,(0,i.Z)((0,i.Z)({ref:t},a),{},{className:s()(r,n)}))}));At.displayName="OffcanvasHeader",At.defaultProps={closeLabel:"Close",closeButton:!1};var Rt=At,Ot=function(e){return t.forwardRef((function(t,n){return(0,k.jsx)("div",(0,i.Z)((0,i.Z)({},t),{},{ref:n,className:s()(t.className,e)}))}))},Dt=I("offcanvas-title",{Component:Ot("h5")});function Lt(e){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lt(e)}function Mt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lt(e)););return e}function Ft(){return Ft="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Mt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ft.apply(this,arguments)}function jt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}function Ut(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(FU){return!1}}function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bt(e,t){if(t&&("object"===qt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vt(e)}function zt(e){var t=Ut();return function(){var n,r=Lt(e);if(t){var i=Lt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Bt(this,n)}}var Wt=Function.prototype.bind.call(Function.prototype.call,[].slice);function Kt(e,t){return Wt(e.querySelectorAll(t))}function Ht(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Gt,Zt=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Qt=".sticky-top",Yt=".navbar-toggler",$t=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"adjustAndStore",value:function(e,t,n){var r=t.style[e];t.dataset[e]=r,M(t,(0,N.Z)({},e,"".concat(parseFloat(M(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],M(t,(0,N.Z)({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;Ft(Lt(n.prototype),"setContainerStyle",this).call(this,e);var r,i,a=this.getElement();if(i="modal-open",(r=a).classList?r.classList.add(i):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,i)||("string"===typeof r.className?r.className=r.className+" "+i:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+i)),e.scrollBarWidth){var o=this.isRTL?"paddingLeft":"paddingRight",u=this.isRTL?"marginLeft":"marginRight";Kt(a,Zt).forEach((function(n){return t.adjustAndStore(o,n,e.scrollBarWidth)})),Kt(a,Qt).forEach((function(n){return t.adjustAndStore(u,n,-e.scrollBarWidth)})),Kt(a,Yt).forEach((function(n){return t.adjustAndStore(u,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;Ft(Lt(n.prototype),"removeContainerStyle",this).call(this,e);var r,i,a=this.getElement();i="modal-open",(r=a).classList?r.classList.remove(i):"string"===typeof r.className?r.className=Ht(r.className,i):r.setAttribute("class",Ht(r.className&&r.className.baseVal||"",i));var o=this.isRTL?"paddingLeft":"paddingRight",u=this.isRTL?"marginLeft":"marginRight";Kt(a,Zt).forEach((function(e){return t.restore(o,e)})),Kt(a,Qt).forEach((function(e){return t.restore(u,e)})),Kt(a,Yt).forEach((function(e){return t.restore(u,e)}))}}]),n}(et);function Xt(e){return Gt||(Gt=new $t(e)),Gt}var Jt=$t,en=["bsPrefix","className","children","aria-labelledby","placement","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function tn(e){return(0,k.jsx)(kt,(0,i.Z)({},e))}function nn(e){return(0,k.jsx)(pt,(0,i.Z)({},e))}var rn=t.forwardRef((function(e,n){var r=e.bsPrefix,a=e.className,u=e.children,c=e["aria-labelledby"],l=e.placement,f=e.show,h=e.backdrop,d=e.keyboard,p=e.scroll,v=e.onEscapeKeyDown,y=e.onShow,m=e.onHide,g=e.container,w=e.autoFocus,b=e.enforceFocus,x=e.restoreFocus,E=e.restoreFocusOptions,I=e.onEntered,S=e.onExit,T=e.onExiting,C=e.onEnter,N=e.onEntering,P=e.onExited,A=e.backdropClassName,R=e.manager,O=o(e,en),D=(0,t.useRef)();r=_(r,"offcanvas");var L=((0,t.useContext)(_e)||{}).onToggle,M=Te((function(){null==L||L(),null==m||m()})),F=(0,t.useMemo)((function(){return{onHide:M}}),[M]);var j=(0,t.useCallback)((function(e){return(0,k.jsx)("div",(0,i.Z)((0,i.Z)({},e),{},{className:s()("".concat(r,"-backdrop"),A)}))}),[A,r]);return(0,k.jsx)(wt.Provider,{value:F,children:(0,k.jsx)(ct,{show:f,ref:n,backdrop:h,container:g,keyboard:d,autoFocus:w,enforceFocus:b&&!p,restoreFocus:x,restoreFocusOptions:E,onEscapeKeyDown:v,onShow:y,onHide:M,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==C||C.apply(void 0,[e].concat(n))},onEntering:N,onEntered:I,onExit:S,onExiting:T,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==P||P.apply(void 0,n)},manager:R||(p?(D.current||(D.current=new Jt({handleContainerOverflow:!1})),D.current):Xt()),transition:tn,backdropTransition:nn,renderBackdrop:j,renderDialog:function(e){return(0,k.jsx)("div",(0,i.Z)((0,i.Z)((0,i.Z)({role:"dialog"},e),O),{},{className:s()(a,r,"".concat(r,"-").concat(l)),"aria-labelledby":c,children:u}))}})})}));rn.displayName="Offcanvas",rn.defaultProps={show:!1,backdrop:!0,keyboard:!0,scroll:!1,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,placement:"start"};var an=Object.assign(rn,{Body:vt,Header:Rt,Title:Dt}),on=["className","bsPrefix","backdrop","backdropClassName","keyboard","scroll","placement","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onShow","onHide","onEscapeKeyDown","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],un=t.forwardRef((function(e,n){var r=e.className,a=e.bsPrefix,u=e.backdrop,c=e.backdropClassName,l=e.keyboard,f=e.scroll,h=e.placement,d=e.autoFocus,p=e.enforceFocus,v=e.restoreFocus,y=e.restoreFocusOptions,m=e.onShow,g=e.onHide,w=e.onEscapeKeyDown,b=e.onEnter,x=e.onEntering,E=e.onEntered,I=e.onExit,S=e.onExiting,T=e.onExited,C=o(e,on),N=(0,t.useContext)(_e);a=_(a,"offcanvas");var P="string"===typeof(null==N?void 0:N.expand),A=Fe(P?N.expand:"xs","up");return P&&A?(0,k.jsx)("div",(0,i.Z)((0,i.Z)({ref:n},C),{},{className:s()(r,a,"".concat(a,"-").concat(h))})):(0,k.jsx)(an,(0,i.Z)({ref:n,show:!(null==N||!N.expanded),bsPrefix:a,backdrop:u,backdropClassName:c,keyboard:l,scroll:f,placement:h,autoFocus:d,enforceFocus:p,restoreFocus:v,restoreFocusOptions:y,onShow:m,onHide:g,onEscapeKeyDown:w,onEnter:b,onEntering:x,onEntered:E,onExit:I,onExiting:S,onExited:T},C))}));un.displayName="NavbarOffcanvas";var sn=un,cn=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],ln=I("navbar-text",{Component:"span"}),fn=t.forwardRef((function(e,n){var r=p(e,{expanded:"onToggle"}),a=r.bsPrefix,u=r.expand,c=r.variant,f=r.bg,h=r.fixed,d=r.sticky,v=r.className,y=r.as,m=void 0===y?"nav":y,g=r.expanded,w=r.onToggle,b=r.onSelect,x=r.collapseOnSelect,E=o(r,cn),I=_(a,"navbar"),S=(0,t.useCallback)((function(){null==b||b.apply(void 0,arguments),x&&g&&(null==w||w(!1))}),[b,x,g,w]);void 0===E.role&&"nav"!==m&&(E.role="navigation");var T="".concat(I,"-expand");"string"===typeof u&&(T="".concat(T,"-").concat(u));var C=(0,t.useMemo)((function(){return{onToggle:function(){return null==w?void 0:w(!g)},bsPrefix:I,expanded:!!g,expand:u}}),[I,g,u,w]);return(0,k.jsx)(_e.Provider,{value:C,children:(0,k.jsx)(l.Provider,{value:S,children:(0,k.jsx)(m,(0,i.Z)((0,i.Z)({ref:n},E),{},{className:s()(v,I,u&&T,c&&"".concat(I,"-").concat(c),f&&"bg-".concat(f),d&&"sticky-".concat(d),h&&"fixed-".concat(h))}))})})}));fn.defaultProps={expand:!0,variant:"light",collapseOnSelect:!1},fn.displayName="Navbar";var hn=Object.assign(fn,{Brand:C,Collapse:Ie,Offcanvas:sn,Text:ln,Toggle:Pe}),dn=["bsPrefix","fluid","as","className"],pn=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,a=e.as,u=void 0===a?"div":a,c=e.className,l=o(e,dn),f=_(n,"container"),h="string"===typeof r?"-".concat(r):"-fluid";return(0,k.jsx)(u,(0,i.Z)((0,i.Z)({ref:t},l),{},{className:s()(c,r?"".concat(f).concat(h):f)}))}));pn.displayName="Container",pn.defaultProps={fluid:!1};var vn=pn;n(3573);var yn=t.createContext(null);yn.displayName="NavContext";var mn=yn,gn=t.createContext(null),kn=["as","disabled"];function wn(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.onClick,u=e.tabIndex,s=void 0===u?0:u,c=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var l={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},l];var f=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:"button",disabled:void 0,tabIndex:n?void 0:s,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},l]}var bn=t.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,kn),a=Be(wn(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],u=a[1].tagName;return(0,k.jsx)(u,Object.assign({},i,o,{ref:t}))}));bn.displayName="Button";var _n=bn,xn=["as","active","eventKey"];function En(e){var n=e.key,r=e.onClick,i=e.active,a=e.id,o=e.role,u=e.disabled,s=(0,t.useContext)(l),c=(0,t.useContext)(mn),f=(0,t.useContext)(gn),h=i,d={role:o};if(c){o||"tablist"!==c.role||(d.role="tab");var p=c.getControllerId(null!=n?n:null),v=c.getControlledId(null!=n?n:null);d[$e("event-key")]=n,d.id=p||a,!(h=null==i&&null!=n?c.activeKey===n:i)&&(null!=f&&f.unmountOnExit||null!=f&&f.mountOnEnter)||(d["aria-controls"]=v)}return"tab"===d.role&&(u&&(d.tabIndex=-1,d["aria-disabled"]=!0),h?d["aria-selected"]=h:d.tabIndex=-1),d.onClick=Te((function(e){u||(null==r||r(e),null!=n&&s&&!e.isPropagationStopped()&&s(n,e))})),[d,{isActive:h}]}var In=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?_n:n,i=e.active,a=e.eventKey,o=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,xn),u=Be(En(Object.assign({key:c(a,o.href),active:i},o)),2),s=u[0],l=u[1];return s[$e("active")]=l.isActive,(0,k.jsx)(r,Object.assign({},o,s,{ref:t}))}));In.displayName="NavItem";var Sn=In,Tn=["as","onSelect","activeKey","role","onKeyDown"];var Cn=function(){},Nn=$e("event-key"),Pn=t.forwardRef((function(e,n){var r,i,a=e.as,o=void 0===a?"div":a,u=e.onSelect,s=e.activeKey,f=e.role,h=e.onKeyDown,d=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Tn),p=(0,t.useReducer)((function(e){return!e}),!1)[1],v=(0,t.useRef)(!1),y=(0,t.useContext)(l),m=(0,t.useContext)(gn);m&&(f=f||"tablist",s=m.activeKey,r=m.getControlledId,i=m.getControllerId);var g=(0,t.useRef)(null),w=function(e){var t=g.current;if(!t)return null;var n=Kt(t,"[".concat(Nn,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;var i=n.indexOf(r);if(-1===i)return null;var a=i+e;return a>=n.length&&(a=0),a<0&&(a=n.length-1),n[a]},b=function(e,t){null!=e&&(null==u||u(e,t),null==y||y(e,t))};(0,t.useEffect)((function(){if(g.current&&v.current){var e=g.current.querySelector("[".concat(Nn,"][aria-selected=true]"));null==e||e.focus()}v.current=!1}));var _=ce(n,g);return(0,k.jsx)(l.Provider,{value:b,children:(0,k.jsx)(mn.Provider,{value:{role:f,activeKey:c(s),getControlledId:r||Cn,getControllerId:i||Cn},children:(0,k.jsx)(o,Object.assign({},d,{onKeyDown:function(e){if(null==h||h(e),m){var t,n;switch(e.key){case"ArrowLeft":case"ArrowUp":t=w(-1);break;case"ArrowRight":case"ArrowDown":t=w(1);break;default:return}if(t)e.preventDefault(),b(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),v.current=!0,p()}},ref:_,role:f}))})})}));Pn.displayName="Nav";var An=Object.assign(Pn,{Item:Sn}),Rn=t.createContext(null);Rn.displayName="CardHeaderContext";var On=Rn,Dn=I("nav-item");new WeakMap;var Ln=["onKeyDown"];var Mn=t.forwardRef((function(e,t){var n,r=e.onKeyDown,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Ln),a=Be(wn(Object.assign({tagName:"a"},i)),1)[0],o=Te((function(e){a.onKeyDown(e),null==r||r(e)}));return((n=i.href)&&"#"!==n.trim()||i.role)&&"button"!==i.role?(0,k.jsx)("a",Object.assign({ref:t},i,{onKeyDown:r})):(0,k.jsx)("a",Object.assign({ref:t},i,a,{onKeyDown:o}))}));Mn.displayName="Anchor";var Fn=Mn,jn=["bsPrefix","className","as","active","eventKey"],Un=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.as,u=void 0===a?Fn:a,l=e.active,f=e.eventKey,h=o(e,jn);n=_(n,"nav-link");var d=Be(En((0,i.Z)({key:c(f,h.href),active:l},h)),2),p=d[0],v=d[1];return(0,k.jsx)(u,(0,i.Z)((0,i.Z)((0,i.Z)({},h),p),{},{ref:t,className:s()(r,n,h.disabled&&"disabled",v.isActive&&"active")}))}));Un.displayName="NavLink",Un.defaultProps={disabled:!1};var qn=Un,Vn=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],Bn=t.forwardRef((function(e,n){var r,a,u,c=p(e,{activeKey:"onSelect"}),l=c.as,f=void 0===l?"div":l,h=c.bsPrefix,d=c.variant,v=c.fill,y=c.justify,m=c.navbar,g=c.navbarScroll,w=c.className,b=c.activeKey,x=o(c,Vn),E=_(h,"nav"),I=!1,S=(0,t.useContext)(_e),T=(0,t.useContext)(On);return S?(a=S.bsPrefix,I=null==m||m):T&&(u=T.cardHeaderBsPrefix),(0,k.jsx)(An,(0,i.Z)({as:f,ref:n,activeKey:b,className:s()(w,(r={},(0,N.Z)(r,E,!I),(0,N.Z)(r,"".concat(a,"-nav"),I),(0,N.Z)(r,"".concat(a,"-nav-scroll"),I&&g),(0,N.Z)(r,"".concat(u,"-").concat(d),!!u),(0,N.Z)(r,"".concat(E,"-").concat(d),!!d),(0,N.Z)(r,"".concat(E,"-fill"),v),(0,N.Z)(r,"".concat(E,"-justified"),y),r))},x))}));Bn.displayName="Nav",Bn.defaultProps={justify:!1,fill:!1};var zn,Wn=Object.assign(Bn,{Item:Dn,Link:qn}),Kn="/",Hn="/catalog",Gn="/cart",Zn="/profile";!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(zn||(zn={}));var Qn=function(e){return e};var Yn="beforeunload",$n="popstate";function Xn(e){e.preventDefault(),e.returnValue=""}function Jn(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function er(){return Math.random().toString(36).substr(2,8)}function tr(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function nr(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var rr=(0,t.createContext)(null);var ir=(0,t.createContext)(null);var ar=(0,t.createContext)({outlet:null,matches:[]});function or(e,t){if(!e)throw new Error(t)}function ur(e,t,n){void 0===n&&(n="/");var r=vr(("string"===typeof t?nr(t):t).pathname||"/",n);if(null==r)return null;var i=sr(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=hr(i[o],r);return a}function sr(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||or(!1),a.relativePath=a.relativePath.slice(r.length));var o=yr([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&or(!1),sr(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:fr(o,e.index),routesMeta:u})})),t}var cr=/^:\w+$/,lr=function(e){return"*"===e};function fr(e,t){var n=e.split("/"),r=n.length;return n.some(lr)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!lr(e)})).reduce((function(e,t){return e+(cr.test(t)?3:""===t?1:10)}),r)}function hr(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=dr({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:yr([i,l.pathname]),pathnameBase:mr(yr([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=yr([i,l.pathnameBase]))}return a}function dr(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=Be(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(VA){return e}}(c[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function pr(e,t,n){var r,i="string"===typeof e?nr(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?nr(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:gr(a),hash:kr(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function vr(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var yr=function(e){return e.join("/").replace(/\/\/+/g,"/")},mr=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},gr=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},kr=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function wr(e){br()||or(!1);var n=(0,t.useContext)(rr),r=n.basename,i=n.navigator,a=Er(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?nr(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?r+(f?"/":""):yr([r,u])}return i.createHref({pathname:c,search:s,hash:o})}function br(){return null!=(0,t.useContext)(ir)}function _r(){return br()||or(!1),(0,t.useContext)(ir).location}function xr(){br()||or(!1);var e=(0,t.useContext)(rr),n=e.basename,r=e.navigator,i=(0,t.useContext)(ar).matches,a=_r().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=pr(e,JSON.parse(o),a);"/"!==n&&(i.pathname=yr([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}function Er(e){var n=(0,t.useContext)(ar).matches,r=_r().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return pr(e,JSON.parse(i),r)}),[e,i,r])}function Ir(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(ar.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function Sr(e){or(!1)}function Tr(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?zn.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;br()&&or(!1);var h=mr(r),d=(0,t.useMemo)((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=nr(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,w=void 0===k?"":k,b=p.state,_=void 0===b?null:b,x=p.key,E=void 0===x?"default":x,I=(0,t.useMemo)((function(){var e=vr(y,h);return null==e?null:{pathname:e,search:g,hash:w,state:_,key:E}}),[h,y,g,w,_,E]);return null==I?null:(0,t.createElement)(rr.Provider,{value:d},(0,t.createElement)(ir.Provider,{children:a,value:{location:I,navigationType:s}}))}function Cr(e){var n=e.children,r=e.location;return function(e,n){br()||or(!1);var r,i=(0,t.useContext)(ar).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,_r());if(n){var c,l="string"===typeof n?nr(n):n;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||or(!1),r=l}else r=s;var f=r.pathname||"/",h=ur(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return Ir(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:yr([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:yr([u,e.pathnameBase])})})),i)}(Nr(n),r)}function Nr(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==Sr&&or(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=Nr(e.props.children)),n.push(r)}else n.push.apply(n,Nr(e.props.children))})),n}function Pr(){return Pr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pr.apply(this,arguments)}function Ar(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Rr=["onClick","reloadDocument","replace","state","target","to"];function Or(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,Qn({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener($n,(function(){if(a)h.call(a),a=null;else{var e=zn.Pop,t=i(),n=t[0],r=t[1];if(h.length){if(null!=n){var o=s-n;o&&(a={action:e,location:r,retry:function(){g(-1*o)}},g(o))}}else m(e)}}));var o=zn.Pop,u=i(),s=u[0],c=u[1],l=Jn(),h=Jn();function d(e){return"string"===typeof e?e:tr(e)}function p(e,t){return void 0===t&&(t=null),Qn((0,f.Z)({pathname:c.pathname,hash:"",search:""},"string"===typeof e?nr(e):e,{state:t,key:er()}))}function v(e,t){return[{usr:e.state,key:e.key,idx:t},d(e)]}function y(e,t,n){return!h.length||(h.call({action:e,location:t,retry:n}),!1)}function m(e){o=e;var t=i();s=t[0],c=t[1],l.call({action:o,location:c})}function g(e){r.go(e)}null==s&&(s=0,r.replaceState((0,f.Z)({},r.state,{idx:s}),""));var k={get action(){return o},get location(){return c},createHref:d,push:function e(t,i){var a=zn.Push,o=p(t,i);if(y(a,o,(function(){e(t,i)}))){var u=v(o,s+1),c=u[0],l=u[1];try{r.pushState(c,"",l)}catch(VA){n.location.assign(l)}m(a)}},replace:function e(t,n){var i=zn.Replace,a=p(t,n);if(y(i,a,(function(){e(t,n)}))){var o=v(a,s),u=o[0],c=o[1];r.replaceState(u,"",c),m(i)}},go:g,back:function(){g(-1)},forward:function(){g(1)},listen:function(e){return l.push(e)},block:function(e){var t=h.push(e);return 1===h.length&&n.addEventListener(Yn,Xn),function(){t(),h.length||n.removeEventListener(Yn,Xn)}}};return k}({window:i}));var o=a.current,u=Be((0,t.useState)({action:o.action,location:o.location}),2),s=u[0],c=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(c)}),[o]),(0,t.createElement)(Tr,{basename:n,children:r,location:s.location,navigationType:s.action,navigator:o})}var Dr=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=Ar(e,Rr),f=wr(c),h=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=xr(),s=_r(),c=Er(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||tr(s)===tr(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,t.createElement)("a",Pr({},l,{href:f,onClick:function(e){r&&r(e),e.defaultPrevented||i||h(e)},ref:n,target:s}))}));var Lr=function(e){return(0,k.jsx)(hn,{collapseOnSelect:!0,expand:"lg",className:"position-absolute w-100 navigation",children:(0,k.jsxs)(vn,{children:[(0,k.jsx)(hn.Brand,{href:"#home",className:"white p-2 w600",as:Dr,to:Kn,children:"CHIPKey"}),(0,k.jsx)(hn.Toggle,{"aria-controls":"responsive-navbar-nav"}),(0,k.jsxs)(hn.Collapse,{id:"responsive-navbar-nav",children:[(0,k.jsx)(Wn,{className:"me-auto"}),(0,k.jsxs)(Wn,{children:[(0,k.jsx)(Wn.Link,{href:"#deets",className:"white p-2 w600",children:"\u041e \u043d\u0430\u0441"}),(0,k.jsx)(Wn.Link,{href:"#deets",className:"white p-2 w600",as:Dr,to:Hn,children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),(0,k.jsx)(Wn.Link,{href:"#deets",className:"white p-2 w600",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),(0,k.jsx)(Wn.Link,{href:"#deets",className:"white p-2 w600",as:Dr,to:Gn,children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),(0,k.jsx)(Wn.Link,{href:"#deets",className:"white p-2 w600",as:Dr,to:Zn,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})]})]})]})})},Mr=n.p+"static/media/\u0420\u0435\u0441\u0443\u0440\u0441 3.094f41fd5f9c648b4bc0.png";var Fr=function(e){return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("div",{className:"header d-flex justify-content-center align-items-center",children:(0,k.jsxs)("div",{className:"row m-0 p-0 w-100",children:[(0,k.jsx)("div",{className:"col-xl-5 col-12  d-flex align-items-center justify-content-center",children:(0,k.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,k.jsxs)("div",{className:"text-start p-5",children:[(0,k.jsx)("h1",{className:"white header-title pt-5",children:"\u0410\u0412\u0422\u041e \u041a\u041b\u042e\u0427"}),(0,k.jsx)("p",{className:"white pt-3 pb-3",children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci aliquam culpa doloremque eum facere incidunt non optio quos veritatis voluptate."}),(0,k.jsx)("button",{className:"header-btn-1 m-2",children:"\u0421\u0432\u044f\u0437\u0430\u0442\u044c\u0441\u044f \u0441 \u043d\u0430\u043c\u0438"}),(0,k.jsx)("button",{className:"header-btn-2 m-2",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"})]})})}),(0,k.jsx)("div",{className:"col-xl-7 col-12 ",children:(0,k.jsx)("img",{src:Mr,alt:"",className:"img-fluid d-block p-5"})})]})})})},jr=n.p+"static/media/key.0698cf2377dbb2bf4470.png",Ur=n.p+"static/media/33333.377d60c08b8b50d31319.png";n.p;var qr=function(e){return(0,k.jsx)("div",{className:"about",children:(0,k.jsxs)("div",{className:"row p-0 m-0 ",children:[(0,k.jsx)("div",{className:"col-xl-5",children:(0,k.jsx)("img",{src:jr,className:"img-fluid   p-5",alt:""})}),(0,k.jsx)("div",{className:"col-xl-7 d-flex  align-items-center",children:(0,k.jsxs)("div",{className:"text-start p-5",children:[(0,k.jsx)("h1",{className:"white w600 title-about",children:"\u041e \u043d\u0430\u0441"}),(0,k.jsx)("img",{src:Ur,alt:"",className:"d-block img-fluid"}),(0,k.jsx)("p",{className:"white ",children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci animi aut deleniti eaque eius error esse harum ipsa, ipsam laboriosam, nulla odit officiis pariatur praesentium reiciendis sint soluta tempore totam ullam vitae. Asperiores illo in, modi molestiae neque perferendis vel?"}),(0,k.jsx)("p",{className:"pt-3 white ",children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. At delectus harum id inventore itaque iusto magnam perspiciatis quae quidem sequi!"})]})})]})})};var Vr=function(e){var t=e.cars;return(0,k.jsx)("div",{className:" text-center p-0 m-0 ",children:t.map((function(e){return(0,k.jsx)("p",{className:" model  white w500 p-0 m-0",children:e.a})}))})};var Br=function(e){return(0,k.jsx)("div",{className:"models pb-4",children:(0,k.jsxs)("div",{className:"container text-center",children:[(0,k.jsx)("h1",{className:"w800 p-4 white ",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),(0,k.jsx)("div",{className:"row",children:[{name:"A",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"B",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"C",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"D",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"E",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"F",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"G",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"H",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"I",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"J",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"K",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"L",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"M",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"N",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"O",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"P",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"Q",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"R",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"S",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"T",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"U",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"V",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"W",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"X",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"Y",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"}]},{name:"Z",cars:[{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"},{a:"Opel"}]}].map((function(e){return(0,k.jsxs)("div",{className:"col-xl-1 col-2",children:[(0,k.jsx)("h3",{className:"name w600 pt-3 ",children:e.name}),(0,k.jsx)(Vr,(0,i.Z)({},e))]})}))})]})})},zr=n.p+"static/media/38.4eb03e34d3a8d5bb5757.png";var Wr=function(e){return(0,k.jsx)("div",{className:"reverse d-flex align-items-center",children:(0,k.jsx)("div",{className:"",children:(0,k.jsxs)("div",{className:"row p-0 m-0",children:[(0,k.jsxs)("div",{className:"col-xl-6 p-5",children:[(0,k.jsx)("h1",{className:"white w800 text-start",children:"\u041e\u0431\u0430\u0440\u0442\u043d\u0430\u044f \u0441\u0432\u044f\u0437\u044c"}),(0,k.jsxs)("p",{className:"text-start white",children:["\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0443 ",(0,k.jsx)("br",{})," \u0438 \u043c\u044b \u0441\u0432\u044f\u0436\u0435\u043c\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u0432 \u043a\u0440\u0430\u0442\u0447\u0430\u0439\u0448\u0438\u0435 \u0441\u0440\u043e\u043a\u0438"]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"text-start pt-3",children:[(0,k.jsx)("p",{className:"white",children:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f"}),(0,k.jsx)("input",{className:"reverse-input text-center w-75",type:"text",placeholder:"\u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447"})]}),(0,k.jsxs)("div",{className:"text-start pt-3",children:[(0,k.jsx)("p",{className:"white",children:"\u0412\u0430\u0448 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,k.jsx)("input",{className:"reverse-input text-center w-75",type:"text",placeholder:"+7 *** *** ** **"})]}),(0,k.jsxs)("div",{className:"text-start pt-3",children:[(0,k.jsx)("p",{className:"white",children:"\u0412\u0430\u0448\u0430 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430"}),(0,k.jsx)("input",{className:"reverse-input text-center w-75",type:"text",placeholder:"********@****.***"})]}),(0,k.jsx)("div",{className:"d-flex justify-content-start",children:(0,k.jsx)("button",{className:"header-btn-1 mt-4 ",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})})]})]}),(0,k.jsx)("div",{className:"col-xl-6 d-flex align-items-center justify-content-end p-0 m-0",children:(0,k.jsx)("img",{src:zr,className:"img-fluid",alt:""})})]})})})},Kr=n.p+"static/media/\u0420\u0435\u0441\u0443\u0440\u0441 1.d01dbe61439d4c718179.png",Hr=(n.p,{color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0}),Gr=t.createContext&&t.createContext(Hr),Zr=function(){return Zr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Zr.apply(this,arguments)},Qr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Yr(e){return e&&e.map((function(e,n){return t.createElement(e.tag,Zr({key:n},e.attr),Yr(e.child))}))}function $r(e){return function(n){return t.createElement(Xr,Zr({attr:Zr({},e.attr)},n),Yr(e.child))}}function Xr(e){var n=function(n){var r,i=e.attr,a=e.size,o=e.title,u=Qr(e,["attr","size","title"]),s=a||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",Zr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,u,{className:r,style:Zr(Zr({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==Gr?t.createElement(Gr.Consumer,null,(function(e){return n(e)})):n(Hr)}function Jr(e){return $r({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 0 0 .6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0 0 46.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]})(e)}function ei(e){return $r({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]})(e)}function ti(e){return $r({tag:"svg",attr:{t:"1551322312294",style:"",viewBox:"0 0 1024 1024",version:"1.1"},child:[{tag:"defs",attr:{},child:[]},{tag:"path",attr:{d:"M474 152m8 0l60 0q8 0 8 8l0 704q0 8-8 8l-60 0q-8 0-8-8l0-704q0-8 8-8Z"}},{tag:"path",attr:{d:"M168 474m8 0l672 0q8 0 8 8l0 60q0 8-8 8l-672 0q-8 0-8-8l0-60q0-8 8-8Z"}}]})(e)}var ni=function(e){return(0,k.jsxs)("div",{className:"reviews",children:[(0,k.jsx)("h1",{className:"text-center text-white p-5 w600",children:"\u041e\u0442\u0437\u044b\u0432\u044b"}),(0,k.jsxs)("div",{className:"row p-0 m-0",children:[(0,k.jsx)("div",{className:"col-xl-5 ",children:(0,k.jsx)("div",{className:"",children:(0,k.jsx)("img",{src:Kr,className:"img-fluid mx-auto d-block",alt:""})})}),(0,k.jsx)("div",{className:"col-xl-7 ",children:(0,k.jsx)("div",{className:"p-4 overflow-reviews",children:[{name:"\u0410\u043d\u0442\u043e\u0448\u043a\u0430",text:" Lorem ipsum dolor sit amet, consectetur adipisicing elit. A alias at cum ex expedita ipsam laudantium praesentium quos repellat reprehenderit?"},{name:"\u0410\u043d\u0442\u043e\u0448\u043a\u0430",text:" Lorem ipsum dolor sit amet, consectetur adipisicing elit. A alias at cum ex expedita ipsam laudantium praesentium quos repellat reprehenderit?"},{name:"\u0410\u043d\u0442\u043e\u0448\u043a\u0430",text:" Lorem ipsum dolor sit amet, consectetur adipisicing elit. A alias at cum ex expedita ipsam laudantium praesentium quos repellat reprehenderit?"},{name:"\u0410\u043d\u0442\u043e\u0448\u043a\u0430",text:" Lorem ipsum dolor sit amet, consectetur adipisicing elit. A alias at cum ex expedita ipsam laudantium praesentium quos repellat reprehenderit?"},{name:"\u0410\u043d\u0442\u043e\u0448\u043a\u0430",text:" Lorem ipsum dolor sit amet, consectetur adipisicing elit. A alias at cum ex expedita ipsam laudantium praesentium quos repellat reprehenderit?"},{name:"\u0410\u043d\u0442\u043e\u0448\u043a\u0430",text:" Lorem ipsum dolor sit amet, consectetur adipisicing elit. A alias at cum ex expedita ipsam laudantium praesentium quos repellat reprehenderit?"},{name:"\u0410\u043d\u0442\u043e\u0448\u043a\u0430",text:" Lorem ipsum dolor sit amet, consectetur adipisicing elit. A alias at cum ex expedita ipsam laudantium praesentium quos repellat reprehenderit?"},{name:"\u0410\u043d\u0442\u043e\u0448\u043a\u0430",text:" Lorem ipsum dolor sit amet, consectetur adipisicing elit. A alias at cum ex expedita ipsam laudantium praesentium quos repellat reprehenderit?"},{name:"\u0410\u043d\u0442\u043e\u0448\u043a\u0430",text:" Lorem ipsum dolor sit amet, consectetur adipisicing elit. A alias at cum ex expedita ipsam laudantium praesentium quos repellat reprehenderit?"}].map((function(e){return(0,k.jsxs)("div",{className:"p-4 mt-4 reviews-block",children:[(0,k.jsx)("p",{className:"m-0 p-0 reviews-name",children:e.name}),(0,k.jsx)(Jr,{className:"star"})," ",(0,k.jsx)(Jr,{className:"star"})," ",(0,k.jsx)(Jr,{className:"star"})," ",(0,k.jsx)(Jr,{className:"star"})," ",(0,k.jsx)(Jr,{className:"star"}),(0,k.jsx)("p",{className:"pt-2 reviews-text",children:e.text})]})}))})})]})]})};var ri,ii=function(e){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Fr,{}),(0,k.jsx)(Br,{}),(0,k.jsx)(qr,{}),(0,k.jsx)(ni,{}),(0,k.jsx)(Wr,{})]})},ai=[{photo:"",brand:"Opel",model:"Astra",chip:"213asdasd",price:2500,manufacture:"dasdasdsad",classificationKey:"3123waeasd",classificationBoard:"asdasd13123",keyBlade:"123sadsad",id:"wert4312332q"},{photo:"",brand:"Opel",model:"Corsa",chip:"213asdasd",price:2500,manufacture:"dasdasdsad",classificationKey:"3123waeasd",classificationBoard:"asdasd13123",keyBlade:"123sadsad",id:"werte3r42123e432q"},{photo:"",brand:"Opel",model:"Omega",chip:"213asdasd",price:2500,manufacture:"dasdasdsad",classificationKey:"3123waeasd",classificationBoard:"asdasd13123",keyBlade:"123sadsad",id:"wer32q3wt432q"},{photo:"",brand:"Opel",model:"RRRRT",chip:"213asdasd",price:2500,manufacture:"dasdasdsad",classificationKey:"3123waeasd",classificationBoard:"asdasd13123",keyBlade:"123sadsad",id:"wert312q3wed432q"},{photo:"",brand:"Nissan",model:"Almera",chip:"213asdasd",price:2500,manufacture:"dasdasdsad",classificationKey:"3123waeasd",classificationBoard:"asdasd13123",keyBlade:"123sadsad",id:"wert4asdasd32q"},{photo:"",brand:"BMW",model:"E3",chip:"213asdasd",price:2500,manufacture:"dasdasdsad",classificationKey:"3123waeasd",classificationBoard:"asdasd13123",keyBlade:"123sadsad",id:"wert4332131232q"}];function oi(e){if((!ri&&0!==ri||e)&&Q){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),ri=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return ri}var ui=I("modal-body"),si=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],ci=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.contentClassName,u=e.centered,c=e.size,l=e.fullscreen,f=e.children,h=e.scrollable,d=o(e,si);n=_(n,"modal");var p="".concat(n,"-dialog"),v="string"===typeof l?"".concat(n,"-fullscreen-").concat(l):"".concat(n,"-fullscreen");return(0,k.jsx)("div",(0,i.Z)((0,i.Z)({},d),{},{ref:t,className:s()(p,r,c&&"".concat(n,"-").concat(c),u&&"".concat(p,"-centered"),h&&"".concat(p,"-scrollable"),l&&v),children:(0,k.jsx)("div",{className:s()("".concat(n,"-content"),a),children:f})}))}));ci.displayName="ModalDialog";var li=ci,fi=I("modal-footer"),hi=["bsPrefix","className"],di=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=o(e,hi);return n=_(n,"modal-header"),(0,k.jsx)(Nt,(0,i.Z)((0,i.Z)({ref:t},a),{},{className:s()(r,n)}))}));di.displayName="ModalHeader",di.defaultProps={closeLabel:"Close",closeButton:!1};var pi=di,vi=I("modal-title",{Component:Ot("h4")}),yi=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"],mi={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:li};function gi(e){return(0,k.jsx)(pt,(0,i.Z)((0,i.Z)({},e),{},{timeout:null}))}function ki(e){return(0,k.jsx)(pt,(0,i.Z)((0,i.Z)({},e),{},{timeout:null}))}var wi=t.forwardRef((function(e,n){var r=e.bsPrefix,a=e.className,u=e.style,c=e.dialogClassName,l=e.contentClassName,f=e.children,h=e.dialogAs,d=e["aria-labelledby"],p=e["aria-describedby"],v=e["aria-label"],y=e.show,m=e.animation,g=e.backdrop,w=e.keyboard,x=e.onEscapeKeyDown,E=e.onShow,I=e.onHide,S=e.container,T=e.autoFocus,C=e.enforceFocus,N=e.restoreFocus,A=e.restoreFocusOptions,R=e.onEntered,O=e.onExit,D=e.onExiting,L=e.onEnter,M=e.onEntering,F=e.onExited,j=e.backdropClassName,U=e.manager,q=o(e,yi),V=Be((0,t.useState)({}),2),B=V[0],z=V[1],W=Be((0,t.useState)(!1),2),K=W[0],H=W[1],G=(0,t.useRef)(!1),Z=(0,t.useRef)(!1),Y=(0,t.useRef)(null),$=Be((0,t.useState)(null),2),X=$[0],te=$[1],ne=ce(n,te),ie=Te(I),ae="rtl"===(0,t.useContext)(b).dir;r=_(r,"modal");var oe=(0,t.useMemo)((function(){return{onHide:ie}}),[ie]);function ue(){return U||Xt({isRTL:ae})}function se(e){if(Q){var t=ue().getScrollbarWidth()>0,n=e.scrollHeight>P(e).documentElement.clientHeight;z({paddingRight:t&&!n?oi():void 0,paddingLeft:!t&&n?oi():void 0})}}var le=Te((function(){X&&se(X.dialog)}));Ke((function(){ee(window,"resize",le),null==Y.current||Y.current()}));var fe=function(){G.current=!0},he=function(e){G.current&&X&&e.target===X.dialog&&(Z.current=!0),G.current=!1},de=function(){H(!0),Y.current=re(X.dialog,(function(){H(!1)}))},pe=function(e){"static"!==g?Z.current||e.target!==e.currentTarget?Z.current=!1:null==I||I():function(e){e.target===e.currentTarget&&de()}(e)},ve=(0,t.useCallback)((function(e){return(0,k.jsx)("div",(0,i.Z)((0,i.Z)({},e),{},{className:s()("".concat(r,"-backdrop"),j,!m&&"show")}))}),[m,j,r]),ye=(0,i.Z)((0,i.Z)({},u),B);ye.display="block";return(0,k.jsx)(wt.Provider,{value:oe,children:(0,k.jsx)(ct,{show:y,ref:ne,backdrop:g,container:S,keyboard:!0,autoFocus:T,enforceFocus:C,restoreFocus:N,restoreFocusOptions:A,onEscapeKeyDown:function(e){w||"static"!==g?w&&x&&x(e):(e.preventDefault(),de())},onShow:E,onHide:I,onEnter:function(e,t){e&&se(e),null==L||L(e,t)},onEntering:function(e,t){null==M||M(e,t),J(window,"resize",le)},onEntered:R,onExit:function(e){null==Y.current||Y.current(),null==O||O(e)},onExiting:D,onExited:function(e){e&&(e.style.display=""),null==F||F(e),ee(window,"resize",le)},manager:ue(),transition:m?gi:void 0,backdropTransition:m?ki:void 0,renderBackdrop:ve,renderDialog:function(e){return(0,k.jsx)("div",(0,i.Z)((0,i.Z)({role:"dialog"},e),{},{style:ye,className:s()(a,r,K&&"".concat(r,"-static")),onClick:g?pe:void 0,onMouseUp:he,"aria-label":v,"aria-labelledby":d,"aria-describedby":p,children:(0,k.jsx)(h,(0,i.Z)((0,i.Z)({},q),{},{onMouseDown:fe,className:c,contentClassName:l,children:f}))}))}})})}));wi.displayName="Modal",wi.defaultProps=mi;var bi=Object.assign(wi,{Body:ui,Header:pi,Title:vi,Footer:fi,Dialog:li,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),_i=n.p+"static/media/klyuch-rombik-bmv-e38e39-i-dr.-s-chipom.9810a88c4ff6a018da2e.jpg";function xi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}}]})(e)}var Ei="CART.ADD_CART",Ii="CART.ADD_QTY",Si="CART.DEC_QTY",Ti="CART.DEL_CART",Ci=function(e){return{type:Ei,payload:(0,i.Z)({},e)}},Ni=function(e){return{type:Ti,payload:{id:e}}},Pi=function(e,t){return{type:Ii,payload:{id:e,qty:t}}},Ai=function(e,t){return{type:Si,payload:{id:e,value:t}}},Ri={order:[],orderTotalPrice:0},Oi=n(7248),Di=n(327);var Li=function(e){e()},Mi=function(){return Li},Fi=t.createContext(null);function ji(){return(0,t.useContext)(Fi)}var Ui=function(){throw new Error("uSES not initialized!")},qi=Ui,Vi=function(e,t){return e===t};function Bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fi,n=e===Fi?ji:function(){return(0,t.useContext)(e)};return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vi;var i=n(),a=i.store,o=i.subscription,u=i.getServerState,s=qi(o.addNestedSub,a.getState,u||a.getState,e,r);return(0,t.useDebugValue)(s),s}}var zi=Bi();n(2110),n(6900);var Wi={notify:function(){},get:function(){return[]}};function Ki(e,t){var n,r=Wi;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=Mi(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=Wi)},getListeners:function(){return r}};return o}var Hi=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var Gi=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=(0,t.useMemo)((function(){var e=Ki(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),u=(0,t.useMemo)((function(){return n.getState()}),[n]);Hi((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=r||Fi;return t.createElement(s.Provider,{value:o},i)};function Zi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fi,n=e===Fi?ji:function(){return(0,t.useContext)(e)};return function(){return n().store}}var Qi=Zi();function Yi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fi,t=e===Fi?Qi:Zi(e);return function(){return t().dispatch}}var $i,Xi=Yi();!function(e){qi=e}(Di.useSyncExternalStoreWithSelector),function(e){e}(Oi.useSyncExternalStore),$i=j.unstable_batchedUpdates,Li=$i;var Ji=function(e){var t=e.show,n=e.handleClose,r=e.paramsProducts,i=Xi();return(0,k.jsxs)(bi,{show:t,onHide:n,centered:!0,children:[(0,k.jsxs)("div",{className:"modal-top d-flex justify-content-end align-items-center ",onClick:n,children:[(0,k.jsx)("p",{className:"p-0 m-0 ",children:"\u041d\u0410\u0417\u0410\u0414 \u041a \u041f\u041e\u0414\u0411\u041e\u0420\u0423"}),(0,k.jsx)(xi,{className:"close-modal m-3"})]}),(0,k.jsxs)("div",{className:"row",children:[(0,k.jsx)("div",{className:"col-xl-6 modal-left",children:(0,k.jsx)("img",{src:_i,className:"img-fluid p-2",alt:""})}),(0,k.jsxs)("div",{className:"col-xl-6 p-3  modal-right",children:[(0,k.jsxs)("h2",{className:"p-0 m-0",children:[r.brand," ",r.model]}),(0,k.jsx)("p",{children:"\u0410\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439 \u0447\u0438\u043f-\u043a\u043b\u044e\u0447"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{children:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438"}),(0,k.jsxs)("p",{children:["chip: ",r.chip]}),(0,k.jsxs)("p",{children:["manufacture: ",r.manufacture]}),(0,k.jsxs)("p",{children:["classificationKey: ",r.classificationKey]}),(0,k.jsxs)("p",{children:["classificationBoard: ",r.classificationBoard]}),(0,k.jsxs)("p",{children:["keyBlade: ",r.keyBlade]}),(0,k.jsx)("div",{className:"w-100 ",children:(0,k.jsx)("button",{className:"modal-btn__cart p-2 w-75",onClick:function(){return function(e){return i(Ci(e))}(r)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})})]})]})]})]})};var ea=function(e){var n=e.brand,r=e.model,i=e.chip,a=e.price,o=e.classificationKey,u=e.manufacture,s=e.keyBlade,c=e.classificationBoard,l=e.id,f=Be((0,t.useState)({}),2),h=f[0],d=f[1],p=Be((0,t.useState)(!1),2),v=p[0],y=p[1];return(0,k.jsxs)("div",{className:"col-xl-3 col-6 card-products pt-2 pb-2",children:[(0,k.jsxs)("div",{className:"card-products__body p-2",children:[(0,k.jsx)("div",{children:(0,k.jsx)("img",{src:_i,className:"img-fluid",alt:""})}),(0,k.jsxs)("div",{className:"text-start pt-3 ",children:[(0,k.jsxs)("p",{children:["\u041c\u0430\u0440\u043a\u0430: ",n]}),(0,k.jsxs)("p",{children:["\u041c\u043e\u0434\u0435\u043b\u044c: ",r]}),(0,k.jsxs)("p",{children:["\u0427\u0438\u043f: ",i]})]}),(0,k.jsx)("div",{children:(0,k.jsx)("button",{className:"card-products__more p-2 w-100",onClick:function(){y(!0),d({id:l,brand:n,model:r,chip:i,price:a,manufacture:u,classificationKey:o,classificationBoard:c,keyBlade:s})},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"})})]}),(0,k.jsx)(Ji,{show:v,handleClose:function(){return y(!1)},paramsProducts:h})]})};var ta=function(e){var n=Be((0,t.useState)(""),2),r=n[0],a=n[1],o=Be((0,t.useState)([]),2),u=o[0],s=o[1],c=Be((0,t.useState)(""),2),l=c[0],f=c[1],h=Be((0,t.useState)([]),2),d=h[0],p=h[1],v=Be((0,t.useState)("\u0413\u043e\u0434 \u0432\u044b\u043f\u0443\u0441\u043a\u0430"),2),y=v[0],m=v[1],g=[],w=[];return ai.filter((function(e){return!g.includes(e.brand)&&(g.push(e.brand),!0)})),u.filter((function(e){return!w.includes(e.model)&&(w.push(e.model),!0)})),(0,t.useEffect)((function(){var e=ai.filter((function(e){return e.brand.toLowerCase().includes(r.toLowerCase())}));s(e);var t=ai.filter((function(e){return e.model.toLowerCase().includes(l.toLowerCase())}));p(t)}),[r,l]),console.log(d),(0,k.jsx)("div",{className:"catalog pt-5",children:(0,k.jsx)("div",{className:"container",children:(0,k.jsxs)("div",{className:"row p-0 m-0",children:[(0,k.jsxs)("div",{className:"col-xl-3 pt-5",children:[(0,k.jsx)("h1",{className:"w600 white text-start ",children:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"}),(0,k.jsxs)("div",{className:"text-start pt-4",children:[(0,k.jsx)("p",{className:"white",children:"\u041c\u0430\u0440\u043a\u0430 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f"}),(0,k.jsx)("input",{className:"text-start reverse-input  w-75",type:"text",placeholder:"Opel",onChange:function(e){return a(e.target.value)},name:"city",list:"cities"}),(0,k.jsx)("datalist",{id:"cities",children:g.map((function(e){return(0,k.jsx)("option",{value:"".concat(e)})}))})]}),(0,k.jsxs)("div",{className:"text-start pt-4",children:[(0,k.jsx)("p",{className:"white",children:"\u041c\u043e\u0434\u0435\u043b\u044c \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f"}),(0,k.jsx)("input",{className:"reverse-input text-start w-75",type:"text",placeholder:"Opel Astra",onChange:function(e){return f(e.target.value)},name:"model",list:"models"}),(0,k.jsx)("datalist",{id:"models",children:w.map((function(e){return(0,k.jsx)("option",{value:"".concat(e)})}))})]}),(0,k.jsxs)("div",{className:"text-start pt-4",children:[(0,k.jsx)("p",{className:"white",children:"\u041a\u043b\u0430\u0441\u0441\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043a\u043b\u044e\u0447\u0430 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440"}),(0,k.jsxs)("select",{className:"reverse-input text-start w-75 color-blue",value:y,onChange:function(e){return m(e.target.value)},children:[(0,k.jsx)("option",{children:"\u0413\u043e\u0434 \u0432\u044b\u043f\u0443\u0441\u043a\u0430"}),(0,k.jsx)("option",{children:"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c \u043a\u043b\u044e\u0447\u0430"}),(0,k.jsx)("option",{children:"\u041a\u043b\u0430\u0441\u0441\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043f\u043b\u0430\u0442\u044b"})]})]}),(0,k.jsxs)("div",{className:"text-start pt-4",children:[(0,k.jsx)("input",{className:"reverse-input text-start w-75",type:"text",placeholder:"".concat(y),onChange:function(e){return f(e.target.value)},name:"",list:""}),(0,k.jsx)("datalist",{id:"models",children:w.map((function(e){return(0,k.jsx)("option",{value:"".concat(e)})}))})]}),(0,k.jsx)("div",{className:"pt-3",children:(0,k.jsx)("button",{className:"w-75 card-products__more p-2",onClick:function(){a(""),f(""),m("")},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"})})]}),(0,k.jsxs)("div",{className:"col-xl-9 mt-5",children:[(0,k.jsx)("h1",{className:"w600 white text-start",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"}),(0,k.jsx)("div",{className:"",children:l?(0,k.jsx)("div",{className:"row",children:d.map((function(e){return(0,k.jsx)(ea,(0,i.Z)({},e))}))}):(0,k.jsx)("div",{className:"row",children:u.map((function(e){return(0,k.jsx)(ea,(0,i.Z)({},e))}))})})]})]})})})},na=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],ra=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.striped,u=e.bordered,c=e.borderless,l=e.hover,f=e.size,h=e.variant,d=e.responsive,p=o(e,na),v=_(n,"table"),y=s()(r,v,h&&"".concat(v,"-").concat(h),f&&"".concat(v,"-").concat(f),a&&"".concat(v,"-striped"),u&&"".concat(v,"-bordered"),c&&"".concat(v,"-borderless"),l&&"".concat(v,"-hover")),m=(0,k.jsx)("table",(0,i.Z)((0,i.Z)({},p),{},{className:y,ref:t}));if(d){var g="".concat(v,"-responsive");return"string"===typeof d&&(g="".concat(g,"-").concat(d)),(0,k.jsx)("div",{className:g,children:m})}return m})),ia=ra;var aa=function(e){var t=Xi(),n=zi((function(e){return e.cart.order})),r=zi((function(e){return e.cart.orderTotalPrice}));return(0,k.jsx)("div",{className:"cart",children:(0,k.jsxs)("div",{className:"container pt-5",children:[(0,k.jsx)("h1",{className:"text-center p-4 w600 text-white",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),(0,k.jsxs)("div",{className:"row",children:[(0,k.jsx)("div",{className:"col-xl-8",children:(0,k.jsxs)(ia,{className:"table-cart",bordered:!0,size:"sm",responsive:!0,children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{className:"text-center",children:[(0,k.jsx)("th",{className:"",children:"\u041a\u043b\u044e\u0447"}),(0,k.jsx)("th",{className:"",children:"\u0411\u0440\u0435\u043d\u0434"}),(0,k.jsx)("th",{className:"",children:"\u041c\u043e\u0434\u0435\u043b\u044c"}),(0,k.jsx)("th",{className:"",children:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438"}),(0,k.jsx)("th",{className:"",children:"\u0426\u0435\u043d\u0430"}),(0,k.jsx)("th",{className:"",children:"\u041a\u043e\u043b\u043b\u0438\u0447\u0438\u0441\u0442\u0432\u043e"}),(0,k.jsx)("th",{className:"",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})}),(0,k.jsx)("tbody",{className:"tbody ",children:n.map((function(e){return(0,k.jsxs)("tr",{className:"text-center ",children:[(0,k.jsx)("td",{className:"p-4 "}),(0,k.jsx)("td",{className:"p-4 ",children:e.brand}),(0,k.jsx)("td",{className:"p-4",children:e.model}),(0,k.jsxs)("td",{className:"p-4",children:[e.chip,(0,k.jsx)("br",{}),e.manufacture,(0,k.jsx)("br",{}),e.classificationBoard,(0,k.jsx)("br",{}),e.classificationKey,(0,k.jsx)("br",{})]}),(0,k.jsx)("td",{className:"p-4",children:e.totalPrice}),(0,k.jsxs)("td",{className:"p-4 d-flex justify-content-around align-items-center",children:[(0,k.jsx)(ei,{className:"qty-params pointer",onClick:function(){return function(e,n){return t(Ai(e,n))}(e.id,e.qty)}})," ",e.qty," ",(0,k.jsx)(ti,{onClick:function(){return function(e,n){return t(Pi(e,n))}(e.id,e.qty)},className:"qty-params pointer"})]}),(0,k.jsx)("td",{className:"p-4",children:(0,k.jsx)(xi,{className:"del-cart__item pointer",onClick:function(){return function(e,n){return t(Ni(e))}(e.id,e.qty)}})})]})}))})]})}),(0,k.jsx)("div",{className:"col-xl-4",children:(0,k.jsx)("div",{className:"pl-3 order-form",children:(0,k.jsxs)("div",{className:"p-3",children:[(0,k.jsx)("h2",{className:"cart-form__title w600",children:"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"cart-form__general pt-3",children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u0430:"}),(0,k.jsxs)("h3",{className:"cart-form__price w600",children:[r," \u0440\u0443\u0431\u043b\u0435\u0439"]}),(0,k.jsx)("div",{className:"pt-3",children:(0,k.jsx)("button",{className:"card-products__more w-50 p-3",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]})]})})})]})]})})},oa="AUTH.SET_USER",ua="AUTH.LOGIN_USER",sa="AUTH.REGISTER_USER",ca=function(e){return{type:oa,payload:e}},la={login:null,user:!1},fa=n(3288),ha=n(7215),da=n(8987);function pa(e){var n=Xi(),r=zi((function(e){return e.auth.user})),i=Be((0,t.useState)(!0),2),a=i[0],o=i[1],u=Be((0,t.useState)("rusla3213n090909@mail.ru"),2),s=u[0],c=u[1],l=Be((0,t.useState)("dagSFASDsadsadsw"),2),f=l[0],h=l[1],d=Be((0,t.useState)("ruslan090909@mail.ru"),2),p=d[0],v=d[1],y=Be((0,t.useState)("dagSFASDsadsadsw"),2),m=y[0],g=y[1],w=xr();return r&&setTimeout((function(){w("/")}),500),(0,k.jsx)("div",{className:"d-flex align-items-center justify-content-center  p-5 auth ",children:r?(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("div",{children:(0,k.jsx)(fa.v,{className:"done-register"})})}):(0,k.jsx)(k.Fragment,{children:a?(0,k.jsxs)("div",{className:"auth-box p-4 mt-5",children:[(0,k.jsxs)("div",{className:"d-flex justify-content-around align-items-center",children:[(0,k.jsx)("span",{onClick:function(){return w(-1)},className:"icon-box",children:(0,k.jsx)(ha.u,{className:"auth-icon"})}),(0,k.jsx)("img",{className:"d-block mx-auto",alt:""}),(0,k.jsx)("span",{onClick:function(){return w(-1)},className:"icon-box",children:(0,k.jsx)(da.Q,{className:"auth-icon"})})]}),(0,k.jsx)("div",{className:"d-flex justify-content-center p-3",children:(0,k.jsx)("h3",{className:"form-name-auth ",children:"\u0420\u0435\u0433\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),(0,k.jsx)("div",{className:"row d-flex justify-content-center",children:(0,k.jsx)("div",{className:"col-xl-8 col-12",children:(0,k.jsxs)("div",{className:"w-100",children:[(0,k.jsx)("input",{type:"text",name:"email",placeholder:"Email",className:"box-input w-100",onChange:function(e){return c(e.target.value)}}),(0,k.jsx)("input",{type:"text",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"box-input w-100",onChange:function(e){return h(e.target.value)}})," ",(0,k.jsx)("br",{})]})})}),(0,k.jsx)("button",{className:"header-btn-1  mt-3 d-block mx-auto text-center",onClick:function(){return n({type:sa,email:s,password:f})},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),(0,k.jsx)("p",{className:"text-center mt-5",children:"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"}),(0,k.jsx)("div",{className:"d-flex justify-content-center",children:(0,k.jsx)("p",{className:"text-center dop ",onClick:function(){return o(!a)},children:"\u0412\u043e\u0439\u0442\u0438"})})]}):(0,k.jsxs)("div",{className:"auth-box p-4 mt-5",children:[(0,k.jsxs)("div",{className:"d-flex justify-content-around align-items-center",children:[(0,k.jsx)("span",{onClick:function(){return w(-1)},className:"icon-box",children:(0,k.jsx)(ha.u,{className:"auth-icon"})}),(0,k.jsx)("img",{className:"d-block mx-auto",alt:""}),(0,k.jsx)("span",{onClick:function(){return w(-1)},className:"icon-box",children:(0,k.jsx)(da.Q,{className:"auth-icon"})})]}),(0,k.jsx)("div",{className:"d-flex justify-content-center p-3",children:(0,k.jsx)("h3",{className:"form-name-auth ",children:"\u0412\u043e\u0439\u0442\u0438"})}),(0,k.jsx)("div",{className:"row d-flex justify-content-center",children:(0,k.jsx)("div",{className:"col-xl-8 col-12",children:(0,k.jsxs)("div",{className:"w-100",children:[(0,k.jsx)("input",{type:"text",placeholder:"Email",className:"box-input w-100",onChange:function(e){return v(e.target.value)}}),(0,k.jsx)("input",{type:"text",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"box-input w-100",onChange:function(e){return g(e.target.value)}})," ",(0,k.jsx)("br",{})]})})}),(0,k.jsx)("button",{className:"header-btn-1  mt-3 d-block mx-auto text-center",onClick:function(){return n({type:ua,loginEmail:p,loginPassword:m})},children:"\u0412\u043e\u0439\u0442\u0438"}),(0,k.jsx)("p",{className:"text-center mt-5",children:"\u0425\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"}),(0,k.jsx)("div",{className:"d-flex justify-content-center",children:(0,k.jsx)("p",{className:"text-center dop ",onClick:function(){return o(!a)},children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})})})}var va=function(e){var t=zi((function(e){return e.auth.user}));return(0,k.jsx)("div",{children:t?(0,k.jsx)("div",{className:"pt-5",children:t.uid}):(0,k.jsx)("div",{children:(0,k.jsx)(pa,{})})})};var ya=function(e){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Lr,{}),(0,k.jsxs)(Cr,{children:[(0,k.jsx)(Sr,{exact:!0,path:Kn,element:(0,k.jsx)(ii,{})}),(0,k.jsx)(Sr,{path:Hn,element:(0,k.jsx)(ta,{})}),(0,k.jsx)(Sr,{path:Gn,element:(0,k.jsx)(aa,{})}),(0,k.jsx)(Sr,{path:Zn,element:(0,k.jsx)(va,{})})]})]})};var ma=function(){return(0,k.jsx)(ya,{})},ga=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},ka=n(7781),wa=(0,ka.UY)({cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ri,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ei:var n=e.order.find((function(e){return e.id===t.payload.id})),r=n?e.order.map((function(e){return e.id===t.payload.id?(0,i.Z)((0,i.Z)({},e),{},{qty:e.qty+1}):e})):[].concat(Ge(e.order),[(0,i.Z)((0,i.Z)({},t.payload),{},{qty:1,totalPrice:t.payload.price})]);return(0,i.Z)((0,i.Z)({},e),{},{order:r,orderTotalPrice:e.orderTotalPrice+t.payload.price});case Ti:var a=e.order.filter((function(e){return e.id!==t.payload.id}));return(0,i.Z)((0,i.Z)({},e),{},{order:a});case Ii:var o=e.order.find((function(e){return e.id===t.payload.id})),u=!!o&&e.order.map((function(e){return e.id===t.payload.id?(0,i.Z)((0,i.Z)({},e),{},{qty:e.qty+1,totalPrice:e.totalPrice+e.price,totalGram:e.totalGram+e.gram}):e})),s=u.map((function(e){return e.totalPrice})),c=s.reduce((function(e,t){return e+t}));return(0,i.Z)((0,i.Z)({},e),{},{order:u,orderTotalPrice:c});case Si:var l=e.order.find((function(e){return e.id===t.payload.id})),f=!!l&&e.order.map((function(e){return e.id===t.payload.id?(0,i.Z)((0,i.Z)({},e),{},{qty:e.qty-1,totalPrice:e.totalPrice-e.price,totalGram:e.totalGram-e.gram}):e})),h=f.map((function(e){return e.totalPrice})),d=h.reduce((function(e,t){return e+t}));return(0,i.Z)((0,i.Z)({},e),{},{order:f,orderTotalPrice:d});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:la,t=arguments.length>1?arguments[1]:void 0;return t.type===oa?(0,i.Z)((0,i.Z)({},e),{},{login:t.payload.data,user:t.payload.user}):e}}),ba=n(5484),_a=(0,n(5792).default)(),xa=(0,ba.Uo)((0,ka.md)((function(e){return function(t){return function(n){var r=e.getState();return console.log(n,r),t(n)}}}),(function(e){return function(t){return function(n){var r=e.dispatch,i=e.getState;return"function"===typeof n?n(r,i):t(n)}}}),_a));function Ea(){Ea=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(S){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==qt(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}var Ia=n(7780);function Sa(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=qe(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Ta(e,t,n){return Ta=Ut()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&F(i,n.prototype),i},Ta.apply(null,arguments)}function Ca(e){var t="function"===typeof Map?new Map:void 0;return Ca=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ta(e,arguments,Lt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),F(n,e)},Ca(e)}var Na=!1,Pa=!1,Aa="${JSCORE_VERSION}",Ra=function(e,t){if(!e)throw Oa(t)},Oa=function(e){return new Error("Firebase Database ("+Aa+") INTERNAL ASSERT FAILED: "+e)},Da=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},La={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Da(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ma=function(e){var t=Da(e);return La.encodeByteArray(t,!0)},Fa=function(e){return Ma(e).replace(/\./g,"")},ja=function(e){try{return La.decodeString(e,!0)}catch(FU){console.error("base64Decode failed: ",FU)}return null};function Ua(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ua(e[n],t[n]));return e}var qa=function(){function e(){var t=this;Ze(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ye(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Va(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Fa(JSON.stringify({alg:"none",type:"JWT"})),Fa(JSON.stringify(a)),""].join(".")}function Ba(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function za(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ba())}function Wa(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(FU){return!1}}function Ka(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ha(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ga(){var e=Ba();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Za(){return!0===Na||!0===Pa}function Qa(){return"object"===typeof indexedDB}var Ya=function(e){jt(n,e);var t=zt(n);function n(e,r,i){var a;return Ze(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Vt(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Vt(a),$a.prototype.create),a}return Ye(n)}(Ca(Error)),$a=function(){function e(t,n,r){Ze(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ye(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Xa(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ya(n,a,t);return o}}]),e}();function Xa(e,t){return e.replace(Ja,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Ja=/\{\$([^}]+)}/g;function eo(e){return JSON.parse(e)}function to(e){return JSON.stringify(e)}var no=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=eo(ja(a[0])||""),n=eo(ja(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(FU){}return{header:t,claims:n,data:r,signature:i}};function ro(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function io(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ao(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function oo(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function uo(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(so(u)&&so(s)){if(!uo(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function so(e){return null!==e&&"object"===typeof e}function co(e){for(var t=[],n=function(){var e=Be(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function lo(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=Be(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function fo(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ho=function(){function e(){Ze(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return Ye(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function po(e,t){var n=new vo(e,t);return n.subscribe.bind(n)}var vo=function(){function e(t,n){var r=this;Ze(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ye(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Sa(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=yo),void 0===r.error&&(r.error=yo),void 0===r.complete&&(r.complete=yo);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(FU){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(FU){"undefined"!==typeof console&&console.error&&console.error(FU)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function yo(){}var mo=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function go(e,t){return"".concat(e," failed: ").concat(t," argument ")}function ko(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(go(e,t)+"must be a valid function.")}function wo(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(go(e,t)+"must be a valid context object.")}var bo=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function _o(e){return e&&e._delegate?e._delegate:e}function xo(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(VA){return void n(VA)}u.done?t(s):Promise.resolve(s).then(r,i)}function Eo(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){xo(a,r,i,o,u,"next",e)}function u(e){xo(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Io=function(){function e(t,n,r){Ze(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ye(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),So="[DEFAULT]",To=function(){function e(t,n){Ze(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ye(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new qa;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(FU){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(FU){if(r)return null;throw FU}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:So})}catch(FU){}var t,n=Sa(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Be(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(FU){}}}catch(s){n.e(s)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:So;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Eo(Ea().mark((function e(){var t;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Ge(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Ge(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:So;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:So;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Sa(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=Be(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Sa(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(cb){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===So?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(cb){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:So;return this.component?this.component.multipleInstances?e:So:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Co,No,Po=function(){function e(t){Ze(this,e),this.name=t,this.providers=new Map}return Ye(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new To(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ao=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(No||(No={}));var Ro={debug:No.DEBUG,verbose:No.VERBOSE,info:No.INFO,warn:No.WARN,error:No.ERROR,silent:No.SILENT},Oo=No.INFO,Do=(Co={},(0,N.Z)(Co,No.DEBUG,"log"),(0,N.Z)(Co,No.VERBOSE,"log"),(0,N.Z)(Co,No.INFO,"info"),(0,N.Z)(Co,No.WARN,"warn"),(0,N.Z)(Co,No.ERROR,"error"),Co),Lo=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Do[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Mo=function(){function e(t){Ze(this,e),this.name=t,this._logLevel=Oo,this._logHandler=Lo,this._userLogHandler=null,Ao.push(this)}return Ye(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in No))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ro[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,No.DEBUG].concat(t)),this._logHandler.apply(this,[this,No.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,No.VERBOSE].concat(t)),this._logHandler.apply(this,[this,No.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,No.INFO].concat(t)),this._logHandler.apply(this,[this,No.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,No.WARN].concat(t)),this._logHandler.apply(this,[this,No.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,No.ERROR].concat(t)),this._logHandler.apply(this,[this,No.ERROR].concat(t))}}]),e}();var Fo,jo;var Uo=new WeakMap,qo=new WeakMap,Vo=new WeakMap,Bo=new WeakMap,zo=new WeakMap;var Wo={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return qo.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Vo.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Go(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ko(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(jo||(jo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Zo(this),n),Go(Uo.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Go(e.apply(Zo(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Zo(this),t].concat(r));return Vo.set(a,t.sort?t.sort():[t]),Go(a)}}function Ho(e){return"function"===typeof e?Ko(e):(e instanceof IDBTransaction&&function(e){if(!qo.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));qo.set(e,t)}}(e),function(e,t){return t.some((function(t){return e instanceof t}))}(e,Fo||(Fo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Wo):e)}function Go(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Go(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Uo.set(t,e)})).catch((function(){})),zo.set(t,e),t}(e);if(Bo.has(e))return Bo.get(e);var t=Ho(e);return t!==e&&(Bo.set(e,t),zo.set(t,e)),t}var Zo=function(e){return zo.get(e)};var Qo,Yo,$o=["get","getKey","getAll","getAllKeys","count"],Xo=["put","add","delete","clear"],Jo=new Map;function eu(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Jo.get(t))return Jo.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Xo.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||$o.includes(n))){var a=function(){var e=Eo(Ea().mark((function e(t){var a,o,u,s,c,l,f=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Jo.set(t,a),a}}}Wo=function(e){return(0,i.Z)((0,i.Z)({},e),{},{get:function(t,n,r){return eu(t,n)||e.get(t,n,r)},has:function(t,n){return!!eu(t,n)||e.has(t,n)}})}(Wo);var tu=function(){function e(t){Ze(this,e),this.container=t}return Ye(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var nu="@firebase/app",ru="0.7.25",iu=new Mo("@firebase/app"),au="[DEFAULT]",ou=(Qo={},(0,N.Z)(Qo,nu,"fire-core"),(0,N.Z)(Qo,"@firebase/app-compat","fire-core-compat"),(0,N.Z)(Qo,"@firebase/analytics","fire-analytics"),(0,N.Z)(Qo,"@firebase/analytics-compat","fire-analytics-compat"),(0,N.Z)(Qo,"@firebase/app-check","fire-app-check"),(0,N.Z)(Qo,"@firebase/app-check-compat","fire-app-check-compat"),(0,N.Z)(Qo,"@firebase/auth","fire-auth"),(0,N.Z)(Qo,"@firebase/auth-compat","fire-auth-compat"),(0,N.Z)(Qo,"@firebase/database","fire-rtdb"),(0,N.Z)(Qo,"@firebase/database-compat","fire-rtdb-compat"),(0,N.Z)(Qo,"@firebase/functions","fire-fn"),(0,N.Z)(Qo,"@firebase/functions-compat","fire-fn-compat"),(0,N.Z)(Qo,"@firebase/installations","fire-iid"),(0,N.Z)(Qo,"@firebase/installations-compat","fire-iid-compat"),(0,N.Z)(Qo,"@firebase/messaging","fire-fcm"),(0,N.Z)(Qo,"@firebase/messaging-compat","fire-fcm-compat"),(0,N.Z)(Qo,"@firebase/performance","fire-perf"),(0,N.Z)(Qo,"@firebase/performance-compat","fire-perf-compat"),(0,N.Z)(Qo,"@firebase/remote-config","fire-rc"),(0,N.Z)(Qo,"@firebase/remote-config-compat","fire-rc-compat"),(0,N.Z)(Qo,"@firebase/storage","fire-gcs"),(0,N.Z)(Qo,"@firebase/storage-compat","fire-gcs-compat"),(0,N.Z)(Qo,"@firebase/firestore","fire-fst"),(0,N.Z)(Qo,"@firebase/firestore-compat","fire-fst-compat"),(0,N.Z)(Qo,"fire-js","fire-js"),(0,N.Z)(Qo,"firebase","fire-js-all"),Qo),uu=new Map,su=new Map;function cu(e,t){try{e.container.addComponent(t)}catch(FU){iu.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),FU)}}function lu(e,t){e.container.addOrOverwriteComponent(t)}function fu(e){var t=e.name;if(su.has(t))return iu.debug("There were multiple attempts to register component ".concat(t,".")),!1;su.set(t,e);var n,r=Sa(uu.values());try{for(r.s();!(n=r.n()).done;){cu(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function hu(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function du(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:au;hu(e,t).clearInstance(n)}function pu(){su.clear()}var vu=(Yo={},(0,N.Z)(Yo,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,N.Z)(Yo,"bad-app-name","Illegal App name: '{$appName}"),(0,N.Z)(Yo,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,N.Z)(Yo,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,N.Z)(Yo,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,N.Z)(Yo,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,N.Z)(Yo,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,N.Z)(Yo,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,N.Z)(Yo,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,N.Z)(Yo,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Yo),yu=new $a("app","Firebase",vu),mu=function(){function e(t,n,r){var i=this;Ze(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Io("app",(function(){return i}),"PUBLIC"))}return Ye(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw yu.create("app-deleted",{appName:this._name})}}]),e}(),gu="9.8.2";function ku(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:au,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw yu.create("bad-app-name",{appName:String(i)});var a=uu.get(i);if(a){if(uo(e,a.options)&&uo(r,a.config))return a;throw yu.create("duplicate-app",{appName:i})}var o,u=new Po(i),s=Sa(su.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new mu(e,r,u);return uu.set(i,l),l}function wu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:au,t=uu.get(e);if(!t)throw yu.create("no-app",{appName:e});return t}function bu(){return Array.from(uu.values())}function _u(e){return xu.apply(this,arguments)}function xu(){return(xu=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!uu.has(n)){e.next=6;break}return uu.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eu(e,t,n){var r,i=null!==(r=ou[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void iu.warn(u.join(" "))}fu(new Io("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Iu(e,t){if(null!==e&&"function"!==typeof e)throw yu.create("invalid-log-argument");!function(e,t){var n,r=Sa(Ao);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Ro[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:No[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Su(e){var t;t=e,Ao.forEach((function(e){e.setLogLevel(t)}))}var Tu="firebase-heartbeat-store",Cu=null;function Nu(){return Cu||(Cu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Go(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Go(u.result),e.oldVersion,e.newVersion,Go(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Tu)}}).catch((function(e){throw yu.create("storage-open",{originalErrorMessage:e.message})}))),Cu}function Pu(e){return Au.apply(this,arguments)}function Au(){return Au=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nu();case 3:return n=e.sent,e.abrupt("return",n.transaction(Tu).objectStore(Tu).get(Du(t)));case 7:throw e.prev=7,e.t0=e.catch(0),yu.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Au.apply(this,arguments)}function Ru(e,t){return Ou.apply(this,arguments)}function Ou(){return Ou=Eo(Ea().mark((function e(t,n){var r,i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nu();case 3:return r=e.sent,i=r.transaction(Tu,"readwrite"),a=i.objectStore(Tu),e.next=8,a.put(n,Du(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),yu.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Ou.apply(this,arguments)}function Du(e){return"".concat(e.name,"!").concat(e.options.appId)}var Lu=function(){function e(t){var n=this;Ze(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new qu(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Ye(e,[{key:"triggerHeartbeat",value:function(){var e=Eo(Ea().mark((function e(){var t,n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Mu(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Eo(Ea().mark((function e(){var t,n,r,i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Mu(),n=Fu(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Fa(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Mu(){return(new Date).toISOString().substring(0,10)}function Fu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Sa(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Vu(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Vu(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ju,Uu,qu=function(){function e(t){Ze(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Ye(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qa()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(VA){t(VA)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Eo(Ea().mark((function e(){var t;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Pu(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Eo(Ea().mark((function e(t){var n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ru(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Eo(Ea().mark((function e(t){var n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ru(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Ge(r.heartbeats),Ge(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Vu(e){return Fa(JSON.stringify({version:2,heartbeats:e})).length}ju="",fu(new Io("platform-logger",(function(e){return new tu(e)}),"PRIVATE")),fu(new Io("heartbeat",(function(e){return new Lu(e)}),"PRIVATE")),Eu(nu,ru,ju),Eu(nu,ru,"esm2017"),Eu("fire-js","");var Bu=function(){function e(t,n){var r=this;Ze(this,e),this._delegate=t,this.firebase=n,cu(t,new Io("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ye(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),_u(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:au;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:au;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){cu(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){lu(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),zu=(Uu={},(0,N.Z)(Uu,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,N.Z)(Uu,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Uu),Wu=new $a("app-compat","Firebase",zu);var Ku=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ku(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ro(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Eu,setLogLevel:Su,onLog:Iu,apps:null,SDK_VERSION:gu,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(fu(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Wu.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ua(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ro(n,e=e||au))throw Wu.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Bu);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ua(n,e)},createSubscribe:po,ErrorFactory:$a,deepExtend:Ua}),n}(),Hu=new Mo("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Hu.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Gu=self.firebase.SDK_VERSION;Gu&&Gu.indexOf("LITE")>=0&&Hu.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Zu=Ku;!function(e){Eu("@firebase/app-compat","0.1.26",e)}();Zu.registerVersion("firebase","9.8.2","app-compat");var Qu,Yu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},$u={},Xu=Xu||{},Ju=Yu||self;function es(){}function ts(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ns(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var rs="closure_uid_"+(1e9*Math.random()>>>0),is=0;function as(e,t,n){return e.call.apply(e.bind,arguments)}function os(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function us(e,t,n){return(us=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?as:os).apply(null,arguments)}function ss(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function cs(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function ls(){this.s=this.s,this.o=this.o}var fs={};ls.prototype.s=!1,ls.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,rs)&&e[rs]||(e[rs]=++is)}(this);delete fs[e]}},ls.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var hs=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},ds=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function ps(e){return Array.prototype.concat.apply([],arguments)}function vs(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ys(e){return/^[\s\xa0]*$/.test(e)}var ms,gs=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ks(e,t){return-1!=e.indexOf(t)}function ws(e,t){return e<t?-1:e>t?1:0}e:{var bs=Ju.navigator;if(bs){var _s=bs.userAgent;if(_s){ms=_s;break e}}ms=""}function xs(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Es(e){var t={};for(var n in e)t[n]=e[n];return t}var Is="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ss(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Is.length;a++)n=Is[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ts(e){return Ts[" "](e),e}Ts[" "]=es;var Cs,Ns=ks(ms,"Opera"),Ps=ks(ms,"Trident")||ks(ms,"MSIE"),As=ks(ms,"Edge"),Rs=As||Ps,Os=ks(ms,"Gecko")&&!(ks(ms.toLowerCase(),"webkit")&&!ks(ms,"Edge"))&&!(ks(ms,"Trident")||ks(ms,"MSIE"))&&!ks(ms,"Edge"),Ds=ks(ms.toLowerCase(),"webkit")&&!ks(ms,"Edge");function Ls(){var e=Ju.document;return e?e.documentMode:void 0}e:{var Ms="",Fs=function(){var e=ms;return Os?/rv:([^\);]+)(\)|;)/.exec(e):As?/Edge\/([\d\.]+)/.exec(e):Ps?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ds?/WebKit\/(\S+)/.exec(e):Ns?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Fs&&(Ms=Fs?Fs[1]:""),Ps){var js=Ls();if(null!=js&&js>parseFloat(Ms)){Cs=String(js);break e}}Cs=Ms}var Us,qs={};function Vs(){return function(e){var t=qs;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=gs(String(Cs)).split("."),n=gs("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=ws(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||ws(0==a[2].length,0==o[2].length)||ws(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Ju.document&&Ps){var Bs=Ls();Us=Bs||(parseInt(Cs,10)||void 0)}else Us=void 0;var zs=Us,Ws=function(){if(!Ju.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ju.addEventListener("test",es,t),Ju.removeEventListener("test",es,t)}catch(n){}return e}();function Ks(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Hs(e,t){if(Ks.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Os){e:{try{Ts(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Gs[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Hs.Z.h.call(this)}}Ks.prototype.h=function(){this.defaultPrevented=!0},cs(Hs,Ks);var Gs={2:"touch",3:"pen",4:"mouse"};Hs.prototype.h=function(){Hs.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Zs="closure_listenable_"+(1e6*Math.random()|0),Qs=0;function Ys(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Qs,this.ca=this.fa=!1}function $s(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Xs(e){this.src=e,this.g={},this.h=0}function Js(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=hs(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&($s(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ec(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Xs.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ec(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Ys(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var tc="closure_lm_"+(1e6*Math.random()|0),nc={};function rc(e,t,n,r,i){if(r&&r.once)return ac(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)rc(e,t[a],n,r,i);return null}return n=hc(n),e&&e[Zs]?e.N(t,n,ns(r)?!!r.capture:!!r,i):ic(e,t,n,!1,r,i)}function ic(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=ns(i)?!!i.capture:!!i,u=lc(e);if(u||(e[tc]=u=new Xs(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=cc;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ws||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(sc(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ac(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ac(e,t[a],n,r,i);return null}return n=hc(n),e&&e[Zs]?e.O(t,n,ns(r)?!!r.capture:!!r,i):ic(e,t,n,!0,r,i)}function oc(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)oc(e,t[a],n,r,i);else r=ns(r)?!!r.capture:!!r,n=hc(n),e&&e[Zs]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ec(a=e.g[t],n,r,i))&&($s(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=lc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ec(t,n,r,i)),(n=-1<e?t[e]:null)&&uc(n))}function uc(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Zs])Js(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(sc(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=lc(t))?(Js(n,e),0==n.h&&(n.src=null,t[tc]=null)):$s(e)}}}function sc(e){return e in nc?nc[e]:nc[e]="on"+e}function cc(e,t){if(e.ca)e=!0;else{t=new Hs(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&uc(e),e=n.call(r,t)}return e}function lc(e){return(e=e[tc])instanceof Xs?e:null}var fc="__closure_events_fn_"+(1e9*Math.random()>>>0);function hc(e){return"function"===typeof e?e:(e[fc]||(e[fc]=function(t){return e.handleEvent(t)}),e[fc])}function dc(){ls.call(this),this.i=new Xs(this),this.P=this,this.I=null}function pc(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Ks(t,e);else if(t instanceof Ks)t.target=t.target||e;else{var i=t;Ss(t=new Ks(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=vc(o,r,!0,t)&&i}if(i=vc(o=t.g=e,r,!0,t)&&i,i=vc(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=vc(o=t.g=n[a],r,!1,t)&&i}function vc(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Js(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}cs(dc,ls),dc.prototype[Zs]=!0,dc.prototype.removeEventListener=function(e,t,n,r){oc(this,e,t,n,r)},dc.prototype.M=function(){if(dc.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$s(n[r]);delete t.g[e],t.h--}}this.I=null},dc.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},dc.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var yc=Ju.JSON.stringify;function mc(){var e=Ic,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var gc,kc=function(){function e(){Ze(this,e),this.h=this.g=null}return Ye(e,[{key:"add",value:function(e,t){var n=wc.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),wc=new(function(){function e(t,n){Ze(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ye(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new bc}),(function(e){return e.reset()})),bc=function(){function e(){Ze(this,e),this.next=this.g=this.h=null}return Ye(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function _c(e){Ju.setTimeout((function(){throw e}),0)}function xc(e,t){gc||function(){var e=Ju.Promise.resolve(void 0);gc=function(){e.then(Sc)}}(),Ec||(gc(),Ec=!0),Ic.add(e,t)}var Ec=!1,Ic=new kc;function Sc(){for(var e;e=mc();){try{e.h.call(e.g)}catch(n){_c(n)}var t=wc;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ec=!1}function Tc(e,t){dc.call(this),this.h=e||1,this.g=t||Ju,this.j=us(this.kb,this),this.l=Date.now()}function Cc(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Nc(e,t,n){if("function"===typeof e)n&&(e=us(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=us(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ju.setTimeout(e,t||0)}function Pc(e){e.g=Nc((function(){e.g=null,e.i&&(e.i=!1,Pc(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}cs(Tc,dc),(Qu=Tc.prototype).da=!1,Qu.S=null,Qu.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),pc(this,"tick"),this.da&&(Cc(this),this.start()))}},Qu.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qu.M=function(){Tc.Z.M.call(this),Cc(this),delete this.g};var Ac=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ye(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Pc(this)}},{key:"M",value:function(){Ft(Lt(n.prototype),"M",this).call(this),this.g&&(Ju.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(ls);function Rc(e){ls.call(this),this.h=e,this.g={}}cs(Rc,ls);var Oc=[];function Dc(e,t,n,r){Array.isArray(n)||(n&&(Oc[0]=n.toString()),n=Oc);for(var i=0;i<n.length;i++){var a=rc(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Lc(e){xs(e.g,(function(e,t){this.g.hasOwnProperty(t)&&uc(e)}),e),e.g={}}function Mc(){this.g=!0}function Fc(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return yc(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Rc.prototype.M=function(){Rc.Z.M.call(this),Lc(this)},Rc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mc.prototype.Aa=function(){this.g=!1},Mc.prototype.info=function(){};var jc={},Uc=null;function qc(){return Uc=Uc||new dc}function Vc(e){Ks.call(this,jc.Ma,e)}function Bc(e){var t=qc();pc(t,new Vc(t,e))}function zc(e,t){Ks.call(this,jc.STAT_EVENT,e),this.stat=t}function Wc(e){var t=qc();pc(t,new zc(t,e))}function Kc(e,t){Ks.call(this,jc.Na,e),this.size=t}function Hc(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ju.setTimeout((function(){e()}),t)}jc.Ma="serverreachability",cs(Vc,Ks),jc.STAT_EVENT="statevent",cs(zc,Ks),jc.Na="timingevent",cs(Kc,Ks);var Gc={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Zc={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Qc(){}function Yc(e){return e.h||(e.h=e.i())}function $c(){}Qc.prototype.h=null;var Xc,Jc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function el(){Ks.call(this,"d")}function tl(){Ks.call(this,"c")}function nl(){}function rl(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Rc(this),this.P=al,e=Rs?125:void 0,this.W=new Tc(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new il}function il(){this.i=null,this.g="",this.h=!1}cs(el,Ks),cs(tl,Ks),cs(nl,Qc),nl.prototype.g=function(){return new XMLHttpRequest},nl.prototype.i=function(){return{}},Xc=new nl;var al=45e3,ol={},ul={};function sl(e,t,n){e.K=1,e.v=Al(Il(t)),e.s=n,e.U=!0,cl(e,null)}function cl(e,t){e.F=Date.now(),dl(e),e.A=Il(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Wl(n.h,"t",r),e.C=0,n=e.l.H,e.h=new il,e.g=Gf(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ac(us(e.Ia,e,e.g),e.O)),Dc(e.V,e.g,"readystatechange",e.gb),t=e.H?Es(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Bc(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function ll(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function fl(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=hl(e,n))==ul){4==t&&(e.o=4,Wc(14),i=!1),Fc(e.j,e.m,null,"[Incomplete Response]");break}if(r==ol){e.o=4,Wc(15),Fc(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Fc(e.j,e.m,r,null),gl(e,r)}ll(e)&&r!=ul&&r!=ol&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Wc(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Uf(t),t.L=!0,Wc(11))):(Fc(e.j,e.m,n,"[Invalid Chunked Response]"),ml(e),yl(e))}function hl(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ul:(n=Number(t.substring(n,r)),isNaN(n)?ol:(r+=1)+n>t.length?ul:(t=t.substr(r,n),e.C=r+n,t))}function dl(e){e.Y=Date.now()+e.P,pl(e,e.P)}function pl(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Hc(us(e.eb,e),t)}function vl(e){e.B&&(Ju.clearTimeout(e.B),e.B=null)}function yl(e){0==e.l.G||e.I||Bf(e.l,e)}function ml(e){vl(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Cc(e.W),Lc(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function gl(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Xl(n.i,e)))if(n.I=e.N,!e.J&&Xl(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Vf(n),Pf(n)}jf(n),Wc(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Hc(us(n.ab,n),6e3));if(1>=$l(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Wf(n,11)}else if((e.J||n.g==e)&&Vf(n),!ys(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(ks(l,"spdy")||ks(l,"quic")||ks(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Jl(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Pl(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Hf(r,r.H?r.la:null,r.W),d.J){ef(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(vl(p),dl(p)),r.g=d}else Ff(r);0<n.l.length&&Of(n)}else"stop"!=a[0]&&"close"!=a[0]||Wf(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Wf(n,7):Nf(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Bc(4)}catch(a){}}function kl(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ts(e)||"string"===typeof e)ds(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(ts(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(ts(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function wl(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof wl)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function bl(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];_l(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)_l(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function _l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Qu=rl.prototype).setTimeout=function(e){this.P=e},Qu.gb=function(e){e=e.target;var t=this.L;t&&3==Ef(e)?t.l():this.Ia(e)},Qu.Ia=function(e){try{if(e==this.g)e:{var t=Ef(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Rs||this.g&&(this.h.h||this.g.ga()||If(this.g)))){this.I||4!=t||7==n||Bc(8==n||0>=r?3:2),vl(this);var i=this.g.ba();this.N=i;t:if(ll(this)){var a=If(this.g);e="";var o=a.length,u=4==Ef(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ml(this),yl(this);var s="";break t}this.h.i=new Ju.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ys(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Wc(12),ml(this),yl(this);break e}Fc(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gl(this,i)}this.U?(fl(this,t,s),Rs&&this.i&&3==t&&(Dc(this.V,this.W,"tick",this.fb),this.W.start())):(Fc(this.j,this.m,s,null),gl(this,s)),4==t&&ml(this),this.i&&!this.I&&(4==t?Bf(this.l,this):(this.i=!1,dl(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Wc(12)):(this.o=0,Wc(13)),ml(this),yl(this)}}}catch(t){}},Qu.fb=function(){if(this.g){var e=Ef(this.g),t=this.g.ga();this.C<t.length&&(vl(this),fl(this,e,t),this.i&&4!=e&&dl(this))}},Qu.cancel=function(){this.I=!0,ml(this)},Qu.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Bc(3),Wc(17)),ml(this),this.o=2,yl(this)):pl(this,this.Y-e)},(Qu=wl.prototype).R=function(){bl(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Qu.T=function(){return bl(this),this.g.concat()},Qu.get=function(e,t){return _l(this.h,e)?this.h[e]:t},Qu.set=function(e,t){_l(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Qu.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var xl=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function El(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof El){this.g=void 0!==t?t:e.g,Sl(this,e.j),this.s=e.s,Tl(this,e.i),Cl(this,e.m),this.l=e.l,t=e.h;var n=new ql;n.i=t.i,t.g&&(n.g=new wl(t.g),n.h=t.h),Nl(this,n),this.o=e.o}else e&&(n=String(e).match(xl))?(this.g=!!t,Sl(this,n[1]||"",!0),this.s=Rl(n[2]||""),Tl(this,n[3]||"",!0),Cl(this,n[4]),this.l=Rl(n[5]||"",!0),Nl(this,n[6]||"",!0),this.o=Rl(n[7]||"")):(this.g=!!t,this.h=new ql(null,this.g))}function Il(e){return new El(e)}function Sl(e,t,n){e.j=n?Rl(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Tl(e,t,n){e.i=n?Rl(t,!0):t}function Cl(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Nl(e,t,n){t instanceof ql?(e.h=t,function(e,t){t&&!e.j&&(Vl(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Bl(this,t),Wl(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ol(t,jl)),e.h=new ql(t,e.g))}function Pl(e,t,n){e.h.set(t,n)}function Al(e){return Pl(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Rl(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ol(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Dl),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Dl(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}El.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ol(t,Ll,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ol(t,Ll,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ol(n,"/"==n.charAt(0)?Fl:Ml,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ol(n,Ul)),e.join("")};var Ll=/[#\/\?@]/g,Ml=/[#\?:]/g,Fl=/[#\?]/g,jl=/[#\?@]/g,Ul=/#/g;function ql(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Vl(e){e.g||(e.g=new wl,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Bl(e,t){Vl(e),t=Kl(e,t),_l(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,_l((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&bl(e)))}function zl(e,t){return Vl(e),t=Kl(e,t),_l(e.g.h,t)}function Wl(e,t,n){Bl(e,t),0<n.length&&(e.i=null,e.g.set(Kl(e,t),vs(n)),e.h+=n.length)}function Kl(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Qu=ql.prototype).add=function(e,t){Vl(this),this.i=null,e=Kl(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Qu.forEach=function(e,t){Vl(this),this.g.forEach((function(n,r){ds(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Qu.T=function(){Vl(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Qu.R=function(e){Vl(this);var t=[];if("string"===typeof e)zl(this,e)&&(t=ps(t,this.g.get(Kl(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ps(t,e[n])}return t},Qu.set=function(e,t){return Vl(this),this.i=null,zl(this,e=Kl(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Qu.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Qu.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Hl=Ye((function e(t,n){Ze(this,e),this.h=t,this.g=n}));function Gl(e){this.l=e||Ql,Ju.PerformanceNavigationTiming?e=0<(e=Ju.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ju.g&&Ju.g.Ea&&Ju.g.Ea()&&Ju.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Zl,Ql=10;function Yl(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $l(e){return e.h?1:e.g?e.g.size:0}function Xl(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Jl(e,t){e.g?e.g.add(t):e.h=t}function ef(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function tf(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Sa(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return vs(e.i)}function nf(){}function rf(){this.g=new nf}function af(e,t,n){var r=n||"";try{kl(e,(function(e,n){var i=e;ns(e)&&(i=yc(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(FU){throw t.push(r+"type="+encodeURIComponent("_badmap")),FU}}function of(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function uf(e){this.l=e.$b||null,this.j=e.ib||!1}function sf(e,t){dc.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=cf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gl.prototype.cancel=function(){if(this.i=tf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Sa(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},nf.prototype.stringify=function(e){return Ju.JSON.stringify(e,void 0)},nf.prototype.parse=function(e){return Ju.JSON.parse(e,void 0)},cs(uf,Qc),uf.prototype.g=function(){return new sf(this.l,this.j)},uf.prototype.i=(Zl={},function(){return Zl}),cs(sf,dc);var cf=0;function lf(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function ff(e){e.readyState=4,e.l=null,e.j=null,e.A=null,hf(e)}function hf(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Qu=sf.prototype).open=function(e,t){if(this.readyState!=cf)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,hf(this)},Qu.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ju).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Qu.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ff(this)),this.readyState=cf},Qu.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,hf(this)),this.g&&(this.readyState=3,hf(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Ju.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lf(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Qu.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ff(this):hf(this),3==this.readyState&&lf(this)}},Qu.Ua=function(e){this.g&&(this.response=this.responseText=e,ff(this))},Qu.Ta=function(e){this.g&&(this.response=e,ff(this))},Qu.ha=function(){this.g&&ff(this)},Qu.setRequestHeader=function(e,t){this.v.append(e,t)},Qu.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Qu.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(sf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var df=Ju.JSON.parse;function pf(e){dc.call(this),this.headers=new wl,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=vf,this.K=this.L=!1}cs(pf,dc);var vf="",yf=/^https?$/i,mf=["POST","PUT"];function gf(e){return"content-type"==e.toLowerCase()}function kf(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,wf(e),_f(e)}function wf(e){e.D||(e.D=!0,pc(e,"complete"),pc(e,"error"))}function bf(e){if(e.h&&"undefined"!=typeof Xu&&(!e.C[1]||4!=Ef(e)||2!=e.ba()))if(e.v&&4==Ef(e))Nc(e.Fa,0,e);else if(pc(e,"readystatechange"),4==Ef(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(xl)[1]||null;if(!a&&Ju.self&&Ju.self.location){var o=Ju.self.location.protocol;a=o.substr(0,o.length-1)}i=!yf.test(a?a.toLowerCase():"")}t=i}if(t)pc(e,"complete"),pc(e,"success");else{e.m=6;try{var u=2<Ef(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",wf(e)}}finally{_f(e)}}}function _f(e,t){if(e.g){xf(e);var n=e.g,r=e.C[0]?es:null;e.g=null,e.C=null,t||pc(e,"ready");try{n.onreadystatechange=r}catch(FU){}}}function xf(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ju.clearTimeout(e.A),e.A=null)}function Ef(e){return e.g?e.g.readyState:0}function If(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case vf:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Sf(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return xs(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Pl(e,t,n))}function Tf(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Cf(e){this.za=0,this.l=[],this.h=new Mc,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Tf("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Tf("baseRetryDelayMs",5e3,e),this.$a=Tf("retryDelaySeedMs",1e4,e),this.Ya=Tf("forwardChannelMaxRetries",2,e),this.ra=Tf("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Gl(e&&e.concurrentRequestLimit),this.Ca=new rf,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Nf(e){if(Af(e),3==e.G){var t=e.V++,n=Il(e.F);Pl(n,"SID",e.J),Pl(n,"RID",t),Pl(n,"TYPE","terminate"),Lf(e,n),(t=new rl(e,e.h,t,void 0)).K=2,t.v=Al(Il(n)),n=!1,Ju.navigator&&Ju.navigator.sendBeacon&&(n=Ju.navigator.sendBeacon(t.v.toString(),"")),!n&&Ju.Image&&((new Image).src=t.v,n=!0),n||(t.g=Gf(t.l,null),t.g.ea(t.v)),t.F=Date.now(),dl(t)}Kf(e)}function Pf(e){e.g&&(Uf(e),e.g.cancel(),e.g=null)}function Af(e){Pf(e),e.u&&(Ju.clearTimeout(e.u),e.u=null),Vf(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ju.clearTimeout(e.m),e.m=null)}function Rf(e,t){e.l.push(new Hl(e.Za++,t)),3==e.G&&Of(e)}function Of(e){Yl(e.i)||e.m||(e.m=!0,xc(e.Ha,e),e.C=0)}function Df(e,t){var n;n=t?t.m:e.V++;var r=Il(e.F);Pl(r,"SID",e.J),Pl(r,"RID",n),Pl(r,"AID",e.U),Lf(e,r),e.o&&e.s&&Sf(r,e.o,e.s),n=new rl(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Mf(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Jl(e.i,n),sl(n,r,t)}function Lf(e,t){e.j&&kl({},(function(e,n){Pl(t,n,e)}))}function Mf(e,t,n){n=Math.min(e.l.length,n);var r=e.j?us(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{af(l,o,"req"+c+"_")}catch(bh){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Ff(e){e.g||e.u||(e.Y=1,xc(e.Ga,e),e.A=0)}function jf(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Hc(us(e.Ga,e),zf(e,e.A)),e.A++,!0)}function Uf(e){null!=e.B&&(Ju.clearTimeout(e.B),e.B=null)}function qf(e){e.g=new rl(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Il(e.oa);Pl(t,"RID","rpc"),Pl(t,"SID",e.J),Pl(t,"CI",e.N?"0":"1"),Pl(t,"AID",e.U),Lf(e,t),Pl(t,"TYPE","xmlhttp"),e.o&&e.s&&Sf(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Al(Il(t)),n.s=null,n.U=!0,cl(n,e)}function Vf(e){null!=e.v&&(Ju.clearTimeout(e.v),e.v=null)}function Bf(e,t){var n=null;if(e.g==t){Vf(e),Uf(e),e.g=null;var r=2}else{if(!Xl(e.i,t))return;n=t.D,ef(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;pc(r=qc(),new Kc(r,n,t,i)),Of(e)}else Ff(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!($l(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Hc(us(e.Ha,e,t),zf(e,e.C)),e.C++,!0))}(e,t)||2==r&&jf(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Wf(e,5);break;case 4:Wf(e,10);break;case 3:Wf(e,6);break;default:Wf(e,2)}}function zf(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Wf(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=us(e.jb,e);n||(n=new El("//www.google.com/images/cleardot.gif"),Ju.location&&"http"==Ju.location.protocol||Sl(n,"https"),Al(n)),function(e,t){var n=new Mc;if(Ju.Image){var r=new Image;r.onload=ss(of,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ss(of,n,r,"TestLoadImage: error",!1,t),r.onabort=ss(of,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ss(of,n,r,"TestLoadImage: timeout",!1,t),Ju.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Wc(2);e.G=0,e.j&&e.j.va(t),Kf(e),Af(e)}function Kf(e){e.G=0,e.I=-1,e.j&&(0==tf(e.i).length&&0==e.l.length||(e.i.i.length=0,vs(e.l),e.l.length=0),e.j.ua())}function Hf(e,t,n){var r=function(e){return e instanceof El?Il(e):new El(e,void 0)}(n);if(""!=r.i)t&&Tl(r,t+"."+r.i),Cl(r,r.m);else{var i=Ju.location;r=function(e,t,n,r){var i=new El(null,void 0);return e&&Sl(i,e),t&&Tl(i,t),n&&Cl(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&xs(e.aa,(function(e,t){Pl(r,t,e)})),t=e.D,n=e.sa,t&&n&&Pl(r,t,n),Pl(r,"VER",e.ma),Lf(e,r),r}function Gf(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new pf(new uf({ib:!0})):new pf(e.qa)).L=e.H,t}function Zf(){}function Qf(){if(Ps&&!(10<=Number(zs)))throw Error("Environmental error: no available transport.")}function Yf(e,t){dc.call(this),this.g=new Cf(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ys(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ys(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Jf(this)}function $f(e){el.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Xf(){tl.call(this),this.status=1}function Jf(e){this.g=e}(Qu=pf.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Xc.g(),this.C=this.u?Yc(this.u):Yc(Xc),this.g.onreadystatechange=us(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void kf(this,a)}e=n||"";var i=new wl(this.headers);r&&kl(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=gf,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Ju.FormData&&e instanceof Ju.FormData,!(0<=hs(mf,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xf(this),0<this.B&&((this.K=function(e){return Ps&&Vs()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=us(this.pa,this)):this.A=Nc(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){kf(this,a)}},Qu.pa=function(){"undefined"!=typeof Xu&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pc(this,"timeout"),this.abort(8))},Qu.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,pc(this,"complete"),pc(this,"abort"),_f(this))},Qu.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_f(this,!0)),pf.Z.M.call(this)},Qu.Fa=function(){this.s||(this.F||this.v||this.l?bf(this):this.cb())},Qu.cb=function(){bf(this)},Qu.ba=function(){try{return 2<Ef(this)?this.g.status:-1}catch(Zl){return-1}},Qu.ga=function(){try{return this.g?this.g.responseText:""}catch(Zl){return""}},Qu.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),df(t)}},Qu.Da=function(){return this.m},Qu.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Qu=Cf.prototype).ma=8,Qu.G=1,Qu.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Qu.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new rl(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Ss(n=Es(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Mf(this,t,r),Pl(i=Il(this.F),"RID",e),Pl(i,"CVER",22),this.D&&Pl(i,"X-HTTP-Session-Id",this.D),Lf(this,i),this.o&&n&&Sf(i,this.o,n),Jl(this.i,t),this.Ra&&Pl(i,"TYPE","init"),this.ja?(Pl(i,"$req",r),Pl(i,"SID","null"),t.$=!0,sl(t,i,null)):sl(t,i,r),this.G=2}}else 3==this.G&&(e?Df(this,e):0==this.l.length||Yl(this.i)||Df(this))},Qu.Ga=function(){if(this.u=null,qf(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Hc(us(this.bb,this),e)}},Qu.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Wc(10),Pf(this),qf(this))},Qu.ab=function(){null!=this.v&&(this.v=null,Pf(this),jf(this),Wc(19))},Qu.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Wc(2)):(this.h.info("Failed to ping google.com"),Wc(1))},(Qu=Zf.prototype).xa=function(){},Qu.wa=function(){},Qu.va=function(){},Qu.ua=function(){},Qu.Oa=function(){},Qf.prototype.g=function(e,t){return new Yf(e,t)},cs(Yf,dc),Yf.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),xc(us(e.hb,e,t))),Wc(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Hf(e,null,e.W),Of(e)},Yf.prototype.close=function(){Nf(this.g)},Yf.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Rf(this.g,t)}else this.v?((t={}).__data__=yc(e),Rf(this.g,t)):Rf(this.g,e)},Yf.prototype.M=function(){this.g.j=null,delete this.j,Nf(this.g),delete this.g,Yf.Z.M.call(this)},cs($f,el),cs(Xf,tl),cs(Jf,Zf),Jf.prototype.xa=function(){pc(this.g,"a")},Jf.prototype.wa=function(e){pc(this.g,new $f(e))},Jf.prototype.va=function(e){pc(this.g,new Xf(e))},Jf.prototype.ua=function(){pc(this.g,"b")},Qf.prototype.createWebChannel=Qf.prototype.g,Yf.prototype.send=Yf.prototype.u,Yf.prototype.open=Yf.prototype.m,Yf.prototype.close=Yf.prototype.close,Gc.NO_ERROR=0,Gc.TIMEOUT=8,Gc.HTTP_ERROR=6,Zc.COMPLETE="complete",$c.EventType=Jc,Jc.OPEN="a",Jc.CLOSE="b",Jc.ERROR="c",Jc.MESSAGE="d",dc.prototype.listen=dc.prototype.N,pf.prototype.listenOnce=pf.prototype.O,pf.prototype.getLastError=pf.prototype.La,pf.prototype.getLastErrorCode=pf.prototype.Da,pf.prototype.getStatus=pf.prototype.ba,pf.prototype.getResponseJson=pf.prototype.Qa,pf.prototype.getResponseText=pf.prototype.ga,pf.prototype.send=pf.prototype.ea;var eh=$u.createWebChannelTransport=function(){return new Qf},th=$u.getStatEventTarget=function(){return qc()},nh=$u.ErrorCode=Gc,rh=$u.EventType=Zc,ih=$u.Event=jc,ah=$u.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},oh=$u.FetchXmlHttpFactory=uf,uh=$u.WebChannel=$c,sh=$u.XhrIo=pf,ch="@firebase/firestore",lh=function(){function e(t){Ze(this,e),this.uid=t}return Ye(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();lh.UNAUTHENTICATED=new lh(null),lh.GOOGLE_CREDENTIALS=new lh("google-credentials-uid"),lh.FIRST_PARTY=new lh("first-party-uid"),lh.MOCK_USER=new lh("mock-user");var fh="9.8.0",hh=new Mo("@firebase/firestore");function dh(){return hh.logLevel}function ph(e){if(hh.logLevel<=No.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(mh);hh.debug.apply(hh,["Firestore (".concat(fh,"): ").concat(e)].concat(Ge(i)))}}function vh(e){if(hh.logLevel<=No.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(mh);hh.error.apply(hh,["Firestore (".concat(fh,"): ").concat(e)].concat(Ge(i)))}}function yh(e){if(hh.logLevel<=No.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(mh);hh.warn.apply(hh,["Firestore (".concat(fh,"): ").concat(e)].concat(Ge(i)))}}function mh(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function gh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(fh,") INTERNAL ASSERTION FAILED: ")+e;throw vh(t),new Error(t)}function kh(e,t){e||gh()}function wh(e,t){return e}var bh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_h=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ye(n)}(Ya),xh=Ye((function e(){var t=this;Ze(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Eh=Ye((function e(t,n){Ze(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Ih=function(){function e(){Ze(this,e)}return Ye(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(lh.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Sh=function(){function e(t){Ze(this,e),this.token=t,this.changeListener=null}return Ye(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Th=function(){function e(t){Ze(this,e),this.t=t,this.currentUser=lh.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ye(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new xh;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new xh,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){ph("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(ph("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new xh)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ph("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(kh("string"==typeof n.accessToken),new Eh(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return kh(null===e||"string"==typeof e),new lh(e)}}]),e}(),Ch=Ye((function e(t,n,r){Ze(this,e),this.type="FirstParty",this.user=lh.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Nh=function(){function e(t,n,r){Ze(this,e),this.h=t,this.l=n,this.m=r}return Ye(e,[{key:"getToken",value:function(){return Promise.resolve(new Ch(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(lh.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ph=Ye((function e(t){Ze(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ah=function(){function e(t){Ze(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return Ye(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ph("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,ph("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ph("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):ph("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(kh("string"==typeof t.token),e.p=t.token,new Ph(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Rh=function(){function e(t,n){var r=this;Ze(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return Ye(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Oh(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Rh.A=-1;var Dh=function(){function e(){Ze(this,e)}return Ye(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Oh(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Lh(e,t){return e<t?-1:e>t?1:0}function Mh(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Fh(e){return e+"\0"}var jh=function(){function e(t,n){if(Ze(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new _h(bh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _h(bh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new _h(bh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _h(bh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ye(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Lh(this.nanoseconds,e.nanoseconds):Lh(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Uh=function(){function e(t){Ze(this,e),this.timestamp=t}return Ye(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new jh(0,0))}},{key:"max",value:function(){return new e(new jh(253402300799,999999999))}}]),e}();function qh(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vh(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Bh(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var zh=function(){function e(t,n,r){Ze(this,e),void 0===n?n=0:n>t.length&&gh(),void 0===r?r=t.length-n:r>t.length-n&&gh(),this.segments=t,this.offset=n,this.len=r}return Ye(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Wh=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new _h(bh.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Ge(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(zh),Kh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Hh=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Kh.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new _h(bh.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new _h(bh.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new _h(bh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new _h(bh.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(zh),Gh=function(){function e(t){Ze(this,e),this.fields=t,t.sort(Hh.comparator)}return Ye(e,[{key:"covers",value:function(e){var t,n=Sa(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Mh(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Zh=function(e){function t(e){Ze(this,t),this.binaryString=e}return Ye(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Lh(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Zh.EMPTY_BYTE_STRING=new Zh("");var Qh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yh(e){if(kh(!!e),"string"==typeof e){var t=0,n=Qh.exec(e);if(kh(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:$h(e.seconds),nanos:$h(e.nanos)}}function $h(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xh(e){return"string"==typeof e?Zh.fromBase64String(e):Zh.fromUint8Array(e)}function Jh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ed(e){var t=e.mapValue.fields.__previous_value__;return Jh(t)?ed(t):t}function td(e){var t=Yh(e.mapValue.fields.__local_write_time__.timestampValue);return new jh(t.seconds,t.nanos)}var nd=Ye((function e(t,n,r,i,a,o,u,s){Ze(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),rd=function(){function e(t,n){Ze(this,e),this.projectId=t,this.database=n||"(default)"}return Ye(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function id(e){return null==e}function ad(e){return 0===e&&1/e==-1/0}function od(e){return"number"==typeof e&&Number.isInteger(e)&&!ad(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var ud=function(){function e(t){Ze(this,e),this.path=t}return Ye(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Wh.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Wh.fromString(t))}},{key:"fromName",value:function(t){return new e(Wh.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Wh.emptyPath())}},{key:"comparator",value:function(e,t){return Wh.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Wh(t.slice()))}}]),e}(),sd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cd={nullValue:"NULL_VALUE"};function ld(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Jh(e)?4:Ed(e)?9007199254740991:10:gh()}function fd(e,t){if(e===t)return!0;var n=ld(e);if(n!==ld(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return td(e).isEqual(td(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Yh(e.timestampValue),r=Yh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Xh(e.bytesValue).isEqual(Xh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return $h(e.geoPointValue.latitude)===$h(t.geoPointValue.latitude)&&$h(e.geoPointValue.longitude)===$h(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return $h(e.integerValue)===$h(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=$h(e.doubleValue),r=$h(t.doubleValue);return n===r?ad(n)===ad(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Mh(e.arrayValue.values||[],t.arrayValue.values||[],fd);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(qh(n)!==qh(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!fd(n[i],r[i])))return!1;return!0}(e,t);default:return gh()}}function hd(e,t){return void 0!==(e.values||[]).find((function(e){return fd(e,t)}))}function dd(e,t){if(e===t)return 0;var n=ld(e),r=ld(t);if(n!==r)return Lh(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Lh(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=$h(e.integerValue||e.doubleValue),r=$h(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return pd(e.timestampValue,t.timestampValue);case 4:return pd(td(e),td(t));case 5:return Lh(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Xh(e),r=Xh(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Lh(n[i],r[i]);if(0!==a)return a}return Lh(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Lh($h(e.latitude),$h(t.latitude));return 0!==n?n:Lh($h(e.longitude),$h(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=dd(n[i],r[i]);if(a)return a}return Lh(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===sd.mapValue&&t===sd.mapValue)return 0;if(e===sd.mapValue)return 1;if(t===sd.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Lh(r[o],a[o]);if(0!==u)return u;var s=dd(n[r[o]],i[a[o]]);if(0!==s)return s}return Lh(r.length,a.length)}(e.mapValue,t.mapValue);default:throw gh()}}function pd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Lh(e,t);var n=Yh(e),r=Yh(t),i=Lh(n.seconds,r.seconds);return 0!==i?i:Lh(n.nanos,r.nanos)}function vd(e){return yd(e)}function yd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Yh(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Xh(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ud.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Sa(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=yd(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Sa(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(yd(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):gh();var t,n}function md(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function gd(e){return!!e&&"integerValue"in e}function kd(e){return!!e&&"arrayValue"in e}function wd(e){return!!e&&"nullValue"in e}function bd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function _d(e){return!!e&&"mapValue"in e}function xd(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Vh(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=xd(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=xd(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Ed(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Id(e){return"nullValue"in e?cd:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?md(rd.empty(),ud.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:gh()}function Sd(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?md(rd.empty(),ud.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?sd:gh()}function Td(e,t){var n=dd(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Cd(e,t){var n=dd(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Nd=function(){function e(t){Ze(this,e),this.value=t}return Ye(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!_d(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xd(t)}},{key:"setAll",value:function(e){var t=this,n=Hh.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=xd(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());_d(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return fd(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];_d(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Vh(t,(function(t,n){return e[t]=n}));var r,i=Sa(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(xd(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Pd(e){var t=[];return Vh(e.fields,(function(e,n){var r=new Hh([e]);if(_d(n)){var i=Pd(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Sa(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Gh(t)}var Ad=function(){function e(t,n,r,i,a,o){Ze(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Ye(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Nd.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Nd.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Uh.min(),Uh.min(),Nd.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Uh.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Uh.min(),Nd.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Uh.min(),Nd.empty(),2)}}]),e}(),Rd=Ye((function e(t,n,r,i){Ze(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Od(e){return e.fields.find((function(e){return 2===e.kind}))}function Dd(e){return e.fields.filter((function(e){return 2!==e.kind}))}Rd.UNKNOWN_ID=-1;var Ld=Ye((function e(t,n){Ze(this,e),this.fieldPath=t,this.kind=n})),Md=function(){function e(t,n){Ze(this,e),this.sequenceNumber=t,this.offset=n}return Ye(e,null,[{key:"empty",value:function(){return new e(0,Ud.min())}}]),e}();function Fd(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Uh.fromTimestamp(1e9===r?new jh(n+1,0):new jh(n,r));return new Ud(i,ud.empty(),t)}function jd(e){return new Ud(e.readTime,e.key,-1)}var Ud=function(){function e(t,n,r){Ze(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Ye(e,null,[{key:"min",value:function(){return new e(Uh.min(),ud.empty(),-1)}},{key:"max",value:function(){return new e(Uh.max(),ud.empty(),-1)}}]),e}();function qd(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ud.comparator(e.documentKey,t.documentKey))?n:Lh(e.largestBatchId,t.largestBatchId)}var Vd=function(){function e(t,n){Ze(this,e),this.comparator=t,this.root=n||zd.EMPTY}return Ye(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,zd.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zd.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Bd(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Bd(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Bd(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Bd(this.root,e,this.comparator,!0)}}]),e}(),Bd=function(){function e(t,n,r,i){Ze(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ye(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),zd=function(){function e(t,n,r,i,a){Ze(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ye(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw gh();if(this.right.isRed())throw gh();var e=this.left.check();if(e!==this.right.check())throw gh();return e+(this.isRed()?0:1)}}]),e}();zd.EMPTY=null,zd.RED=!0,zd.BLACK=!1,zd.EMPTY=new(function(){function e(){Ze(this,e),this.size=0}return Ye(e,[{key:"key",get:function(){throw gh()}},{key:"value",get:function(){throw gh()}},{key:"color",get:function(){throw gh()}},{key:"left",get:function(){throw gh()}},{key:"right",get:function(){throw gh()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new zd(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Wd=function(){function e(t){Ze(this,e),this.comparator=t,this.data=new Vd(this.comparator)}return Ye(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Kd(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Kd(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Kd=function(){function e(t){Ze(this,e),this.iter=t}return Ye(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Hd(e){return e.hasNext()?e.getNext():void 0}var Gd=Ye((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Ze(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function Zd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Gd(e,t,n,r,i,a,o)}function Qd(e){var t=wh(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+vd(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),id(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return vd(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return vd(e)})).join(",")),t.P=n}return t.P}function Yd(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!hp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!fd(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!pp(e.startAt,t.startAt)&&pp(e.endAt,t.endAt)}function $d(e){return ud.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Xd(e,t){return e.filters.filter((function(e){return e instanceof tp&&e.field.isEqual(t)}))}function Jd(e,t,n){var r,i=cd,a=!0,o=Sa(Xd(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=cd,c=!0;switch(u.op){case"<":case"<=":s=Id(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=cd}Td({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Td({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function ep(e,t,n){var r,i=sd,a=!0,o=Sa(Xd(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=sd,c=!0;switch(u.op){case">=":case">":s=Sd(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=sd}Cd({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Cd({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var tp=function(e){jt(n,e);var t=zt(n);function n(e,r,i){var a;return Ze(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ye(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(dd(t,this.value)):null!==t&&ld(this.value)===ld(t)&&this.v(dd(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gh()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new np(e,t,r):"array-contains"===t?new op(e,r):"in"===t?new up(e,r):"not-in"===t?new sp(e,r):"array-contains-any"===t?new cp(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new rp(e,n):new ip(e,n)}}]),n}(function(){return Ye((function e(){Ze(this,e)}))}()),np=function(e){jt(n,e);var t=zt(n);function n(e,r,i){var a;return Ze(this,n),(a=t.call(this,e,r,i)).key=ud.fromName(i.referenceValue),a}return Ye(n,[{key:"matches",value:function(e){var t=ud.comparator(e.key,this.key);return this.v(t)}}]),n}(tp),rp=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this,e,"in",r)).keys=ap("in",r),i}return Ye(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(tp),ip=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this,e,"not-in",r)).keys=ap("not-in",r),i}return Ye(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(tp);function ap(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ud.fromName(e.referenceValue)}))}var op=function(e){jt(n,e);var t=zt(n);function n(e,r){return Ze(this,n),t.call(this,e,"array-contains",r)}return Ye(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return kd(t)&&hd(t.arrayValue,this.value)}}]),n}(tp),up=function(e){jt(n,e);var t=zt(n);function n(e,r){return Ze(this,n),t.call(this,e,"in",r)}return Ye(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&hd(this.value.arrayValue,t)}}]),n}(tp),sp=function(e){jt(n,e);var t=zt(n);function n(e,r){return Ze(this,n),t.call(this,e,"not-in",r)}return Ye(n,[{key:"matches",value:function(e){if(hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!hd(this.value.arrayValue,t)}}]),n}(tp),cp=function(e){jt(n,e);var t=zt(n);function n(e,r){return Ze(this,n),t.call(this,e,"array-contains-any",r)}return Ye(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!kd(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return hd(t.value.arrayValue,e)}))}}]),n}(tp),lp=Ye((function e(t,n){Ze(this,e),this.position=t,this.inclusive=n})),fp=Ye((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Ze(this,e),this.field=t,this.dir=n}));function hp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function dp(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ud.comparator(ud.fromName(o.referenceValue),n.key):dd(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function pp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!fd(e.position[n],t.position[n]))return!1;return!0}var vp=Ye((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ze(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function yp(e,t,n,r,i,a,o,u){return new vp(e,t,n,r,i,a,o,u)}function mp(e){return new vp(e)}function gp(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function kp(e){var t,n=Sa(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function wp(e){return null!==e.collectionGroup}function bp(e){var t=wh(e);if(null===t.D){t.D=[];var n=kp(t),r=gp(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new fp(n)),t.D.push(new fp(Hh.keyField(),"asc"));else{var i,a=!1,o=Sa(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new fp(Hh.keyField(),s))}}}return t.D}function _p(e){var t=wh(e);if(!t.C)if("F"===t.limitType)t.C=Zd(t.path,t.collectionGroup,bp(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Sa(bp(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new fp(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new lp(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new lp(t.startAt.position,t.startAt.inclusive):null;t.C=Zd(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function xp(e,t,n){return new vp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ep(e,t){return Yd(_p(e),_p(t))&&e.limitType===t.limitType}function Ip(e){return"".concat(Qd(_p(e)),"|lt:").concat(e.limitType)}function Sp(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(vd(t.value));var t})).join(", "),"]")),id(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return vd(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return vd(e)})).join(",")),"Target(".concat(t,")")}(_p(e)),"; limitType=").concat(e.limitType,")")}function Tp(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ud.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Sa(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Sa(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=dp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,bp(e),t))&&!(e.endAt&&!function(e,t,n){var r=dp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,bp(e),t))}(e,t)}function Cp(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Np(e){return function(t,n){var r,i=!1,a=Sa(bp(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Pp(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Pp(e,t,n){var r=e.field.isKeyField()?ud.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?dd(r,i):gh()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return gh()}}function Ap(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ad(t)?"-0":t}}function Rp(e){return{integerValue:""+e}}function Op(e,t){return od(t)?Rp(t):Ap(e,t)}var Dp=Ye((function e(){Ze(this,e),this._=void 0}));function Lp(e,t,n){return e instanceof jp?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Up?qp(e,t):e instanceof Vp?Bp(e,t):function(e,t){var n=Fp(e,t),r=Wp(n)+Wp(e.k);return gd(n)&&gd(e.k)?Rp(r):Ap(e.M,r)}(e,t)}function Mp(e,t,n){return e instanceof Up?qp(e,t):e instanceof Vp?Bp(e,t):n}function Fp(e,t){return e instanceof zp?gd(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var jp=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n)}(Dp),Up=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this)).elements=e,r}return Ye(n)}(Dp);function qp(e,t){var n,r=Kp(t),i=Sa(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return fd(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Vp=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this)).elements=e,r}return Ye(n)}(Dp);function Bp(e,t){var n,r=Kp(t),i=Sa(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!fd(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var zp=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this)).M=e,i.k=r,i}return Ye(n)}(Dp);function Wp(e){return $h(e.integerValue||e.doubleValue)}function Kp(e){return kd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Hp=Ye((function e(t,n){Ze(this,e),this.field=t,this.transform=n}));var Gp=Ye((function e(t,n){Ze(this,e),this.version=t,this.transformResults=n})),Zp=function(){function e(t,n){Ze(this,e),this.updateTime=t,this.exists=n}return Ye(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Qp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Yp=Ye((function e(){Ze(this,e)}));function $p(e,t,n){e instanceof nv?function(e,t,n){var r=e.value.clone(),i=av(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof rv?function(e,t,n){if(Qp(e.precondition,t)){var r=av(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(iv(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Xp(e,t,n){e instanceof nv?function(e,t,n){if(Qp(e.precondition,t)){var r=e.value.clone(),i=ov(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(tv(t),r).setHasLocalMutations()}}(e,t,n):e instanceof rv?function(e,t,n){if(Qp(e.precondition,t)){var r=ov(e.fieldTransforms,n,t),i=t.data;i.setAll(iv(e)),i.setAll(r),t.convertToFoundDocument(tv(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Qp(e.precondition,t)&&t.convertToNoDocument(Uh.min())}(e,t)}function Jp(e,t){var n,r=null,i=Sa(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Fp(a.transform,o||null);null!=u&&(null==r&&(r=Nd.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function ev(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Mh(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Up&&t instanceof Up||e instanceof Vp&&t instanceof Vp?Mh(e.elements,t.elements,fd):e instanceof zp&&t instanceof zp?fd(e.k,t.k):e instanceof jp&&t instanceof jp}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function tv(e){return e.isFoundDocument()?e.version:Uh.min()}var nv=function(e){jt(n,e);var t=zt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Ze(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ye(n)}(Yp),rv=function(e){jt(n,e);var t=zt(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Ze(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ye(n)}(Yp);function iv(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function av(e,t,n){var r=new Map;kh(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Mp(o,u,n[i]))}return r}function ov(e,t,n){var r,i=new Map,a=Sa(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Lp(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var uv,sv,cv=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ye(n)}(Yp),lv=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ye(n)}(Yp),fv=Ye((function e(t){Ze(this,e),this.count=t}));function hv(e){switch(e){default:return gh();case bh.CANCELLED:case bh.UNKNOWN:case bh.DEADLINE_EXCEEDED:case bh.RESOURCE_EXHAUSTED:case bh.INTERNAL:case bh.UNAVAILABLE:case bh.UNAUTHENTICATED:return!1;case bh.INVALID_ARGUMENT:case bh.NOT_FOUND:case bh.ALREADY_EXISTS:case bh.PERMISSION_DENIED:case bh.FAILED_PRECONDITION:case bh.ABORTED:case bh.OUT_OF_RANGE:case bh.UNIMPLEMENTED:case bh.DATA_LOSS:return!0}}function dv(e){if(void 0===e)return vh("GRPC error has no .code"),bh.UNKNOWN;switch(e){case uv.OK:return bh.OK;case uv.CANCELLED:return bh.CANCELLED;case uv.UNKNOWN:return bh.UNKNOWN;case uv.DEADLINE_EXCEEDED:return bh.DEADLINE_EXCEEDED;case uv.RESOURCE_EXHAUSTED:return bh.RESOURCE_EXHAUSTED;case uv.INTERNAL:return bh.INTERNAL;case uv.UNAVAILABLE:return bh.UNAVAILABLE;case uv.UNAUTHENTICATED:return bh.UNAUTHENTICATED;case uv.INVALID_ARGUMENT:return bh.INVALID_ARGUMENT;case uv.NOT_FOUND:return bh.NOT_FOUND;case uv.ALREADY_EXISTS:return bh.ALREADY_EXISTS;case uv.PERMISSION_DENIED:return bh.PERMISSION_DENIED;case uv.FAILED_PRECONDITION:return bh.FAILED_PRECONDITION;case uv.ABORTED:return bh.ABORTED;case uv.OUT_OF_RANGE:return bh.OUT_OF_RANGE;case uv.UNIMPLEMENTED:return bh.UNIMPLEMENTED;case uv.DATA_LOSS:return bh.DATA_LOSS;default:return gh()}}(sv=uv||(uv={}))[sv.OK=0]="OK",sv[sv.CANCELLED=1]="CANCELLED",sv[sv.UNKNOWN=2]="UNKNOWN",sv[sv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sv[sv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sv[sv.NOT_FOUND=5]="NOT_FOUND",sv[sv.ALREADY_EXISTS=6]="ALREADY_EXISTS",sv[sv.PERMISSION_DENIED=7]="PERMISSION_DENIED",sv[sv.UNAUTHENTICATED=16]="UNAUTHENTICATED",sv[sv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sv[sv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sv[sv.ABORTED=10]="ABORTED",sv[sv.OUT_OF_RANGE=11]="OUT_OF_RANGE",sv[sv.UNIMPLEMENTED=12]="UNIMPLEMENTED",sv[sv.INTERNAL=13]="INTERNAL",sv[sv.UNAVAILABLE=14]="UNAVAILABLE",sv[sv.DATA_LOSS=15]="DATA_LOSS";var pv=function(){function e(t,n){Ze(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Ye(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Sa(n);try{for(i.s();!(r=i.n()).done;){var a=Be(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Vh(this.inner,(function(t,n){var r,i=Sa(n);try{for(i.s();!(r=i.n()).done;){var a=Be(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Bh(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),vv=new Vd(ud.comparator);function yv(){return vv}var mv=new Vd(ud.comparator);function gv(){for(var e=mv,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function kv(){return new pv((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var wv=new Vd(ud.comparator),bv=new Wd(ud.comparator);function _v(){for(var e=bv,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var xv=new Wd(Lh);function Ev(){return xv}var Iv=function(){function e(t,n,r,i,a){Ze(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ye(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Sv.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Uh.min(),r,Ev(),yv(),_v())}}]),e}(),Sv=function(){function e(t,n,r,i,a){Ze(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ye(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Zh.EMPTY_BYTE_STRING,n,_v(),_v(),_v())}}]),e}(),Tv=Ye((function e(t,n,r,i){Ze(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),Cv=Ye((function e(t,n){Ze(this,e),this.targetId=t,this.$=n})),Nv=Ye((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zh.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Ze(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Pv=function(){function e(){Ze(this,e),this.B=0,this.L=Ov(),this.U=Zh.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return Ye(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=_v(),t=_v(),n=_v();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:gh()}})),new Sv(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Ov()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),Av=function(){function e(t){Ze(this,e),this.nt=t,this.st=new Map,this.it=yv(),this.rt=Rv(),this.ot=new Wd(Lh)}return Ye(e,[{key:"ut",value:function(e){var t,n=Sa(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=Sa(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:gh()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if($d(i))if(0===n){var a=new ud(i.path);this.ct(t,a,Ad.newNoDocument(a,Uh.min()))}else kh(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&$d(a.target)){var o=new ud(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Ad.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=_v();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new Iv(e,n,this.ot,this.it,r);return this.it=yv(),this.rt=Rv(),this.ot=new Wd(Lh),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Pv,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Wd(Lh),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||ph("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Pv),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Rv(){return new Vd(ud.comparator)}function Ov(){return new Vd(ud.comparator)}var Dv={asc:"ASCENDING",desc:"DESCENDING"},Lv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mv=Ye((function e(t,n){Ze(this,e),this.databaseId=t,this.N=n}));function Fv(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function jv(e,t){return e.N?t.toBase64():t.toUint8Array()}function Uv(e,t){return Fv(e,t.toTimestamp())}function qv(e){return kh(!!e),Uh.fromTimestamp(function(e){var t=Yh(e);return new jh(t.seconds,t.nanos)}(e))}function Vv(e,t){return function(e){return new Wh(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Bv(e){var t=Wh.fromString(e);return kh(fy(t)),t}function zv(e,t){return Vv(e.databaseId,t.path)}function Wv(e,t){var n=Bv(t);if(n.get(1)!==e.databaseId.projectId)throw new _h(bh.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _h(bh.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ud(Zv(n))}function Kv(e,t){return Vv(e.databaseId,t)}function Hv(e){var t=Bv(e);return 4===t.length?Wh.emptyPath():Zv(t)}function Gv(e){return new Wh(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Zv(e){return kh(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Qv(e,t,n){return{name:zv(e,t),fields:n.value.mapValue.fields}}function Yv(e,t,n){var r=Wv(e,t.name),i=qv(t.updateTime),a=new Nd({mapValue:{fields:t.fields}}),o=Ad.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function $v(e,t){return"found"in t?function(e,t){kh(!!t.found),t.found.name,t.found.updateTime;var n=Wv(e,t.found.name),r=qv(t.found.updateTime),i=new Nd({mapValue:{fields:t.found.fields}});return Ad.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){kh(!!t.missing),kh(!!t.readTime);var n=Wv(e,t.missing),r=qv(t.readTime);return Ad.newNoDocument(n,r)}(e,t):gh()}function Xv(e,t){var n;if(t instanceof nv)n={update:Qv(e,t.key,t.value)};else if(t instanceof cv)n={delete:zv(e,t.key)};else if(t instanceof rv)n={update:Qv(e,t.key,t.data),updateMask:ly(t.fieldMask)};else{if(!(t instanceof lv))return gh();n={verify:zv(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof jp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Up)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vp)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof zp)return{fieldPath:t.field.canonicalString(),increment:n.k};throw gh()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Uv(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:gh()}(e,t.precondition)),n}function Jv(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Zp.updateTime(qv(e.updateTime)):void 0!==e.exists?Zp.exists(e.exists):Zp.none()}(t.currentDocument):Zp.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)kh("REQUEST_TIME"===t.setToServerValue),n=new jp;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Up(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Vp(i)}else"increment"in t?n=new zp(e,t.increment):gh();var a=Hh.fromServerFormat(t.fieldPath);return new Hp(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Wv(e,t.update.name),a=new Nd({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Gh(t.map((function(e){return Hh.fromServerFormat(e)})))}(t.updateMask);return new rv(i,a,o,n,r)}return new nv(i,a,n,r)}if(t.delete){var u=Wv(e,t.delete);return new cv(u,n)}if(t.verify){var s=Wv(e,t.verify);return new lv(s,n)}return gh()}function ey(e,t){return{documents:[Kv(e,t.path)]}}function ty(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Kv(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Kv(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(bd(e.value))return{unaryFilter:{field:oy(e.field),op:"IS_NAN"}};if(wd(e.value))return{unaryFilter:{field:oy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(bd(e.value))return{unaryFilter:{field:oy(e.field),op:"IS_NOT_NAN"}};if(wd(e.value))return{unaryFilter:{field:oy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oy(e.field),op:ay(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:oy(e.field),direction:iy(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||id(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ny(e){var t=Hv(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){kh(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=ry(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new fp(uy(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return id(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new lp(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new lp(n,t)}(n.endAt)),yp(t,i,u,o,s,"F",c,l)}function ry(e){return e?void 0!==e.unaryFilter?[cy(e)]:void 0!==e.fieldFilter?[sy(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return ry(e)})).reduce((function(e,t){return e.concat(t)})):gh():[]}function iy(e){return Dv[e]}function ay(e){return Lv[e]}function oy(e){return{fieldPath:e.canonicalString()}}function uy(e){return Hh.fromServerFormat(e.fieldPath)}function sy(e){return tp.create(uy(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gh()}}(e.fieldFilter.op),e.fieldFilter.value)}function cy(e){switch(e.unaryFilter.op){case"IS_NAN":var t=uy(e.unaryFilter.field);return tp.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=uy(e.unaryFilter.field);return tp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=uy(e.unaryFilter.field);return tp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=uy(e.unaryFilter.field);return tp.create(i,"!=",{nullValue:"NULL_VALUE"});default:return gh()}}function ly(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function fy(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function hy(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=py(t)),t=dy(e.get(n),t);return py(t)}function dy(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function py(e){return e+"\x01\x01"}function vy(e){var t=e.length;if(kh(t>=2),2===t)return kh("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Wh.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&gh(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:gh()}a=o+2}return new Wh(r)}var yy=["userId","batchId"];function my(e,t){return[e,hy(t)]}function gy(e,t,n){return[e,hy(t),n]}var ky={},wy=["prefixPath","collectionGroup","readTime","documentId"],by=["prefixPath","collectionGroup","documentId"],_y=["collectionGroup","readTime","prefixPath","documentId"],xy=["canonicalId","targetId"],Ey=["targetId","path"],Iy=["path","targetId"],Sy=["collectionId","parent"],Ty=["indexId","uid"],Cy=["uid","sequenceNumber"],Ny=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Py=["indexId","uid","orderedDocumentKey"],Ay=["userId","collectionPath","documentId"],Ry=["userId","collectionPath","largestBatchId"],Oy=["userId","collectionGroup","largestBatchId"],Dy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Ly=[].concat(Ge(Dy),["documentOverlays"]),My=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fy=[].concat(My,["indexConfiguration","indexState","indexEntries"]),jy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Uy=function(){function e(){Ze(this,e),this.onCommittedListeners=[]}return Ye(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),qy=function(){function e(t){var n=this;Ze(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ye(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&gh(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Sa(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Vy=function(){function e(t,n){var r=this;Ze(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new xh,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Wy(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Qy(e.target.error);r.At.reject(new Wy(t,n))}}return Ye(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(ph("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Hy(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Wy(n,t)}}}]),e}(),By=function(){function e(t,n,r){Ze(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(Ba())&&vh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ye(e,[{key:"Nt",value:function(){var e=Eo(Ea().mark((function e(t){var n=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ph("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Wy(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new _h(bh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new _h(bh.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Wy(t,n))},i.onupgradeneeded=function(e){ph("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){ph("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Eo(Ea().mark((function e(t,n,r,i){var a,o,u,s,c=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Ea().mark((function e(){var n,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=Vy.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),qy.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,ph("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ph("SimpleDb","Removing database:",e),Gy(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Qa())return!1;if(e.St())return!0;var t=Ba(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/chip",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),zy=function(){function e(t){Ze(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return Ye(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Gy(this.Ft.delete())}}]),e}(),Wy=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this,bh.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ye(n)}(_h);function Ky(e){return"IndexedDbTransactionError"===e.name}var Hy=function(){function e(t){Ze(this,e),this.store=t}return Ye(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ph("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ph("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Gy(n)}},{key:"add",value:function(e){return ph("SimpleDb","ADD",this.store.name,e,e),Gy(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Gy(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ph("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ph("SimpleDb","DELETE",this.store.name,e),Gy(this.store.delete(e))}},{key:"count",value:function(){return ph("SimpleDb","COUNT",this.store.name),Gy(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new qy((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new qy((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){ph("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new qy((function(n,r){t.onerror=function(e){var t=Qy(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new qy((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new zy(i),o=t(i.primaryKey,i.value,a);if(o instanceof qy){var u=o.catch((function(e){return a.done(),qy.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return qy.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Gy(e){return new qy((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Qy(e.target.error);n(t)}}))}var Zy=!1;function Qy(e){var t=By.Vt(Ba());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new _h("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Zy||(Zy=!0,setTimeout((function(){throw r}),0)),r}}return e}var Yy=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return Ye(n)}(Uy);function $y(e,t){var n=wh(e);return By.xt(n.Ht,t)}var Xy=function(){function e(t,n,r,i){Ze(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ye(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&$p(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=Sa(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Xp(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=Sa(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Xp(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Uh.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),_v())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Mh(this.mutations,e.mutations,(function(e,t){return ev(e,t)}))&&Mh(this.baseMutations,e.baseMutations,(function(e,t){return ev(e,t)}))}}]),e}(),Jy=function(){function e(t,n,r,i){Ze(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ye(e,null,[{key:"from",value:function(t,n,r){kh(t.mutations.length===r.length);for(var i=wv,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),em=function(){function e(t,n){Ze(this,e),this.largestBatchId=t,this.mutation=n}return Ye(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),tm=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Uh.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Uh.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Zh.EMPTY_BYTE_STRING;Ze(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Ye(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),nm=Ye((function e(t){Ze(this,e),this.Jt=t}));function rm(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:im(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:zv(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Fv(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:am(t.version)};else{if(!t.isUnknownDocument())return gh();r.unknownDocument={path:n.path.toArray(),version:am(t.version)}}return r}function im(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function am(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function om(e){var t=new jh(e.seconds,e.nanoseconds);return Uh.fromTimestamp(t)}function um(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Jv(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Jv(e.Jt,t)})),u=jh.fromMillis(t.localWriteTimeMs);return new Xy(t.batchId,u,n,o)}function sm(e){var t,n,r=om(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?om(e.lastLimboFreeSnapshotVersion):Uh.min();return void 0!==e.query.documents?(kh(1===(n=e.query).documents.length),t=_p(mp(Hv(n.documents[0])))):t=function(e){return _p(ny(e))}(e.query),new tm(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Zh.fromBase64String(e.resumeToken))}function cm(e,t){var n,r=am(t.snapshotVersion),i=am(t.lastLimboFreeSnapshotVersion);n=$d(t.target)?ey(e.Jt,t.target):ty(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Qd(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function lm(e){var t=ny({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?xp(t,t.limit,"L"):t}function fm(e,t){return new em(t.largestBatchId,Jv(e.Jt,t.overlayMutation))}function hm(e,t){var n=t.path.lastSegment();return[e,hy(t.path.popLast()),n]}var dm=function(){function e(){Ze(this,e)}return Ye(e,[{key:"getBundleMetadata",value:function(e,t){return pm(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:om(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return pm(e).put({bundleId:(n=t).id,createTime:am(qv(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return vm(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:lm(t.bundledQuery),readTime:om(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return vm(e).put(function(e){return{name:e.name,readTime:am(qv(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function pm(e){return $y(e,"bundles")}function vm(e){return $y(e,"namedQueries")}var ym=function(){function e(t,n){Ze(this,e),this.M=t,this.userId=n}return Ye(e,[{key:"getOverlay",value:function(e,t){var n=this;return mm(e).get(hm(this.userId,t)).next((function(e){return e?fm(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new em(t,a);i.push(r.Xt(e,o))})),qy.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(hy(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(mm(e).Qt("collectionPathOverlayIndex",i))})),qy.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=kv(),a=hy(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return mm(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=Sa(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=fm(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=kv(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return mm(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=fm(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return mm(e).put(function(e,t,n){var r=Be(hm(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Xv(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function mm(e){return $y(e,"documentOverlays")}var gm=function(){function e(){Ze(this,e)}return Ye(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se($h(e.integerValue));else if("doubleValue"in e){var n=$h(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),ad(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Xh(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Ed(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):gh()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=Sa(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),ud.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function km(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function wm(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=km(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}gm.fe=new gm;var bm=function(){function e(){Ze(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Ye(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=Sa(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=Sa(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=wm(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=wm(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),_m=function(){function e(t){Ze(this,e),this.De=t}return Ye(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),xm=function(){function e(t){Ze(this,e),this.De=t}return Ye(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Em=function(){function e(){Ze(this,e),this.De=new bm,this.Ce=new _m(this.De),this.xe=new xm(this.De)}return Ye(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),Im=function(){function e(t,n,r,i){Ze(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Ye(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Sm(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Tm(e.arrayValue,t.arrayValue))?n:0!==(n=Tm(e.directionalValue,t.directionalValue))?n:ud.comparator(e.documentKey,t.documentKey)}function Tm(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Cm=function(){function e(t){Ze(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=Sa(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Ye(e,[{key:"$e",value:function(e){var t=Od(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Dd(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=Sa(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Nm=function(){function e(){Ze(this,e),this.qe=new Pm}return Ye(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),qy.resolve()}},{key:"getCollectionParents",value:function(e,t){return qy.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return qy.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return qy.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return qy.resolve(null)}},{key:"getIndexType",value:function(e,t){return qy.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return qy.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return qy.resolve(null)}},{key:"getMinOffset",value:function(e,t){return qy.resolve(Ud.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return qy.resolve()}},{key:"updateIndexEntries",value:function(e,t){return qy.resolve()}}]),e}(),Pm=function(){function e(){Ze(this,e),this.index={}}return Ye(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Wd(Wh.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Wd(Wh.comparator)).toArray()}}]),e}(),Am=new Uint8Array(0),Rm=function(){function e(t,n){Ze(this,e),this.user=t,this.databaseId=n,this.Ke=new Pm,this.Ge=new pv((function(e){return Qd(e)}),(function(e,t){return Yd(e,t)})),this.uid=t.uid||""}return Ye(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:hy(i)};return Om(e).put(a)}return qy.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Fh(t),""],!1,!0);return Om(e).qt(r).next((function(e){var r,i=Sa(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(vy(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Lm(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Lm(e),r=Mm(e),i=Dm(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Dm(e),i=!0,a=new Map;return qy.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=_v(),o=[];return qy.forEach(a,(function(i,a){var u;ph("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Qd(t)));var s=function(e,t){var n=Od(t);if(void 0===n)return null;var r,i=Sa(Xd(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Sa(Dd(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Sa(Xd(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Sa(Dd(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Jd(e,o.fieldPath,e.startAt):ep(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new lp(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Sa(Dd(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ep(e,o.fieldPath,e.endAt):Jd(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new lp(r,i)}(a,i),h=n.We(i,a,l),d=n.We(i,a,f),p=n.ze(i,a,c),v=n.He(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return qy.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=ud.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return qy.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.Je(t[s/c]):Am,h=u.Ye(e,f,n[s%c],r),d=u.Xe(e,f,i[s%c],a),p=o.map((function(t){return u.Ye(e,f,t,!0)}));l.push.apply(l,Ge(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"Ye",value:function(e,t,n,r){var i=new Im(e,ud.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new Im(e,ud.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new Cm(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Sa(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return qy.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Wd(Hh.comparator),r=!1,i=Sa(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=Sa(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new Em,i=Sa(Dd(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);gm.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new Em;return gm.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new Em;return gm.fe.Zt(md(this.databaseId,t),n.Ne(function(e){var t=Dd(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Em);var i,a=0,o=Sa(Dd(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Sa(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&kd(c))r=this.nn(r,s,c);else{var h=f.Ne(s.kind);gm.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=Ge(e),a=[],o=Sa(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Sa(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Em;f.seed(l.Se()),gm.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof tp&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Lm(e),i=Mm(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return qy.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Md(t.sequenceNumber,new Ud(om(t.readTime),new ud(vy(t.documentKey)),t.largestBatchId)):Md.empty(),r=e.fields.map((function(e){var t=Be(e,2),n=t[0],r=t[1];return new Ld(Hh.fromServerFormat(n),r)}));return new Rd(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Lh(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Lm(e),a=Mm(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return qy.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:am(r.readTime),documentKey:hy(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return qy.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?qy.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),qy.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?qy.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return Dm(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return Dm(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=Dm(e),i=new Wd(Sm);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new Im(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new Wd(Sm),r=this.Ze(t,e);if(null==r)return n;var i=Od(t);if(null!=i){var a=e.data.field(i.fieldPath);if(kd(a)){var o,u=Sa(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Im(t.indexId,e.key,this.Je(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Im(t.indexId,e.key,Am,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;ph("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Hd(a),s=Hd(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Hd(o)):l?(i(u),u=Hd(a)):(u=Hd(a),s=Hd(o))}}(r,i,Sm,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),qy.waitFor(o)}},{key:"rn",value:function(e){var t=1;return Mm(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Sm(e,t)})).filter((function(e,t,n){return!t||0!==Sm(e,n[t-1])}));var r=[];r.push(e);var i,a=Sa(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Sm(o,e),s=Sm(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Am,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Am,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return qy.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||qd(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=Ud.min()}))})).next((function(){return n}))}}]),e}();function Om(e){return $y(e,"collectionParents")}function Dm(e){return $y(e,"indexEntries")}function Lm(e){return $y(e,"indexConfiguration")}function Mm(e){return $y(e,"indexState")}var Fm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jm=function(){function e(t,n,r){Ze(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ye(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Um(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){kh(1===u)})));var c,l=[],f=Sa(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=gy(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return qy.waitFor(a).next((function(){return l}))}function qm(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw gh();t=e.noDocument}return JSON.stringify(t).length}jm.DEFAULT_COLLECTION_PERCENTILE=10,jm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jm.DEFAULT=new jm(41943040,jm.DEFAULT_COLLECTION_PERCENTILE,jm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jm.DISABLED=new jm(-1,0,0);var Vm=function(){function e(t,n,r,i){Ze(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return Ye(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zm(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Wm(e),o=zm(e);return o.add({}).next((function(u){kh("number"==typeof u);var s,c=new Xy(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Xv(e.Jt,t)})),i=n.mutations.map((function(t){return Xv(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new Wd((function(e,t){return Lh(e.canonicalString(),t.canonicalString())})),d=Sa(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=gy(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,ky))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),qy.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return zm(e).get(t).next((function(e){return e?(kh(e.userId===n.userId),um(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?qy.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return zm(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(kh(t.batchId>=r),a=um(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return zm(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zm(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return um(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=my(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Wm(e).Wt({range:i},(function(r,i,o){var u=Be(r,3),s=u[0],c=u[1],l=u[2],f=vy(c);if(s===n.userId&&t.path.isEqual(f))return zm(e).get(l).next((function(e){if(!e)throw gh();kh(e.userId===n.userId),a.push(um(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Wd(Lh),i=[];return t.forEach((function(t){var a=my(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Wm(e).Wt({range:o},(function(e,i,a){var o=Be(e,3),u=o[0],s=o[1],c=o[2],l=vy(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),qy.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=my(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Wd(Lh);return Wm(e).Wt({range:o},(function(e,t,a){var o=Be(e,3),s=o[0],c=o[1],l=o[2],f=vy(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(zm(e).get(t).next((function(e){if(null===e)throw gh();kh(e.userId===n.userId),r.push(um(n.M,e))})))})),qy.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Um(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),qy.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return qy.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Wm(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=vy(e[1]);i.push(a)}else r.done()})).next((function(){kh(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Bm(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return Km(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return kh(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Bm(e,t,n){var r=my(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Wm(e).Wt({range:a,jt:!0},(function(e,n,r){var a=Be(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function zm(e){return $y(e,"mutations")}function Wm(e){return $y(e,"documentMutations")}function Km(e){return $y(e,"mutationQueues")}var Hm=function(){function e(t){Ze(this,e),this.mn=t}return Ye(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),Gm=function(){function e(t,n){Ze(this,e),this.referenceDelegate=t,this.M=n}return Ye(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new Hm(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return Uh.fromTimestamp(new jh(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Zm(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return kh(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Zm(e).Wt((function(o,u){var s=sm(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return qy.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Zm(e).Wt((function(e,n){var r=sm(n);t(r)}))}},{key:"pn",value:function(e){return Qm(e).get("targetGlobalKey").next((function(e){return kh(null!==e),e}))}},{key:"In",value:function(e,t){return Qm(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Zm(e).put(cm(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Qd(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Zm(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=sm(n);Yd(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Ym(e);return t.forEach((function(t){var o=hy(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),qy.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Ym(e);return qy.forEach(t,(function(t){var a=hy(t.path);return qy.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Ym(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ym(e),i=_v();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=vy(e[1]),a=new ud(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=hy(t.path),r=IDBKeyRange.bound([n],[Fh(n)],!1,!0),i=0;return Ym(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=Be(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Zm(e).get(t).next((function(e){return e?sm(e):null}))}}]),e}();function Zm(e){return $y(e,"targets")}function Qm(e){return $y(e,"targetGlobal")}function Ym(e){return $y(e,"targetDocuments")}function $m(e){return Xm.apply(this,arguments)}function Xm(){return Xm=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===bh.FAILED_PRECONDITION&&t.message===jy){e.next=2;break}throw t;case 2:ph("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Xm.apply(this,arguments)}function Jm(e,t){var n=Be(e,2),r=n[0],i=n[1],a=Be(t,2),o=a[0],u=a[1],s=Lh(r,o);return 0===s?Lh(i,u):s}var eg=function(){function e(t){Ze(this,e),this.An=t,this.buffer=new Wd(Jm),this.Rn=0}return Ye(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Jm(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),tg=function(){function e(t,n){Ze(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return Ye(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;ph("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Eo(Ea().mark((function n(){return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Ky(n.t0)){n.next=12;break}ph("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,$m(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),ng=function(){function e(t,n){Ze(this,e),this.Dn=t,this.params=n}return Ye(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return qy.resolve(Rh.A);var r=new eg(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ph("LruGarbageCollector","Garbage collection skipped; disabled"),qy.resolve(Fm)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ph("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Fm):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ph("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),dh()<=No.DEBUG&&ph("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),qy.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),rg=function(){function e(t,n){Ze(this,e),this.db=t,this.garbageCollector=function(e,t){return new ng(e,t)}(this,n)}return Ye(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return ig(e,n)}},{key:"removeReference",value:function(e,t,n){return ig(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return ig(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return Km(e).zt((function(r){return Bm(e,r,t).next((function(e){return e&&(n=!0),qy.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Uh.min()),Ym(e).delete([0,hy(o.path)])}))}));i.push(s)}})).next((function(){return qy.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return ig(e,t)}},{key:"Mn",value:function(e,t){var n,r=Ym(e),i=Rh.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=Be(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Rh.A&&t(new ud(vy(n)),i),i=s,n=u):i=Rh.A})).next((function(){i!==Rh.A&&t(new ud(vy(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function ig(e,t){return Ym(e).put(function(e,t){return{targetId:0,path:hy(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var ag=function(){function e(){Ze(this,e),this.changes=new pv((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ye(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ad.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?qy.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),og=function(){function e(t){Ze(this,e),this.M=t}return Ye(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return cg(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return cg(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],im(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Ad.newInvalidDocument(t);return cg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(lg(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:Ad.newInvalidDocument(t)};return cg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(lg(t))},(function(e,i){r={document:n.$n(t,i),size:qm(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=yv();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=yv(),i=new Vd(ud.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,qm(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return qy.resolve();var r=new Wd(hg);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(lg(r.first()),lg(r.last())),a=r.getIterator(),o=a.getNext();return cg(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=ud.fromSegments([].concat(Ge(t.prefixPath),[t.collectionGroup,t.documentId]));o&&hg(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(lg(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),im(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cg(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=yv(),i=Sa(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(ud.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=yv(),o=fg(t,n),u=fg(t,Ud.max());return cg(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(ud.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new ug(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return sg(e).get("remoteDocumentGlobalKey").next((function(e){return kh(!!e),e}))}},{key:"Fn",value:function(e,t){return sg(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Yv(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ud.fromSegments(t.noDocument.path),i=om(t.noDocument.readTime);n=Ad.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return gh();var a=ud.fromSegments(t.unknownDocument.path),o=om(t.unknownDocument.version);n=Ad.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new jh(e[0],e[1]);return Uh.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Uh.min()))return n}return Ad.newInvalidDocument(e)}}]),e}(),ug=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new pv((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ye(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Wd((function(e,t){return Lh(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=rm(t.Kn.M,o);i=i.add(a.path.popLast());var c=qm(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=rm(t.Kn.M,o.convertToNoDocument(Uh.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),qy.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(ag);function sg(e){return $y(e,"remoteDocumentGlobal")}function cg(e){return $y(e,"remoteDocumentsV14")}function lg(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function fg(e,t){var n=t.documentKey.path.toArray();return[e,im(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function hg(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Lh(n[a],r[a]))return i;return(i=Lh(n.length,r.length))||((i=Lh(n[n.length-2],r[r.length-2]))||Lh(n[n.length-1],r[r.length-1]))}var dg=function(){function e(t){Ze(this,e),this.M=t}return Ye(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Vy("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yy,{unique:!0}),e.createObjectStore("documentMutations")}(e),pg(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=qy.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),pg(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Uh.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yy,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return qy.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Ay});t.createIndex("collectionPathOverlayIndex",Ry,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Oy,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:wy});t.createIndex("documentKeyIndex",by),t.createIndex("collectionGroupIndex",_y)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Ty}).createIndex("sequenceNumberIndex",Cy,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Ny}).createIndex("documentKeyIndex",Py,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=qm(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return qy.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return qy.forEach(r,(function(r){kh(r.userId===n.userId);var i=um(t.M,r);return Um(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Wh(n),o=function(e){return[0,hy(e)]}(a);r.push(t.get(o).next((function(n){return n?qy.resolve():function(n){return t.put({targetId:0,path:hy(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return qy.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Sy});var n=t.store("collectionParents"),r=new Pm,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:hy(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Wh(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=Be(e,3),r=(n[0],n[1]),a=(n[2],vy(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=sm(r),a=cm(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new ud(Wh.fromString(i.document.name).popFirst(5)):i.noDocument?ud.fromSegments(i.noDocument.path):i.unknownDocument?ud.fromSegments(i.unknownDocument.path):gh()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return qy.waitFor(r)}))}}]),e}();function pg(e){e.createObjectStore("targetDocuments",{keyPath:Ey}).createIndex("documentTargetsIndex",Iy,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xy,{unique:!0}),e.createObjectStore("targetGlobal")}var vg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yg=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(Ze(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new _h(bh.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rg(this,i),this.hs=n+"main",this.M=new nm(s),this.ls=new By(this.hs,this.ts,new dg(this.M)),this.fs=new Gm(this.referenceDelegate,this.M),this.ds=function(e){return new og(e)}(this.M),this._s=new dm,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&vh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ye(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new _h(bh.FAILED_PRECONDITION,vg);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Rh(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=Eo(Ea().mark((function n(r){return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=Eo(Ea().mark((function t(n){return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return gg(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(Ky(t))return ph("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ph("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return mg(e).get("owner").next((function(e){return qy.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return gg(e).delete(this.clientId)}},{key:"vs",value:function(){var e=Eo(Ea().mark((function e(){var t,n,r,i,a=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=$y(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return qy.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=Sa(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?qy.resolve(!0):mg(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new _h(bh.FAILED_PRECONDITION,vg);return!1}}return!(!t.networkEnabled||!t.inForeground)||gg(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ph("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Eo(Ea().mark((function e(){var t=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Yy(e,Rh.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return gg(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Vm.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new Rm(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return ym.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;ph("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?Fy:13===i?My:12===i?Ly:11===i?Dy:void gh();return this.ls.runTransaction(e,o,u,(function(i){return a=new Yy(i,r.es?r.es.next():Rh.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw vh("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new _h(bh.FAILED_PRECONDITION,jy);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return mg(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new _h(bh.FAILED_PRECONDITION,vg)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mg(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=mg(e);return n.get("owner").next((function(e){return t.Ps(e)?(ph("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):qy.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(vh("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!Wa()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ph("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return vh("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(cs){vh("Failed to set zombie client id.",cs)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(cs){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return By.vt()}}]),e}();function mg(e){return $y(e,"owner")}function gg(e){return $y(e,"clientMetadata")}function kg(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var wg=function(){function e(t,n,r){Ze(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return Ye(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=Sa(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=Sa(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return ud.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):wp(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new ud(t)).next((function(e){var t=gv();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=gv();return this.indexManager.getCollectionParents(e,i).next((function(o){return qy.forEach(o,(function(o){var u=function(e,t){return new vp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=Sa(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=Sa(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=Ad.newInvalidDocument(s),r=r.insert(s,c)),Xp(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Tp(t,n)||(r=r.remove(e))})),r}))}}]),e}(),bg=function(){function e(t,n,r,i){Ze(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return Ye(e,null,[{key:"Ys",value:function(t,n){var r,i=_v(),a=_v(),o=Sa(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),_g=function(){function e(){Ze(this,e),this.Xs=!1}return Ye(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return qy.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Uh.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(dh()<=No.DEBUG&&ph("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Sp(t)),i.ri(e,o,t,Fd(r,-1)))}))}},{key:"si",value:function(e,t){var n=new Wd(Np(e));return t.forEach((function(t,r){Tp(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return dh()<=No.DEBUG&&ph("QueryEngine","Using full collection scan to execute query:",Sp(t)),this.Zs.Qs(e,t,Ud.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),xg=function(){function e(t,n,r,i){Ze(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new Vd(Lh),this.ai=new pv((function(e){return Qd(e)}),Yd),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return Ye(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new wg(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function Eg(e,t,n,r){return new xg(e,t,n,r)}function Ig(e,t){return Sg.apply(this,arguments)}function Sg(){return Sg=Eo(Ea().mark((function e(t,n){var r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wh(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=_v(),s=Sa(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Sa(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Sa(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Sa(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.fi.Ks(e,u).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Sg.apply(this,arguments)}function Tg(e,t){var n=wh(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=qy.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);kh(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}function Cg(e){var t=wh(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function Ng(e,t){var n=wh(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Zh.EMPTY_BYTE_STRING,Uh.min()).withLastLimboFreeSnapshotVersion(Uh.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=yv();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Pg(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Uh.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return qy.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ui=i,e}))}function Pg(e,t,n){var r=_v();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=yv();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Uh.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):ph("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function Ag(e,t){var n=wh(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function Rg(e,t){var n=wh(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,qy.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new tm(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function Og(e,t,n){return Dg.apply(this,arguments)}function Dg(){return Dg=Eo(Ea().mark((function e(t,n,r){var i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wh(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ky(e.t1)){e.next=12;break}throw e.t1;case 12:ph("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Dg.apply(this,arguments)}function Lg(e,t,n){var r=wh(e),i=Uh.min(),a=_v();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=wh(e),i=r.ai.get(n);return void 0!==i?qy.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,_p(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:Uh.min(),n?a:_v())})).next((function(e){return jg(r,Cp(t),e),{documents:e,_i:a}}))}))}function Mg(e,t){var n=wh(e),r=wh(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Fg(e,t){var n=wh(e),r=n.ci.get(t)||Uh.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,Fd(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return jg(n,t,e),e}))}function jg(e,t,n){var r=Uh.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function Ug(e,t,n,r){return qg.apply(this,arguments)}function qg(){return qg=Eo(Ea().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=wh(t),o=_v(),u=yv(),s=Sa(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.mi(l)).setReadTime(n.gi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,Rg(a,function(e){return _p(mp(Wh.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Pg(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),qg.apply(this,arguments)}function Vg(e,t){return Bg.apply(this,arguments)}function Bg(){return Bg=Eo(Ea().mark((function e(t,n){var r,i,a,o=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:_v(),e.next=3,Rg(t,_p(lm(n.bundledQuery)));case 3:return i=e.sent,a=wh(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=qv(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Zh.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Bg.apply(this,arguments)}var zg=function(){function e(t){Ze(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return Ye(e,[{key:"getBundleMetadata",value:function(e,t){return qy.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:qv(n.createTime)}),qy.resolve()}},{key:"getNamedQuery",value:function(e,t){return qy.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:lm(e.bundledQuery),readTime:qv(e.readTime)}}(t)),qy.resolve()}}]),e}(),Wg=function(){function e(){Ze(this,e),this.overlays=new Vd(ud.comparator),this.Ii=new Map}return Ye(e,[{key:"getOverlay",value:function(e,t){return qy.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),qy.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),qy.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=kv(),i=t.length+1,a=new ud(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return qy.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Vd((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=kv(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=kv(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return qy.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new em(t,n));var a=this.Ii.get(t);void 0===a&&(a=_v(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),Kg=function(){function e(){Ze(this,e),this.Ti=new Wd(Hg.Ei),this.Ai=new Wd(Hg.Ri)}return Ye(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Hg(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new Hg(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new ud(new Wh([])),r=new Hg(n,e),i=new Hg(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new ud(new Wh([])),n=new Hg(t,e),r=new Hg(t,e+1),i=_v();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Hg(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Hg=function(){function e(t,n){Ze(this,e),this.key=t,this.Ci=n}return Ye(e,null,[{key:"Ei",value:function(e,t){return ud.comparator(e.key,t.key)||Lh(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return Lh(e.Ci,t.Ci)||ud.comparator(e.key,t.key)}}]),e}(),Gg=function(){function e(t,n){Ze(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new Wd(Hg.Ei)}return Ye(e,[{key:"checkEmpty",value:function(e){return qy.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new Xy(i,t,n,r);this.Bs.push(a);var o,u=Sa(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Ni=this.Ni.add(new Hg(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return qy.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return qy.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return qy.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return qy.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return qy.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Hg(t,0),i=new Hg(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),qy.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Wd(Lh);return t.forEach((function(e){var t=new Hg(e,0),i=new Hg(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),qy.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ud.isDocumentKey(i)||(i=i.child(""));var a=new Hg(new ud(i),0),o=new Wd(Lh);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),qy.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;kh(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return qy.forEach(t.mutations,(function(i){var a=new Hg(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Hg(t,0),r=this.Ni.firstAfterOrEqual(n);return qy.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,qy.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),Zg=function(){function e(t){Ze(this,e),this.$i=t,this.docs=new Vd(ud.comparator),this.size=0}return Ye(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return qy.resolve(n?n.document.mutableCopy():Ad.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=yv();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ad.newInvalidDocument(e))})),qy.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=yv(),i=new ud(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||qd(jd(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return qy.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){gh()}},{key:"Bi",value:function(e,t){return qy.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Qg(this)}},{key:"getSize",value:function(e){return qy.resolve(this.size)}}]),e}(),Qg=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this)).Kn=e,r}return Ye(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),qy.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(ag),Yg=function(){function e(t){Ze(this,e),this.persistence=t,this.Li=new pv((function(e){return Qd(e)}),Yd),this.lastRemoteSnapshotVersion=Uh.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Kg,this.targetCount=0,this.Ki=Hm.gn()}return Ye(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),qy.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return qy.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return qy.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),qy.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),qy.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new Hm(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,qy.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),qy.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,qy.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),qy.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return qy.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return qy.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),qy.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),qy.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),qy.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return qy.resolve(n)}},{key:"containsKey",value:function(e,t){return qy.resolve(this.qi.containsKey(t))}}]),e}(),$g=function(){function e(t,n){var r=this;Ze(this,e),this.Gi={},this.overlays={},this.es=new Rh(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Yg(this),this.indexManager=new Nm,this.ds=new Zg((function(e){return r.referenceDelegate.Qi(e)})),this.M=new nm(n),this._s=new zg(this.M)}return Ye(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Wg,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new Gg(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;ph("MemoryPersistence","Starting transaction:",e);var i=new Xg(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return qy.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Xg=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ye(n)}(Uy),Jg=function(){function e(t){Ze(this,e),this.persistence=t,this.Hi=new Kg,this.Ji=null}return Ye(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw gh()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),qy.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),qy.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),qy.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qy.forEach(this.Xi,(function(r){var i=ud.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,Uh.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return qy.or([function(){return qy.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function ek(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function tk(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function nk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var rk=function(){function e(t,n,r,i){Ze(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ye(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new _h(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(vh("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),ik=function(){function e(t,n,r){Ze(this,e),this.targetId=t,this.state=n,this.error=r}return Ye(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new _h(i.error.code,i.error.message))),a?new e(t,i.state,r):(vh("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),ak=function(){function e(t,n){Ze(this,e),this.clientId=t,this.activeTargetIds=n}return Ye(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ev(),o=0;i&&o<r.activeTargetIds.length;++o)i=od(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(vh("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),ok=function(){function e(t,n){Ze(this,e),this.clientId=t,this.onlineState=n}return Ye(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(vh("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),uk=function(){function e(){Ze(this,e),this.activeTargetIds=Ev()}return Ye(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),sk=function(){function e(t,n,r,i,a){Ze(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Vd(Lh),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=ek(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new uk),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return Ye(e,[{key:"start",value:function(){var e=Eo(Ea().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=Sa(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(ek(this.persistenceKey,i)))&&(o=ak.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(u=this.storage.getItem(this.mr))&&(s=this.pr(u))&&this.Ir(s),c=Sa(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ur(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(nk(this.persistenceKey,e));if(n){var r=ik.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(nk(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ph("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ph("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ph("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ph("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void vh("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(Eo(Ea().mark((function e(){var r,i,a,o,u,s,c;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(u));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}s=function(e){var t=Rh.A;if(null!=e)try{var n=JSON.parse(e);kh("number"==typeof n),t=n}catch(e){vh("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Rh.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new rk(this.currentUser,e,t,n),i=tk(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=tk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=nk(this.persistenceKey,e),i=new ik(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return ak.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return rk.tr(new lh(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return ik.tr(r,t)}},{key:"pr",value:function(e){return ok.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:ph("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Lr(o,u).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=Ev();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ck=function(){function e(){Ze(this,e),this.Ur=new uk,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ye(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new uk,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),lk=function(){function e(){Ze(this,e)}return Ye(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),fk=function(){function e(){var t=this;Ze(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return Ye(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){ph("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Sa(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){ph("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Sa(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),hk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},dk=function(){function e(t){Ze(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return Ye(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),pk=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Ye(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new sh;o.listenOnce(rh.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case nh.NO_ERROR:var t=o.getResponseJson();ph("Connection","XHR received:",JSON.stringify(t)),i(t);break;case nh.TIMEOUT:ph("Connection",'RPC "'+e+'" timed out'),a(new _h(bh.DEADLINE_EXCEEDED,"Request time out"));break;case nh.HTTP_ERROR:var n=o.getStatus();if(ph("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(bh).indexOf(t)>=0?t:bh.UNKNOWN}(r.status);a(new _h(u,r.message))}else a(new _h(bh.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new _h(bh.UNAVAILABLE,"Connection failed."));break;default:gh()}}finally{ph("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=eh(),a=th(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new oh({})),this.lo(o.initMessageHeaders,t,n),za()||Ha()||Ba().indexOf("Electron/")>=0||Ga()||Ba().indexOf("MSAppHost/")>=0||Ka()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");ph("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new dk({Jr:function(e){l?ph("Connection","Not sending because WebChannel is closed:",e):(c||(ph("Connection","Opening WebChannel transport."),s.open(),c=!0),ph("Connection","WebChannel sending:",e),s.send(e))},Yr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,uh.EventType.OPEN,(function(){l||ph("Connection","WebChannel transport opened.")})),h(s,uh.EventType.CLOSE,(function(){l||(l=!0,ph("Connection","WebChannel transport closed"),f.ro())})),h(s,uh.EventType.ERROR,(function(e){l||(l=!0,yh("Connection","WebChannel transport errored:",e),f.ro(new _h(bh.UNAVAILABLE,"The operation could not be completed")))})),h(s,uh.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];kh(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){ph("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=uv[e];if(void 0!==t)return dv(t)}(a),u=i.message;void 0===o&&(o=bh.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.ro(new _h(o,u)),s.close()}else ph("Connection","WebChannel received:",n),f.oo(n)}})),h(a,ih.STAT_EVENT,(function(e){e.stat===ah.PROXY?ph("Connection","Detected buffering proxy"):e.stat===ah.NOPROXY&&ph("Connection","Detected no buffering proxy")})),setTimeout((function(){f.io()}),0),f}}]),n}(function(){function e(t){Ze(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ye(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);ph("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return ph("RestConnection","Received: ",e),e}),(function(t){throw yh("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+fh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=hk[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function vk(){return"undefined"!=typeof window?window:null}function yk(){return"undefined"!=typeof document?document:null}function mk(e){return new Mv(e,!0)}var gk=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Ze(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return Ye(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&ph("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),kk=function(){function e(t,n,r,i,a,o,u,s){Ze(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new gk(t,n)}return Ye(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===bh.RESOURCE_EXHAUSTED?(vh(n.toString()),vh("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===bh.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=Be(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new _h(bh.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(Eo(Ea().mark((function t(){return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return ph("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(ph("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),wk=function(e){jt(n,e);var t=zt(n);function n(e,r,i,a,o,u){var s;return Ze(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return Ye(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:gh()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(kh(void 0===t||"string"==typeof t),Zh.fromBase64String(t||"")):(kh(void 0===t||t instanceof Uint8Array),Zh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?bh.UNKNOWN:dv(e.code);return new _h(t,e.message||"")}(o);n=new Nv(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Wv(e,s.document.name),l=qv(s.document.updateTime),f=new Nd({mapValue:{fields:s.document.fields}}),h=Ad.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Tv(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Wv(e,v.document),m=v.readTime?qv(v.readTime):Uh.min(),g=Ad.newNoDocument(y,m),k=v.removedTargetIds||[];n=new Tv([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Wv(e,w.document),_=w.removedTargetIds||[];n=new Tv([],_,b,null)}else{if(!("filter"in t))return gh();t.filter;var x=t.filter;x.targetId;var E=x.count||0,I=new fv(E),S=x.targetId;n=new Cv(S,I)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Uh.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Uh.min():t.readTime?qv(t.readTime):Uh.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=Gv(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=$d(r)?{documents:ey(e,r)}:{query:ty(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=jv(e,t.resumeToken):t.snapshotVersion.compareTo(Uh.min())>0&&(n.readTime=Fv(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gh()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=Gv(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(kk),bk=function(e){jt(n,e);var t=zt(n);function n(e,r,i,a,o,u){var s;return Ze(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.Yo=!1,s}return Ye(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,Ft(Lt(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(kh(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(kh(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?qv(e.updateTime):qv(t);return n.isEqual(Uh.min())&&(n=qv(t)),new Gp(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=qv(e.commitTime);return this.listener.tu(n,t)}return kh(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=Gv(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Xv(t.M,e)}))};this.Lo(n)}}]),n}(kk),_k=function(e){jt(n,e);var t=zt(n);function n(e,r,i,a){var o;return Ze(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return Ye(n,[{key:"iu",value:function(){if(this.su)throw new _h(bh.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Be(i,2),o=a[0],u=a[1];return r.So.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bh.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new _h(bh.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Be(i,2),o=a[0],u=a[1];return r.So._o(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bh.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new _h(bh.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return Ye((function e(){Ze(this,e)}))}()),xk=function(){function e(t,n){Ze(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return Ye(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(vh(t),this.uu=!1):ph("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),Ek=Ye((function e(t,n,r,i,a){var o=this;Ze(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr((function(e){r.enqueueAndForget(Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Lk(o),!e.t0){e.next=5;break}return ph("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wh(t)).wu.add(4),e.next=4,Tk(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,Ik(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new xk(r,i)}));function Ik(e){return Sk.apply(this,arguments)}function Sk(){return Sk=Eo(Ea().mark((function e(t){var n,r,i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Lk(t)){e.next=18;break}n=Sa(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Sk.apply(this,arguments)}function Tk(e){return Ck.apply(this,arguments)}function Ck(){return Ck=Eo(Ea().mark((function e(t){var n,r,i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Sa(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Ck.apply(this,arguments)}function Nk(e,t){var n=wh(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),Dk(n)?Ok(n):lw(n).Mo()&&Ak(n,t))}function Pk(e,t){var n=wh(e),r=lw(n);n._u.delete(t),r.Mo()&&Rk(n,t),0===n._u.size&&(r.Mo()?r.$o():Lk(n)&&n.yu.set("Unknown"))}function Ak(e,t){e.pu.Z(t.targetId),lw(e).Ho(t)}function Rk(e,t){e.pu.Z(t),lw(e).Jo(t)}function Ok(e){e.pu=new Av({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),lw(e).start(),e.yu.au()}function Dk(e){return Lk(e)&&!lw(e).ko()&&e._u.size>0}function Lk(e){return 0===wh(e).wu.size}function Mk(e){e.pu=void 0}function Fk(e){return jk.apply(this,arguments)}function jk(){return jk=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){Ak(t,e)}));case 1:case"end":return e.stop()}}),e)}))),jk.apply(this,arguments)}function Uk(e,t){return qk.apply(this,arguments)}function qk(){return qk=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Mk(t),Dk(t)?(t.yu.lu(n),Ok(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),qk.apply(this,arguments)}function Vk(e,t,n){return Bk.apply(this,arguments)}function Bk(){return Bk=Eo(Ea().mark((function e(t,n,r){var i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof Nv&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Eo(Ea().mark((function e(t,n){var r,i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Sa(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ph("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,zk(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Tv?t.pu.ut(n):n instanceof Cv?t.pu._t(n):t.pu.ht(n),r.isEqual(Uh.min())){e.next=29;break}return e.prev=14,e.next=17,Cg(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(Zh.EMPTY_BYTE_STRING,n.snapshotVersion)),Rk(e,t);var r=new tm(n.target,t,1,n.sequenceNumber);Ak(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ph("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,zk(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Bk.apply(this,arguments)}function zk(e,t,n){return Wk.apply(this,arguments)}function Wk(){return Wk=Eo(Ea().mark((function e(t,n,r){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ky(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,Tk(t);case 5:t.yu.set("Offline"),r||(r=function(){return Cg(t.localStore)}),t.asyncQueue.enqueueRetryable(Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ph("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,Ik(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Wk.apply(this,arguments)}function Kk(e,t){return t().catch((function(n){return zk(e,n,t)}))}function Hk(e){return Gk.apply(this,arguments)}function Gk(){return Gk=Eo(Ea().mark((function e(t){var n,r,i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=wh(t),r=fw(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!Zk(n)){e.next=19;break}return e.prev=3,e.next=6,Ag(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,Qk(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,zk(n,e.t0);case 17:e.next=2;break;case 19:Yk(n)&&$k(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Gk.apply(this,arguments)}function Zk(e){return Lk(e)&&e.du.length<10}function Qk(e,t){e.du.push(t);var n=fw(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function Yk(e){return Lk(e)&&!fw(e).ko()&&e.du.length>0}function $k(e){fw(e).start()}function Xk(e){return Jk.apply(this,arguments)}function Jk(){return Jk=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fw(t).nu();case 1:case"end":return e.stop()}}),e)}))),Jk.apply(this,arguments)}function ew(e){return tw.apply(this,arguments)}function tw(){return tw=Eo(Ea().mark((function e(t){var n,r,i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=fw(t),r=Sa(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),tw.apply(this,arguments)}function nw(e,t,n){return rw.apply(this,arguments)}function rw(){return rw=Eo(Ea().mark((function e(t,n,r){var i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=Jy.from(i,n,r),e.next=3,Kk(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Hk(t);case 5:case"end":return e.stop()}}),e)}))),rw.apply(this,arguments)}function iw(e,t){return aw.apply(this,arguments)}function aw(){return aw=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&fw(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Eo(Ea().mark((function e(t,n){var r,i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!hv(i=n.code)||i===bh.ABORTED){e.next=7;break}return r=t.du.shift(),fw(t).Fo(),e.next=5,Kk(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Hk(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Yk(t)&&$k(t);case 5:case"end":return e.stop()}}),e)}))),aw.apply(this,arguments)}function ow(e,t){return uw.apply(this,arguments)}function uw(){return uw=Eo(Ea().mark((function e(t,n){var r,i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=wh(t)).asyncQueue.verifyOperationInProgress(),ph("RemoteStore","RemoteStore received new credentials"),i=Lk(r),r.wu.add(3),e.next=6,Tk(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,Ik(r);case 12:case"end":return e.stop()}}),e)}))),uw.apply(this,arguments)}function sw(e,t){return cw.apply(this,arguments)}function cw(){return cw=Eo(Ea().mark((function e(t,n){var r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wh(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,Ik(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,Tk(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),cw.apply(this,arguments)}function lw(e){return e.Iu||(e.Iu=function(e,t,n){var r=wh(e);return r.iu(),new wk(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Fk.bind(null,e),eo:Uk.bind(null,e),zo:Vk.bind(null,e)}),e.mu.push(function(){var t=Eo(Ea().mark((function t(n){return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),Dk(e)?Ok(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:Mk(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function fw(e){return e.Tu||(e.Tu=function(e,t,n){var r=wh(e);return r.iu(),new bk(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Xk.bind(null,e),eo:iw.bind(null,e),eu:ew.bind(null,e),tu:nw.bind(null,e)}),e.mu.push(function(){var t=Eo(Ea().mark((function t(n){return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,Hk(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(ph("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var hw=function(){function e(t,n,r,i,a){Ze(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new xh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ye(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _h(bh.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function dw(e,t){if(vh("AsyncQueue","".concat(t,": ").concat(e)),Ky(e))return new _h(bh.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var pw=function(){function e(t){Ze(this,e),this.comparator=t?function(e,n){return t(e,n)||ud.comparator(e.key,n.key)}:function(e,t){return ud.comparator(e.key,t.key)},this.keyedMap=gv(),this.sortedSet=new Vd(this.comparator)}return Ye(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),vw=function(){function e(){Ze(this,e),this.Eu=new Vd(ud.comparator)}return Ye(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):gh():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),yw=function(){function e(t,n,r,i,a,o,u,s){Ze(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Ye(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ep(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,pw.emptySet(n),a,r,i,!0,!1)}}]),e}(),mw=Ye((function e(){Ze(this,e),this.Ru=void 0,this.listeners=[]})),gw=Ye((function e(){Ze(this,e),this.queries=new pv((function(e){return Ip(e)}),Ep),this.onlineState="Unknown",this.bu=new Set}));function kw(e,t){return ww.apply(this,arguments)}function ww(){return ww=Eo(Ea().mark((function e(t,n){var r,i,a,o,u;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wh(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new mw),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=dw(e.t0,"Initialization of query '".concat(Sp(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&Iw(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),ww.apply(this,arguments)}function bw(e,t){return _w.apply(this,arguments)}function _w(){return _w=Eo(Ea().mark((function e(t,n){var r,i,a,o,u;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wh(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),_w.apply(this,arguments)}function xw(e,t){var n,r=wh(e),i=!1,a=Sa(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Sa(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&Iw(r)}function Ew(e,t,n){var r=wh(e),i=r.queries.get(t);if(i){var a,o=Sa(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Iw(e){e.bu.forEach((function(e){e.next()}))}var Sw=function(){function e(t,n,r){Ze(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return Ye(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Sa(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new yw(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=yw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),Tw=function(){function e(t,n){Ze(this,e),this.payload=t,this.byteLength=n}return Ye(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),Cw=function(){function e(t){Ze(this,e),this.M=t}return Ye(e,[{key:"wi",value:function(e){return Wv(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?Yv(this.M,e.document,!1):Ad.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return qv(e)}}]),e}(),Nw=function(){function e(t,n,r){Ze(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Pw(t)}return Ye(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Wh.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new Cw(this.M),i=Sa(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.wi(a.metadata.name),s=Sa(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||_v()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Eo(Ea().mark((function e(){var t,n,r,i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ug(this.localStore,new Cw(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=Sa(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Vg(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Pw(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Aw=Ye((function e(t){Ze(this,e),this.key=t})),Rw=Ye((function e(t){Ze(this,e),this.key=t})),Ow=function(){function e(t,n){Ze(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=_v(),this.mutatedKeys=_v(),this.Gu=Np(t),this.Qu=new pw(this.Gu)}return Ye(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new vw,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Tp(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gh()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new yw(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new vw,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=_v(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Rw(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new Aw(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=_v();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return yw.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),Dw=Ye((function e(t,n,r){Ze(this,e),this.query=t,this.targetId=n,this.view=r})),Lw=Ye((function e(t){Ze(this,e),this.key=t,this.na=!1})),Mw=function(){function e(t,n,r,i,a,o){Ze(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new pv((function(e){return Ip(e)}),Ep),this.ra=new Map,this.oa=new Set,this.ua=new Vd(ud.comparator),this.aa=new Map,this.ca=new Kg,this.ha={},this.la=new Map,this.fa=Hm.yn(),this.onlineState="Unknown",this.da=void 0}return Ye(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function Fw(e,t){return jw.apply(this,arguments)}function jw(){return jw=Eo(Ea().mark((function e(t,n){var r,i,a,o,u,s;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Pb(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,Rg(r.localStore,_p(n));case 8:return u=e.sent,r.isPrimaryClient&&Nk(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Uw(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),jw.apply(this,arguments)}function Uw(e,t,n,r){return qw.apply(this,arguments)}function qw(){return qw=Eo(Ea().mark((function e(t,n,r,i){var a,o,u,s,c,l;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=Eo(Ea().mark((function e(t,n,r,i){var a,o,u;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,Lg(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(ob(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Lg(t.localStore,n,!0);case 3:return a=e.sent,o=new Ow(n,a._i),u=o.Wu(a.documents),s=Sv.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),ob(t,r,c.Xu),l=new Dw(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),qw.apply(this,arguments)}function Vw(e,t){return Bw.apply(this,arguments)}function Bw(){return Bw=Eo(Ea().mark((function e(t,n){var r,i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wh(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!Ep(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Og(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Pk(r.remoteStore,i.targetId),ib(r,i.targetId)})).catch($m);case 9:e.next=14;break;case 11:return ib(r,i.targetId),e.next=14,Og(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Bw.apply(this,arguments)}function zw(e,t,n){return Ww.apply(this,arguments)}function Ww(){return Ww=Eo(Ea().mark((function e(t,n,r){var i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ab(t),e.prev=1,e.next=4,function(e,t){var n,r=wh(e),i=jh.now(),a=t.reduce((function(e,t){return e.add(t.key)}),_v());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,u=[],s=Sa(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Jp(c,n.get(c.key));null!=l&&u.push(new rv(c.key,l,Pd(l.value.mapValue),Zp.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new Vd(Lh)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,cb(i,a.changes);case 9:return e.next=11,Hk(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=dw(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Ww.apply(this,arguments)}function Kw(e,t){return Hw.apply(this,arguments)}function Hw(){return Hw=Eo(Ea().mark((function e(t,n){var r,i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wh(t),e.prev=1,e.next=4,Ng(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(kh(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?kh(n.na):e.removedDocuments.size>0&&(kh(n.na),n.na=!1))})),e.next=8,cb(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,$m(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Hw.apply(this,arguments)}function Gw(e,t,n){var r=wh(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=wh(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Sa(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Iw(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Zw(e,t,n){return Qw.apply(this,arguments)}function Qw(){return Qw=Eo(Ea().mark((function e(t,n,r){var i,a,o,u,s,c;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=wh(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Vd(ud.comparator)).insert(o,Ad.newNoDocument(o,Uh.min())),s=_v().add(o),c=new Iv(Uh.min(),new Map,new Wd(Lh),u,s),e.next=9,Kw(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),sb(i),e.next=16;break;case 14:return e.next=16,Og(i.localStore,n,!1).then((function(){return ib(i,n,r)})).catch($m);case 16:case"end":return e.stop()}}),e)}))),Qw.apply(this,arguments)}function Yw(e,t){return $w.apply(this,arguments)}function $w(){return $w=Eo(Ea().mark((function e(t,n){var r,i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wh(t),i=n.batch.batchId,e.prev=1,e.next=4,Tg(r.localStore,n);case 4:return a=e.sent,rb(r,i,null),nb(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,cb(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,$m(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),$w.apply(this,arguments)}function Xw(e,t,n){return Jw.apply(this,arguments)}function Jw(){return Jw=Eo(Ea().mark((function e(t,n,r){var i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wh(t),e.prev=1,e.next=4,function(e,t){var n=wh(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return kh(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,rb(i,n,r),nb(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,cb(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,$m(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Jw.apply(this,arguments)}function eb(e,t){return tb.apply(this,arguments)}function tb(){return tb=Eo(Ea().mark((function e(t,n){var r,i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lk((r=wh(t)).remoteStore)||ph("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=wh(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=dw(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),tb.apply(this,arguments)}function nb(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function rb(e,t,n){var r=wh(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function ib(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Sa(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||ab(e,t)}))}function ab(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(Pk(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),sb(e))}function ob(e,t,n){var r,i=Sa(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Aw?(e.ca.addReference(a.key,t),ub(e,a)):a instanceof Rw?(ph("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||ab(e,a.key)):gh()}}catch(o){i.e(o)}finally{i.f()}}function ub(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(ph("SyncEngine","New document in limbo: "+n),e.oa.add(r),sb(e))}function sb(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new ud(Wh.fromString(t)),r=e.fa.next();e.aa.set(r,new Lw(n)),e.ua=e.ua.insert(n,r),Nk(e.remoteStore,new tm(_p(mp(n.path)),r,2,Rh.A))}}function cb(e,t,n){return lb.apply(this,arguments)}function lb(){return lb=Eo(Ea().mark((function e(t,n,r){var i,a,o,u;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wh(t),a=[],o=[],u=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){u.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=bg.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sa.zo(a),e.next=9,function(){var e=Eo(Ea().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wh(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return qy.forEach(n,(function(t){return qy.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return qy.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ky(e.t0)){e.next=10;break}throw e.t0;case 10:ph("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Sa(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),lb.apply(this,arguments)}function fb(e,t){return hb.apply(this,arguments)}function hb(){return hb=Eo(Ea().mark((function e(t,n){var r,i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=wh(t)).currentUser.isEqual(n)){e.next=11;break}return ph("SyncEngine","User change. New user:",n.toKey()),e.next=5,Ig(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new _h(bh.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,cb(r,i.di);case 11:case"end":return e.stop()}}),e)}))),hb.apply(this,arguments)}function db(e,t){var n=wh(e),r=n.aa.get(t);if(r&&r.na)return _v().add(r.key);var i=_v(),a=n.ra.get(t);if(!a)return i;var o,u=Sa(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ia.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function pb(e,t){return vb.apply(this,arguments)}function vb(){return vb=Eo(Ea().mark((function e(t,n){var r,i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wh(t),e.next=3,Lg(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&ob(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),vb.apply(this,arguments)}function yb(e,t){return mb.apply(this,arguments)}function mb(){return mb=Eo(Ea().mark((function e(t,n){var r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wh(t),e.abrupt("return",Fg(r.localStore,n).then((function(e){return cb(r,e)})));case 2:case"end":return e.stop()}}),e)}))),mb.apply(this,arguments)}function gb(e,t,n,r){return kb.apply(this,arguments)}function kb(){return kb=Eo(Ea().mark((function e(t,n,r,i){var a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wh(t),e.next=3,function(e,t){var n=wh(e),r=wh(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):qy.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Hk(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(rb(a,n,i||null),nb(a,n),function(e,t){wh(wh(e).Bs)._n(t)}(a.localStore,n)):gh();case 11:return e.next=13,cb(a,o);case 13:e.next=16;break;case 15:ph("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),kb.apply(this,arguments)}function wb(e,t){return bb.apply(this,arguments)}function bb(){return bb=Eo(Ea().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pb(r=wh(t)),Ab(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,_b(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,sw(r.remoteStore,!0);case 9:o=Sa(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Nk(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],l=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return ib(r,t),Og(r.localStore,t,!0)})),Pk(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,_b(r,c);case 21:return function(e){var t=wh(e);t.aa.forEach((function(e,n){Pk(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new Vd(ud.comparator)}(r),r.da=!1,e.next=25,sw(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),bb.apply(this,arguments)}function _b(e,t,n){return xb.apply(this,arguments)}function xb(){return xb=Eo(Ea().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=wh(t),a=[],o=[],u=Sa(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ra.get(c))||0===f.length){e.next=34;break}return e.next=11,Rg(i.localStore,_p(f[0]));case 11:l=e.sent,h=Sa(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ia.get(p),e.next=20,pb(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Mg(i.localStore,c);case 36:return m=e.sent,e.next=39,Rg(i.localStore,m);case 39:return l=e.sent,e.next=42,Uw(i,Eb(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),xb.apply(this,arguments)}function Eb(e){return yp(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ib(e){var t=wh(e);return wh(wh(t.localStore).persistence).Fs()}function Sb(e,t,n,r){return Tb.apply(this,arguments)}function Tb(){return Tb=Eo(Ea().mark((function e(t,n,r,i){var a,o,u,s;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=wh(t)).da){e.next=3;break}return e.abrupt("return",void ph("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Fg(a.localStore,Cp(o[0]));case 10:return u=e.sent,s=Iv.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,cb(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Og(a.localStore,n,!0);case 17:return ib(a,n,i),e.abrupt("break",20);case 19:gh();case 20:case"end":return e.stop()}}),e)}))),Tb.apply(this,arguments)}function Cb(e,t,n){return Nb.apply(this,arguments)}function Nb(){return Nb=Eo(Ea().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Pb(t)).da){e.next=45;break}a=Sa(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ra.has(u)){e.next=10;break}return ph("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Mg(i.localStore,u);case 12:return s=e.sent,e.next=15,Rg(i.localStore,s);case 15:return c=e.sent,e.next=18,Uw(i,Eb(s),c.targetId,!1);case 18:Nk(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Sa(r),e.prev=30,h=Ea().mark((function e(){var t;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,Og(i.localStore,t,!1).then((function(){Pk(i.remoteStore,t),ib(i,t)})).catch($m);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Nb.apply(this,arguments)}function Pb(e){var t=wh(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Kw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=db.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Zw.bind(null,t),t.sa.zo=xw.bind(null,t.eventManager),t.sa.wa=Ew.bind(null,t.eventManager),t}function Ab(e){var t=wh(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Yw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Xw.bind(null,t),t}function Rb(e,t,n){var r=wh(e);(function(){var e=Eo(Ea().mark((function e(t,n,r){var i,a,o,u,s;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=wh(e),r=qv(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Pw(i)),a=new Nw(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,cb(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=wh(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(yh("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Ob=function(){function e(){Ze(this,e),this.synchronizeTabs=!1}return Ye(e,[{key:"initialize",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=mk(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return Eg(this.persistence,new _g,e.initialUser,this.M)}},{key:"ya",value:function(e){return new $g(Jg.Yi,this.M)}},{key:"ga",value:function(e){return new ck}},{key:"terminate",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Db=function(e){jt(n,e);var t=zt(n);function n(e,r,i){var a;return Ze(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ye(n,[{key:"initialize",value:function(){var e=Eo(Ea().mark((function e(t){var r=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(Lt(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,Ab(this.Ta.syncEngine);case 6:return e.next=8,Hk(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){return Eg(this.persistence,new _g,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new tg(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=kg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?jm.withCacheSize(this.cacheSizeBytes):jm.DEFAULT;return new yg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,vk(),yk(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new ck}}]),n}(Ob),Lb=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ye(n,[{key:"initialize",value:function(){var e=Eo(Ea().mark((function e(t){var r,i=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(Lt(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof sk,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:gb.bind(null,r),Br:Sb.bind(null,r),Lr:Cb.bind(null,r),Fs:Ib.bind(null,r),Fr:yb.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wb(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){var t=vk();if(!sk.vt(t))throw new _h(bh.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=kg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sk(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Db),Mb=function(){function e(){Ze(this,e)}return Ye(e,[{key:"initialize",value:function(){var e=Eo(Ea().mark((function e(t,n){var r=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Gw(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=fb.bind(null,this.syncEngine),e.next=12,sw(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new gw}},{key:"createDatastore",value:function(e){var t,n=mk(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new pk(t));return function(e,t,n,r){return new _k(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Gw(o.syncEngine,e,0)},a=fk.vt()?new fk:new lk,new Ek(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Mw(e,t,n,r,i,a);return o&&(u.da=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wh(t),ph("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,Tk(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Fb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Eo(Ea().mark((function r(){var i;return Ea().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var jb=function(){function e(t){Ze(this,e),this.observer=t,this.muted=!1}return Ye(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Ub=function(){function e(t,n){var r=this;Ze(this,e),this.Ra=t,this.M=n,this.metadata=new xh,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Ye(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ma",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){var e=Eo(Ea().mark((function e(){var t,n,r,i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new Tw(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=Eo(Ea().mark((function e(){var t,n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Da()<0)){e.next=7;break}return e.next=3,this.Ca();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=Eo(Ea().mark((function e(){var t,n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),qb=function(){function e(t){Ze(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ye(e,[{key:"lookup",value:function(){var e=Eo(Ea().mark((function e(t){var n,r=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new _h(bh.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Eo(Ea().mark((function e(t,n){var r,i,a,o,u,s;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wh(t),i=Gv(r.M)+"/documents",a={documents:n.map((function(e){return zv(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=$v(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());kh(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new cv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Eo(Ea().mark((function e(){var t,n=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ud.fromPath(t);n.mutations.push(new lv(r,n.precondition(r)))})),e.next=7,function(){var e=Eo(Ea().mark((function e(t,n){var r,i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wh(t),i=Gv(r.M)+"/documents",a={writes:n.map((function(e){return Xv(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gh();t=Uh.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new _h(bh.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Zp.updateTime(t):Zp.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Uh.min()))throw new _h(bh.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zp.updateTime(t)}return Zp.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Vb=function(){function e(t,n,r,i,a){Ze(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new gk(this.asyncQueue,"transaction_retry")}return Ye(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(Eo(Ea().mark((function t(){var n,r;return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new qb(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!id(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!hv(t)}return!1}}]),e}(),Bb=function(){function e(t,n,r,i){var a=this;Ze(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=lh.UNAUTHENTICATED,this.clientId=Dh.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ph("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ph("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Ye(e,[{key:"getConfiguration",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new _h(bh.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new xh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Eo(Ea().mark((function n(){var r;return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=dw(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function zb(e,t){return Wb.apply(this,arguments)}function Wb(){return Wb=Eo(Ea().mark((function e(t,n){var r,i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ph("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Ig(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Wb.apply(this,arguments)}function Kb(e,t){return Hb.apply(this,arguments)}function Hb(){return Hb=Eo(Ea().mark((function e(t,n){var r,i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Gb(t);case 3:return r=e.sent,ph("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return ow(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return ow(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Hb.apply(this,arguments)}function Gb(e){return Zb.apply(this,arguments)}function Zb(){return Zb=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ph("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,zb(t,new Ob);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Zb.apply(this,arguments)}function Qb(e){return Yb.apply(this,arguments)}function Yb(){return Yb=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ph("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Kb(t,new Mb);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Yb.apply(this,arguments)}function $b(e){return Gb(e).then((function(e){return e.persistence}))}function Xb(e){return Gb(e).then((function(e){return e.localStore}))}function Jb(e){return Qb(e).then((function(e){return e.remoteStore}))}function e_(e){return Qb(e).then((function(e){return e.syncEngine}))}function t_(e){return n_.apply(this,arguments)}function n_(){return n_=Eo(Ea().mark((function e(t){var n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qb(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Fw.bind(null,n.syncEngine),r.onUnlisten=Vw.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),n_.apply(this,arguments)}function r_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new xh;return e.asyncQueue.enqueueAndForget(Eo(Ea().mark((function i(){return Ea().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new jb({next:function(a){t.enqueueAndForget((function(){return bw(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new _h(bh.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new _h(bh.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Sw(mp(n.path),a,{includeMetadataChanges:!0,ku:!0});return kw(e,o)},i.next=3,t_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function i_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new xh;return e.asyncQueue.enqueueAndForget(Eo(Ea().mark((function i(){return Ea().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new jb({next:function(n){t.enqueueAndForget((function(){return bw(e,o)})),n.fromCache&&"server"===r.source?i.reject(new _h(bh.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Sw(n,a,{includeMetadataChanges:!0,ku:!0});return kw(e,o)},i.next=3,t_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var a_=new Map;function o_(e,t,n){if(!n)throw new _h(bh.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function u_(e,t,n,r){if(!0===t&&!0===r)throw new _h(bh.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function s_(e){if(!ud.isDocumentKey(e))throw new _h(bh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function c_(e){if(ud.isDocumentKey(e))throw new _h(bh.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function l_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":gh()}function f_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _h(bh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=l_(e);throw new _h(bh.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function h_(e,t){if(t<=0)throw new _h(bh.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var d_=function(){function e(t){var n;if(Ze(this,e),void 0===t.host){if(void 0!==t.ssl)throw new _h(bh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new _h(bh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,u_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Ye(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),p_=function(){function e(t,n,r){Ze(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d_({}),this._settingsFrozen=!1,t instanceof rd?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new _h(bh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rd(e.options.projectId)}(t))}return Ye(e,[{key:"app",get:function(){if(!this._app)throw new _h(bh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new _h(bh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ih;switch(e.type){case"gapi":var t=e.client;return kh(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Nh(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new _h(bh.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=a_.get(e);t&&(ph("ComponentProvider","Removing Datastore"),a_.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function v_(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=f_(e,p_))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&yh("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=lh.MOCK_USER;else{o=Va(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new _h(bh.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new lh(s)}e._authCredentials=new Sh(new Eh(o,u))}}var y_=function(){function e(t,n,r){Ze(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ye(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new g_(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),m_=function(){function e(t,n,r){Ze(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ye(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),g_=function(e){jt(n,e);var t=zt(n);function n(e,r,i){var a;return Ze(this,n),(a=t.call(this,e,r,mp(i)))._path=i,a.type="collection",a}return Ye(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new y_(this.firestore,null,new ud(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(m_);function k_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=_o(e),o_("collection","path",t),e instanceof p_){var a=Wh.fromString.apply(Wh,[t].concat(r));return c_(a),new g_(e,null,a)}if(!(e instanceof y_||e instanceof g_))throw new _h(bh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Wh.fromString.apply(Wh,[t].concat(r)));return c_(o),new g_(e.firestore,null,o)}function w_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=_o(e),1===arguments.length&&(t=Dh.R()),o_("doc","path",t),e instanceof p_){var a=Wh.fromString.apply(Wh,[t].concat(r));return s_(a),new y_(e,null,new ud(a))}if(!(e instanceof y_||e instanceof g_))throw new _h(bh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Wh.fromString.apply(Wh,[t].concat(r)));return s_(o),new y_(e.firestore,e instanceof g_?e.converter:null,new ud(o))}function b_(e,t){return e=_o(e),t=_o(t),(e instanceof y_||e instanceof g_)&&(t instanceof y_||t instanceof g_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function __(e,t){return e=_o(e),t=_o(t),e instanceof m_&&t instanceof m_&&e.firestore===t.firestore&&Ep(e._query,t._query)&&e.converter===t.converter}var x_=function(){function e(){var t=this;Ze(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new gk(this,"async_queue_retry"),this.Qa=function(){var e=yk();e&&ph("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=yk();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return Ye(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=yk();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new xh;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=Eo(Ea().mark((function e(){var t=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ky(e.t0)){e.next=12;break}throw e.t0;case 12:ph("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw vh("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=hw.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&gh()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=Eo(Ea().mark((function e(){var t;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=Sa(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Sa(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function E_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Sa(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var I_=function(){function e(){Ze(this,e),this._progressObserver={},this._taskCompletionResolver=new xh,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ye(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),S_=function(e){jt(n,e);var t=zt(n);function n(e,r,i){var a;return Ze(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new x_,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Ye(n,[{key:"_terminate",value:function(){return this._firestoreClient||C_(this),this._firestoreClient.terminate()}}]),n}(p_);function T_(e){return e._firestoreClient||C_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function C_(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new nd(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Bb(e._authCredentials,e._appCheckCredentials,e._queue,r)}function N_(e,t,n){var r=new xh;return e.asyncQueue.enqueue(Eo(Ea().mark((function i(){return Ea().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,zb(e,n);case 3:return i.next=5,Kb(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===bh.FAILED_PRECONDITION||e.code===bh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function P_(e){return function(e){return e.asyncQueue.enqueue(Eo(Ea().mark((function t(){var n,r;return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$b(e);case 2:return n=t.sent,t.next=5,Jb(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=wh(e);return t.wu.delete(0),Ik(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(T_(e=f_(e,S_)))}function A_(e){return function(e){return e.asyncQueue.enqueue(Eo(Ea().mark((function t(){var n,r;return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$b(e);case 2:return n=t.sent,t.next=5,Jb(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wh(t)).wu.add(0),e.next=4,Tk(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(T_(e=f_(e,S_)))}function R_(e,t){var n=T_(e=f_(e,S_)),r=new I_;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Ub(e,t)}(function(e,t){if(e instanceof Uint8Array)return Fb(e,t);if(e instanceof ArrayBuffer)return Fb(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,mk(t));e.asyncQueue.enqueueAndForget(Eo(Ea().mark((function t(){return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Rb,t.next=3,e_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function O_(e,t){return function(e,t){return e.asyncQueue.enqueue(Eo(Ea().mark((function n(){return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=wh(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,Xb(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(T_(e=f_(e,S_)),t).then((function(t){return t?new m_(e,null,t.query):null}))}function D_(e){if(e._initialized||e._terminated)throw new _h(bh.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var L_=function(){function e(){Ze(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new _h(bh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hh(n)}return Ye(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var M_=function(){function e(t){Ze(this,e),this._byteString=t}return Ye(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Zh.fromBase64String(t))}catch(t){throw new _h(bh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Zh.fromUint8Array(t))}}]),e}(),F_=Ye((function e(t){Ze(this,e),this._methodName=t})),j_=function(){function e(t,n){if(Ze(this,e),!isFinite(t)||t<-90||t>90)throw new _h(bh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new _h(bh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ye(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Lh(this._lat,e._lat)||Lh(this._long,e._long)}}]),e}(),U_=/^__.*__$/,q_=function(){function e(t,n,r){Ze(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ye(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new rv(e,this.data,this.fieldMask,t,this.fieldTransforms):new nv(e,this.data,t,this.fieldTransforms)}}]),e}(),V_=function(){function e(t,n,r){Ze(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ye(e,[{key:"toMutation",value:function(e,t){return new rv(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function B_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gh()}}var z_=function(){function e(t,n,r,i,a,o){Ze(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ye(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return cx(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(B_(this.ec)&&U_.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),W_=function(){function e(t,n,r){Ze(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||mk(t)}return Ye(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new z_({ec:e,methodName:t,hc:n,path:Hh.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function K_(e){var t=e._freezeSettings(),n=mk(e._databaseId);return new W_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function H_(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);ax("Data must be an object, but it was:",o,r);var u,s,c=rx(r,o);if(a.merge)u=new Gh(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Sa(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=ox(t,d,n);if(!o.contains(p))throw new _h(bh.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));lx(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Gh(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new q_(new Nd(c),u,s)}var G_=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(F_);function Z_(e,t,n){return new z_({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var Q_=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"_toFieldTransform",value:function(e){return new Hp(e.path,new jp)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(F_),Y_=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this,e)).fc=r,i}return Ye(n,[{key:"_toFieldTransform",value:function(e){var t=Z_(this,e,!0),n=this.fc.map((function(e){return nx(e,t)})),r=new Up(n);return new Hp(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(F_),$_=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this,e)).fc=r,i}return Ye(n,[{key:"_toFieldTransform",value:function(e){var t=Z_(this,e,!0),n=this.fc.map((function(e){return nx(e,t)})),r=new Vp(n);return new Hp(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(F_),X_=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this,e)).dc=r,i}return Ye(n,[{key:"_toFieldTransform",value:function(e){var t=new zp(e.M,Op(e.M,this.dc));return new Hp(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(F_);function J_(e,t,n,r){var i=e.lc(1,t,n);ax("Data must be an object, but it was:",i,r);var a=[],o=Nd.empty();Vh(r,(function(e,r){var u=sx(t,e,n);r=_o(r);var s=i.oc(u);if(r instanceof G_)a.push(u);else{var c=nx(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Gh(a);return new V_(o,u,i.fieldTransforms)}function ex(e,t,n,r,i,a){var o=e.lc(1,t,n),u=[ox(t,r,n)],s=[i];if(a.length%2!=0)throw new _h(bh.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(ox(t,a[c])),s.push(a[c+1]);for(var l=[],f=Nd.empty(),h=u.length-1;h>=0;--h)if(!lx(l,u[h])){var d=u[h],p=s[h];p=_o(p);var v=o.oc(d);if(p instanceof G_)l.push(d);else{var y=nx(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Gh(l);return new V_(f,m,o.fieldTransforms)}function tx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return nx(n,e.lc(r?4:3,t))}function nx(e,t){if(ix(e=_o(e)))return ax("Unsupported field value:",t,e),rx(e,t);if(e instanceof F_)return function(e,t){if(!B_(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Sa(e);try{for(a.s();!(n=a.n()).done;){var o=nx(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=_o(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Op(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=jh.fromDate(e);return{timestampValue:Fv(t.M,n)}}if(e instanceof jh){var r=new jh(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Fv(t.M,r)}}if(e instanceof j_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof M_)return{bytesValue:jv(t.M,e._byteString)};if(e instanceof y_){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Vv(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(l_(e)))}(e,t)}function rx(e,t){var n={};return Bh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vh(e,(function(e,r){var i=nx(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ix(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof jh||e instanceof j_||e instanceof M_||e instanceof y_||e instanceof F_)}function ax(e,t,n){if(!ix(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=l_(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function ox(e,t,n){if((t=_o(t))instanceof L_)return t._internalPath;if("string"==typeof t)return sx(e,t);throw cx("Field path arguments must be of type string or ",e,!1,void 0,n)}var ux=new RegExp("[~\\*/\\[\\]]");function sx(e,t,n){if(t.search(ux)>=0)throw cx("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Ta(L_,Ge(t.split(".")))._internalPath}catch(r){throw cx("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function cx(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new _h(bh.INVALID_ARGUMENT,u+e+s)}function lx(e,t){return e.some((function(e){return e.isEqual(t)}))}var fx=function(){function e(t,n,r,i,a){Ze(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ye(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new y_(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new hx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(dx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),hx=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"data",value:function(){return Ft(Lt(n.prototype),"data",this).call(this)}}]),n}(fx);function dx(e,t){return"string"==typeof t?sx(e,t):t instanceof L_?t._internalPath:t._delegate._internalPath}var px=function(){function e(t,n){Ze(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ye(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),vx=function(e){jt(n,e);var t=zt(n);function n(e,r,i,a,o,u){var s;return Ze(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ye(n,[{key:"exists",value:function(){return Ft(Lt(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new yx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(dx("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(fx),yx=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ft(Lt(n.prototype),"data",this).call(this,e)}}]),n}(vx),mx=function(){function e(t,n,r,i){Ze(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new px(i.hasPendingWrites,i.fromCache),this.query=r}return Ye(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new yx(n._firestore,n._userDataWriter,r.key,r,new px(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _h(bh.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new yx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new px(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new yx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new px(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:gx(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function gx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gh()}}function kx(e,t){return e instanceof vx&&t instanceof vx?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof mx&&t instanceof mx&&e._firestore===t._firestore&&__(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function wx(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new _h(bh.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bx=Ye((function e(){Ze(this,e)}));function _x(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var xx=function(e){jt(n,e);var t=zt(n);function n(e,r,i){var a;return Ze(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return Ye(n,[{key:"_apply",value:function(e){var t=K_(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new _h(bh.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Dx(o,a);var s,c=[],l=Sa(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Ox(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=Ox(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Dx(o,a),u=tx(n,"where",o,"in"===a||"not-in"===a);var h=tp.create(i,a,u);return function(e,t){if(t.S()){var n=kp(e);if(null!==n&&!n.isEqual(t.field))throw new _h(bh.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=gp(e);null!==r&&Lx(e,t.field,r)}var i=function(e,t){var n,r=Sa(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new _h(bh.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new _h(bh.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new m_(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new vp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(bx);var Ex=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return Ye(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new _h(bh.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new _h(bh.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new fp(t,n);return function(e,t){if(null===gp(e)){var n=kp(e);null!==n&&Lx(e,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new m_(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new vp(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(bx);var Ix=function(e){jt(n,e);var t=zt(n);function n(e,r,i){var a;return Ze(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return Ye(n,[{key:"_apply",value:function(e){return new m_(e.firestore,e.converter,xp(e._query,this.yc,this.Ic))}}]),n}(bx);var Sx=function(e){jt(n,e);var t=zt(n);function n(e,r,i){var a;return Ze(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return Ye(n,[{key:"_apply",value:function(e){var t=Rx(e,this.type,this.Tc,this.Ec);return new m_(e.firestore,e.converter,function(e,t){return new vp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(bx);function Tx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Sx("startAt",t,!0)}function Cx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Sx("startAfter",t,!1)}var Nx=function(e){jt(n,e);var t=zt(n);function n(e,r,i){var a;return Ze(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return Ye(n,[{key:"_apply",value:function(e){var t=Rx(e,this.type,this.Tc,this.Ec);return new m_(e.firestore,e.converter,function(e,t){return new vp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(bx);function Px(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Nx("endBefore",t,!1)}function Ax(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Nx("endAt",t,!0)}function Rx(e,t,n,r){if(n[0]=_o(n[0]),n[0]instanceof fx)return function(e,t,n,r,i){if(!r)throw new _h(bh.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Sa(bp(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(md(t,r.key));else{var c=r.data.field(s.field);if(Jh(c))throw new _h(bh.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new _h(bh.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new lp(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=K_(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new _h(bh.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new _h(bh.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!wp(e)&&-1!==c.indexOf("/"))throw new _h(bh.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Wh.fromString(c));if(!ud.isDocumentKey(l))throw new _h(bh.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new ud(l);u.push(md(t,f))}else{var h=tx(n,r,c);u.push(h)}}return new lp(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Ox(e,t,n){if("string"==typeof(n=_o(n))){if(""===n)throw new _h(bh.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wp(t)&&-1!==n.indexOf("/"))throw new _h(bh.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Wh.fromString(n));if(!ud.isDocumentKey(r))throw new _h(bh.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return md(e,new ud(r))}if(n instanceof y_)return md(e,n._key);throw new _h(bh.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(l_(n),"."))}function Dx(e,t){if(!Array.isArray(e)||0===e.length)throw new _h(bh.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new _h(bh.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Lx(e,t,n){if(!n.isEqual(t))throw new _h(bh.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Mx={maxAttempts:5},Fx=function(){function e(){Ze(this,e)}return Ye(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ld(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $h(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gh()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Vh(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new j_($h(e.latitude),$h(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=ed(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(td(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Yh(e);return new jh(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Wh.fromString(e);kh(fy(n));var r=new rd(n.get(1),n.get(3)),i=new ud(n.popFirst(5));return r.isEqual(t)||vh("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function jx(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Ux=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this)).firestore=e,r}return Ye(n,[{key:"convertBytes",value:function(e){return new M_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new y_(this.firestore,null,t)}}]),n}(Fx),qx=function(){function e(t,n){Ze(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=K_(t)}return Ye(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Vx(e,this._firestore),i=jx(r.converter,t,n),a=H_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Zp.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Vx(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=_o(t))||t instanceof L_?ex(this._dataReader,"WriteBatch.update",i._key,t,n,o):J_(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Zp.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Vx(e,this._firestore);return this._mutations=this._mutations.concat(new cv(t._key,Zp.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new _h(bh.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Vx(e,t){if((e=_o(e)).firestore!==t)throw new _h(bh.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Bx=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this)).firestore=e,r}return Ye(n,[{key:"convertBytes",value:function(e){return new M_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new y_(this.firestore,null,t)}}]),n}(Fx);function zx(e){e=f_(e,y_);var t=f_(e.firestore,S_),n=T_(t),r=new Bx(t);return function(e,t){var n=new xh;return e.asyncQueue.enqueueAndForget(Eo(Ea().mark((function r(){return Ea().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Eo(Ea().mark((function e(t,n,r){var i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=wh(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new _h(bh.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=dw(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Xb(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new vx(t,r,e._key,n,new px(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Wx(e){e=f_(e,m_);var t=f_(e.firestore,S_),n=T_(t),r=new Bx(t);return function(e,t){var n=new xh;return e.asyncQueue.enqueueAndForget(Eo(Ea().mark((function r(){return Ea().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Eo(Ea().mark((function e(t,n,r){var i,a,o,u,s;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lg(t,n,!0);case 3:i=e.sent,a=new Ow(n,i._i),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=dw(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Xb(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new mx(t,r,e,n)}))}function Kx(e,t,n){e=f_(e,y_);var r=f_(e.firestore,S_),i=jx(e.converter,t,n);return Qx(r,[H_(K_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Zp.none())])}function Hx(e,t,n){e=f_(e,y_);for(var r=f_(e.firestore,S_),i=K_(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Qx(r,[("string"==typeof(t=_o(t))||t instanceof L_?ex(i,"updateDoc",e._key,t,n,o):J_(i,"updateDoc",e._key,t)).toMutation(e._key,Zp.exists(!0))])}function Gx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=_o(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||E_(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(E_(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof y_)l=f_(e.firestore,S_),f=mp(e._key.path),c={next:function(t){n[s]&&n[s](Yx(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=f_(e,m_);l=f_(p.firestore,S_),f=p._query;var v=new Bx(l);c={next:function(e){n[s]&&n[s](new mx(l,v,p,e))},error:n[s+1],complete:n[s+2]},wx(e._query)}return function(e,t,n,r){var i=new jb(r),a=new Sw(t,i,n);return e.asyncQueue.enqueueAndForget(Eo(Ea().mark((function t(){return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=kw,t.next=3,t_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(Eo(Ea().mark((function t(){return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=bw,t.next=3,t_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(T_(l),f,h,c)}function Zx(e,t){return function(e,t){var n=new jb(t);return e.asyncQueue.enqueueAndForget(Eo(Ea().mark((function t(){return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wh(e).bu.add(t),t.next()},t.next=3,t_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(Eo(Ea().mark((function t(){return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wh(e).bu.delete(t)},t.next=3,t_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(T_(e=f_(e,S_)),E_(t)?t:{next:t})}function Qx(e,t){return function(e,t){var n=new xh;return e.asyncQueue.enqueueAndForget(Eo(Ea().mark((function r(){return Ea().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=zw,r.next=3,e_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(T_(e),t)}function Yx(e,t,n){var r=n.docs.get(t._key),i=new Bx(e);return new vx(e,i,t._key,r,new px(n.hasPendingWrites,n.fromCache),t.converter)}var $x=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ye(n,[{key:"get",value:function(e){var t=this,r=Vx(e,this._firestore),i=new Bx(this._firestore);return Ft(Lt(n.prototype),"get",this).call(this,e).then((function(e){return new vx(t._firestore,i,r._key,e._document,new px(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Ze(this,e),this._firestore=t,this._transaction=n,this._dataReader=K_(t)}return Ye(e,[{key:"get",value:function(e){var t=this,n=Vx(e,this._firestore),r=new Ux(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return gh();var i=e[0];if(i.isFoundDocument())return new fx(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new fx(t._firestore,r,n._key,null,n.converter);throw gh()}))}},{key:"set",value:function(e,t,n){var r=Vx(e,this._firestore),i=jx(r.converter,t,n),a=H_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Vx(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=_o(t))||t instanceof L_?ex(this._dataReader,"Transaction.update",i._key,t,n,o):J_(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Vx(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Xx(e,t,n){e=f_(e,S_);var r=Object.assign(Object.assign({},Mx),n);return function(e){if(e.maxAttempts<1)throw new _h(bh.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new xh;return e.asyncQueue.enqueueAndForget(Eo(Ea().mark((function i(){var a;return Ea().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return Qb(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new Vb(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(T_(e),(function(n){return t(new $x(e,n))}),r)}function Jx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Y_("arrayUnion",t)}function eE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new $_("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){fh=e}(gu),fu(new Io("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new S_(i,new Th(e.getProvider("auth-internal")),new Ah(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Eu(ch,"3.4.9",e),Eu(ch,"3.4.9","esm2017")}();function tE(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var nE;Object.create;var rE="facebook.com",iE="github.com",aE="google.com",oE="password",uE="twitter.com",sE="EMAIL_SIGNIN",cE="PASSWORD_RESET",lE="RECOVER_EMAIL",fE="REVERT_SECOND_FACTOR_ADDITION",hE="VERIFY_AND_CHANGE_EMAIL",dE="VERIFY_EMAIL";function pE(){return(0,N.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var vE=function(){var e;return e={},(0,N.Z)(e,"admin-restricted-operation","This operation is restricted to administrators only."),(0,N.Z)(e,"argument-error",""),(0,N.Z)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,N.Z)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,N.Z)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,N.Z)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,N.Z)(e,"cordova-not-ready","Cordova framework is not ready."),(0,N.Z)(e,"cors-unsupported","This browser is not supported."),(0,N.Z)(e,"credential-already-in-use","This credential is already associated with a different user account."),(0,N.Z)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,N.Z)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,N.Z)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,N.Z)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,N.Z)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,N.Z)(e,"email-already-in-use","The email address is already in use by another account."),(0,N.Z)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,N.Z)(e,"expired-action-code","The action code has expired."),(0,N.Z)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,N.Z)(e,"internal-error","An internal AuthError has occurred."),(0,N.Z)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,N.Z)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,N.Z)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,N.Z)(e,"invalid-auth-event","An internal AuthError has occurred."),(0,N.Z)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,N.Z)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,N.Z)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,N.Z)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,N.Z)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,N.Z)(e,"invalid-email","The email address is badly formatted."),(0,N.Z)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,N.Z)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,N.Z)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,N.Z)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,N.Z)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,N.Z)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,N.Z)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,N.Z)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,N.Z)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,N.Z)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,N.Z)(e,"wrong-password","The password is invalid or the user does not have a password."),(0,N.Z)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,N.Z)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,N.Z)(e,"invalid-provider-id","The specified provider ID is invalid."),(0,N.Z)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,N.Z)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,N.Z)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,N.Z)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,N.Z)(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),(0,N.Z)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,N.Z)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,N.Z)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,N.Z)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,N.Z)(e,"missing-continue-uri","A continue URL must be provided in the request."),(0,N.Z)(e,"missing-iframe-start","An internal AuthError has occurred."),(0,N.Z)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,N.Z)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,N.Z)(e,"missing-multi-factor-info","No second factor identifier is provided."),(0,N.Z)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,N.Z)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,N.Z)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,N.Z)(e,"app-deleted","This instance of FirebaseApp has been deleted."),(0,N.Z)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,N.Z)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,N.Z)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,N.Z)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,N.Z)(e,"no-auth-event","An internal AuthError has occurred."),(0,N.Z)(e,"no-such-provider","User was not linked to an account with the given provider."),(0,N.Z)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,N.Z)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,N.Z)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,N.Z)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,N.Z)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,N.Z)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,N.Z)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,N.Z)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,N.Z)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,N.Z)(e,"rejected-credential","The request contains malformed or mismatching credentials."),(0,N.Z)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,N.Z)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,N.Z)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,N.Z)(e,"timeout","The operation has timed out."),(0,N.Z)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,N.Z)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,N.Z)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,N.Z)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,N.Z)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,N.Z)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,N.Z)(e,"unverified-email","The operation requires a verified email."),(0,N.Z)(e,"user-cancelled","The user did not grant your application the permissions it requested."),(0,N.Z)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,N.Z)(e,"user-disabled","The user account has been disabled by an administrator."),(0,N.Z)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,N.Z)(e,"user-signed-out",""),(0,N.Z)(e,"weak-password","The password must be 6 characters long or more."),(0,N.Z)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,N.Z)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},yE=pE,mE=new $a("auth","Firebase",pE()),gE=new Mo("@firebase/auth");function kE(e){if(gE.logLevel<=No.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];gE.error.apply(gE,["Auth (".concat(gu,"): ").concat(e)].concat(n))}}function wE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw EE.apply(void 0,[e].concat(n))}function bE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return EE.apply(void 0,[e].concat(n))}function _E(e,t,n){var r=Object.assign(Object.assign({},yE()),(0,N.Z)({},t,n));return new $a("auth","Firebase",r).create(t,{appName:e.name})}function xE(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&wE(e,"argument-error"),_E(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function EE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Ge(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Ge(o)))}return mE.create.apply(mE,[e].concat(n))}function IE(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw EE.apply(void 0,[t].concat(r))}}function SE(e){var t="INTERNAL ASSERTION FAILED: "+e;throw kE(t),new Error(t)}function TE(e,t){e||SE(t)}var CE=new Map;function NE(e){TE(e instanceof Function,"Expected a class definition");var t=CE.get(e);return t?(TE(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,CE.set(e,t),t)}function PE(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function AE(){return"http:"===RE()||"https:"===RE()}function RE(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var OE=function(){function e(t,n){Ze(this,e),this.shortDelay=t,this.longDelay=n,TE(n>t,"Short delay should be less than long delay!"),this.isMobile=za()||Ha()}return Ye(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(AE()||Ka()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function DE(e,t){TE(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var LE=function(){function e(){Ze(this,e)}return Ye(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void SE("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void SE("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void SE("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),ME=(nE={},(0,N.Z)(nE,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,N.Z)(nE,"MISSING_CUSTOM_TOKEN","internal-error"),(0,N.Z)(nE,"INVALID_IDENTIFIER","invalid-email"),(0,N.Z)(nE,"MISSING_CONTINUE_URI","internal-error"),(0,N.Z)(nE,"INVALID_PASSWORD","wrong-password"),(0,N.Z)(nE,"MISSING_PASSWORD","internal-error"),(0,N.Z)(nE,"EMAIL_EXISTS","email-already-in-use"),(0,N.Z)(nE,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,N.Z)(nE,"INVALID_IDP_RESPONSE","invalid-credential"),(0,N.Z)(nE,"INVALID_PENDING_TOKEN","invalid-credential"),(0,N.Z)(nE,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,N.Z)(nE,"MISSING_REQ_TYPE","internal-error"),(0,N.Z)(nE,"EMAIL_NOT_FOUND","user-not-found"),(0,N.Z)(nE,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,N.Z)(nE,"EXPIRED_OOB_CODE","expired-action-code"),(0,N.Z)(nE,"INVALID_OOB_CODE","invalid-action-code"),(0,N.Z)(nE,"MISSING_OOB_CODE","internal-error"),(0,N.Z)(nE,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,N.Z)(nE,"INVALID_ID_TOKEN","invalid-user-token"),(0,N.Z)(nE,"TOKEN_EXPIRED","user-token-expired"),(0,N.Z)(nE,"USER_NOT_FOUND","user-token-expired"),(0,N.Z)(nE,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,N.Z)(nE,"INVALID_CODE","invalid-verification-code"),(0,N.Z)(nE,"INVALID_SESSION_INFO","invalid-verification-id"),(0,N.Z)(nE,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,N.Z)(nE,"MISSING_SESSION_INFO","missing-verification-id"),(0,N.Z)(nE,"SESSION_EXPIRED","code-expired"),(0,N.Z)(nE,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,N.Z)(nE,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,N.Z)(nE,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,N.Z)(nE,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,N.Z)(nE,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,N.Z)(nE,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,N.Z)(nE,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,N.Z)(nE,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,N.Z)(nE,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,N.Z)(nE,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,N.Z)(nE,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),nE),FE=new OE(3e4,6e4);function jE(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function UE(e,t,n,r){return qE.apply(this,arguments)}function qE(){return qE=Eo(Ea().mark((function e(t,n,r,i){var a,o=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",VE(t,a,Eo(Ea().mark((function e(){var a,o,u,s;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=co(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",LE.fetch()(KE(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),qE.apply(this,arguments)}function VE(e,t,n){return BE.apply(this,arguments)}function BE(){return(BE=Eo(Ea().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},ME),n),e.prev=2,a=new HE(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw GE(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=Be(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw GE(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw GE(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw GE(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw _E(t,d,h);case 34:wE(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Ya)){e.next=41;break}throw e.t0;case 41:wE(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function zE(e,t,n,r){return WE.apply(this,arguments)}function WE(){return WE=Eo(Ea().mark((function e(t,n,r,i){var a,o,u=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,UE(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&wE(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),WE.apply(this,arguments)}function KE(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?DE(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var HE=function(){function e(t){var n=this;Ze(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(bE(n.auth,"network-request-failed"))}),FE.get())}))}return Ye(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function GE(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=bE(e,t,r);return i.customData._tokenResponse=n,i}function ZE(e,t){return QE.apply(this,arguments)}function QE(){return(QE=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UE(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YE(e,t){return $E.apply(this,arguments)}function $E(){return($E=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UE(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XE(e,t){return JE.apply(this,arguments)}function JE(){return(JE=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UE(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eI(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(FU){}}function tI(){return tI=Eo(Ea().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=_o(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,IE((a=rI(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:eI(nI(a.auth_time)),issuedAtTime:eI(nI(a.iat)),expirationTime:eI(nI(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),tI.apply(this,arguments)}function nI(e){return 1e3*Number(e)}function rI(e){var t=Be(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return kE("JWT malformed, contained fewer than 3 sections"),null;try{var a=ja(r);return a?JSON.parse(a):(kE("Failed to decode base64 JWT payload"),null)}catch(FU){return kE("Caught error parsing JWT payload as JSON",FU),null}}function iI(e,t){return aI.apply(this,arguments)}function aI(){return aI=Eo(Ea().mark((function e(t,n){var r=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ya&&oI(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),aI.apply(this,arguments)}function oI(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var uI=function(){function e(t){Ze(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Ye(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Eo(Ea().mark((function t(){return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),sI=function(){function e(t,n){Ze(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Ye(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=eI(this.lastLoginAt),this.creationTime=eI(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function cI(e){return lI.apply(this,arguments)}function lI(){return lI=Eo(Ea().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,iI(t,XE(r,{idToken:i}));case 6:IE(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?dI(o.providerUserInfo):[],s=hI(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new sI(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),lI.apply(this,arguments)}function fI(){return(fI=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_o(t),e.next=3,cI(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hI(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Ge(n),Ge(t))}function dI(e){return e.map((function(e){var t=e.providerId,n=tE(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function pI(e,t){return vI.apply(this,arguments)}function vI(){return(vI=Eo(Ea().mark((function e(t,n){var r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VE(t,{},Eo(Ea().mark((function e(){var r,i,a,o,u,s;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=KE(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",LE.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yI=function(){function e(){Ze(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Ye(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){IE(e.idToken,"internal-error"),IE("undefined"!==typeof e.idToken,"internal-error"),IE("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=rI(e);return IE(t,"internal-error"),IE("undefined"!==typeof t.exp,"internal-error"),IE("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Eo(Ea().mark((function e(t){var n,r=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],IE(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Eo(Ea().mark((function e(t,n){var r,i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pI(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return SE("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(IE("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(IE("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(IE("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function mI(e,t){IE("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var gI=function(){function e(t){Ze(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=tE(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Ge(a.providerData):[],this.metadata=new sI(a.createdAt||void 0,a.lastLoginAt||void 0)}return Ye(e,[{key:"getIdToken",value:function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iI(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(IE(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return tI.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return fI.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(IE(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){IE(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Eo(Ea().mark((function e(t){var n,r,i=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,cI(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Eo(Ea().mark((function e(){var t;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,iI(this,ZE(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;IE(k&&x,t,"internal-error");var E=yI.fromJSON(this.name,x);IE("string"===typeof k,t,"internal-error"),mI(f,t.name),mI(h,t.name),IE("boolean"===typeof w,t,"internal-error"),IE("boolean"===typeof b,t,"internal-error"),mI(d,t.name),mI(p,t.name),mI(v,t.name),mI(y,t.name),mI(m,t.name),mI(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(I.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(){var t=Eo(Ea().mark((function t(n,r){var i,a,o,u=arguments;return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new yI).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,cI(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),kI=function(){function e(){Ze(this,e),this.type="NONE",this.storage={}}return Ye(e,[{key:"_isAvailable",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();kI.type="NONE";var wI=kI;function bI(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var _I=function(){function e(t,n,r){Ze(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=bI(this.userKey,a.apiKey,o),this.fullPersistenceKey=bI("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Ye(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Eo(Ea().mark((function e(){var t;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?gI._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Eo(Ea().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(NE(wI),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||NE(wI),u=bI(i,n.config.apiKey,n.name),s=null,c=Sa(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=gI._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function xI(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(TI(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(EI(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(NI(t))return"Blackberry";if(PI(t))return"Webos";if(II(t))return"Safari";if((t.includes("chrome/")||SI(t))&&!t.includes("edge/"))return"Chrome";if(CI(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function EI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba();return/firefox\//i.test(e)}function II(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function SI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba();return/crios\//i.test(e)}function TI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba();return/iemobile/i.test(e)}function CI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba();return/android/i.test(e)}function NI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba();return/blackberry/i.test(e)}function PI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba();return/webos/i.test(e)}function AI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba();return/iphone|ipad|ipod/i.test(e)}function RI(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba();return AI(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function OI(){return Ga()&&10===document.documentMode}function DI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba();return AI(e)||CI(e)||PI(e)||NI(e)||/windows phone/i.test(e)||TI(e)}function LI(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=xI(Ba());break;case"Worker":t="".concat(xI(Ba()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(gu,"/").concat(r)}var MI=function(){function e(t){Ze(this,e),this.auth=t,this.queue=[]}return Ye(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(FU){r(FU)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Eo(Ea().mark((function e(t){var n,r,i,a,o,u,s;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=Sa(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=Sa(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),FI=function(){function e(t,n,r){Ze(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new UI(this),this.idTokenSubscription=new UI(this),this.beforeStateQueue=new MI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mE,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Ye(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=NE(t)),this._initializationPromise=this.queue(Eo(Ea().mark((function r(){var i,a;return Ea().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,_I.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Eo(Ea().mark((function e(){var t;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Eo(Ea().mark((function e(t){var n,r,i,a,o,u,s;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return IE(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cI(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?_o(t):null)&&IE(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Eo(Ea().mark((function e(t){var n,r=this,i=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&IE(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Eo(Ea().mark((function n(){return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(NE(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new $a("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Eo(Ea().mark((function e(t,n){var r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return IE(n=t&&NE(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,_I.create(this,[NE(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Eo(Ea().mark((function e(t){var n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Eo(Ea().mark((function e(t){var n=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return IE(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return IE(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LI(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Eo(Ea().mark((function e(){var t,n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,N.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function jI(e){return _o(e)}var UI=function(){function e(t){var n=this;Ze(this,e),this.auth=t,this.observer=null,this.addObserver=po((function(e){return n.observer=e}))}return Ye(e,[{key:"next",get:function(){return IE(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function qI(e,t,n){var r=jI(e);IE(r._canInitEmulator,r,"emulator-config-failed"),IE(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=VI(t),o=function(e){var t=VI(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:BI(r.substr(a.length+1))}}var o=Be(r.split(":"),2);return{host:o[0],port:BI(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function VI(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function BI(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var zI=function(){function e(t,n){Ze(this,e),this.providerId=t,this.signInMethod=n}return Ye(e,[{key:"toJSON",value:function(){return SE("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return SE("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return SE("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return SE("not implemented")}}]),e}();function WI(e,t){return KI.apply(this,arguments)}function KI(){return(KI=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UE(t,"POST","/v1/accounts:resetPassword",jE(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HI(e,t){return GI.apply(this,arguments)}function GI(){return(GI=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UE(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZI(e,t){return QI.apply(this,arguments)}function QI(){return(QI=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UE(t,"POST","/v1/accounts:update",jE(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YI(e,t){return $I.apply(this,arguments)}function $I(){return($I=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zE(t,"POST","/v1/accounts:signInWithPassword",jE(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XI(e,t){return JI.apply(this,arguments)}function JI(){return(JI=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UE(t,"POST","/v1/accounts:sendOobCode",jE(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eS(e,t){return tS.apply(this,arguments)}function tS(){return(tS=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XI(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nS(e,t){return rS.apply(this,arguments)}function rS(){return(rS=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XI(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iS(e,t){return aS.apply(this,arguments)}function aS(){return(aS=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XI(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oS(e,t){return uS.apply(this,arguments)}function uS(){return(uS=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XI(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sS(e,t){return cS.apply(this,arguments)}function cS(){return(cS=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zE(t,"POST","/v1/accounts:signInWithEmailLink",jE(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lS(e,t){return fS.apply(this,arguments)}function fS(){return(fS=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zE(t,"POST","/v1/accounts:signInWithEmailLink",jE(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hS=function(e){jt(n,e);var t=zt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Ze(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Ye(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",YI(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",sS(t,{email:this._email,oobCode:this._password}));case 5:wE(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",HI(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",lS(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:wE(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(zI);function dS(e,t){return pS.apply(this,arguments)}function pS(){return(pS=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zE(t,"POST","/v1/accounts:signInWithIdp",jE(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vS=function(e){jt(n,e);var t=zt(n);function n(){var e;return Ze(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Ye(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return dS(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,dS(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,dS(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=co(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wE("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=tE(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(zI);function yS(e,t){return mS.apply(this,arguments)}function mS(){return(mS=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UE(t,"POST","/v1/accounts:sendVerificationCode",jE(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gS(){return(gS=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zE(t,"POST","/v1/accounts:signInWithPhoneNumber",jE(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kS(){return(kS=Eo(Ea().mark((function e(t,n){var r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zE(t,"POST","/v1/accounts:signInWithPhoneNumber",jE(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw GE(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wS=(0,N.Z)({},"USER_NOT_FOUND","user-not-found");function bS(){return(bS=Eo(Ea().mark((function e(t,n){var r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",zE(t,"POST","/v1/accounts:signInWithPhoneNumber",jE(t,r),wS));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _S=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Ye(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return gS.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return kS.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return bS.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(zI);var xS=function(){function e(t){var n,r,i,a,o,u;Ze(this,e);var s=lo(fo(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);IE(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Ye(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=lo(fo(e)).link,n=t?lo(fo(t)).deep_link_id:null,r=lo(fo(e)).deep_link_id;return(r?lo(fo(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(cb){return null}}}]),e}();var ES=function(){function e(){Ze(this,e),this.providerId=e.PROVIDER_ID}return Ye(e,null,[{key:"credential",value:function(e,t){return hS._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=xS.parseLink(t);return IE(n,"argument-error"),hS._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ES.PROVIDER_ID="password",ES.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ES.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var IS=function(){function e(t){Ze(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Ye(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),SS=function(e){jt(n,e);var t=zt(n);function n(){var e;return Ze(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Ye(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Ge(this.scopes)}}]),n}(IS),TS=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return IE(e.idToken||e.accessToken,"argument-error"),vS._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return IE("providerId"in t&&"signInMethod"in t,"argument-error"),vS._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(FU){return null}}}]),n}(SS),CS=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.call(this,"facebook.com")}return Ye(n,null,[{key:"credential",value:function(e){return vS._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(cb){return null}}}]),n}(SS);CS.FACEBOOK_SIGN_IN_METHOD="facebook.com",CS.PROVIDER_ID="facebook.com";var NS=function(e){jt(n,e);var t=zt(n);function n(){var e;return Ze(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Ye(n,null,[{key:"credential",value:function(e,t){return vS._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(cb){return null}}}]),n}(SS);NS.GOOGLE_SIGN_IN_METHOD="google.com",NS.PROVIDER_ID="google.com";var PS=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.call(this,"github.com")}return Ye(n,null,[{key:"credential",value:function(e){return vS._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(cb){return null}}}]),n}(SS);PS.GITHUB_SIGN_IN_METHOD="github.com",PS.PROVIDER_ID="github.com";var AS=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Ye(n,[{key:"_getIdTokenResponse",value:function(e){return dS(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,dS(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,dS(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(zI),RS=function(e){jt(n,e);var t=zt(n);function n(e){return Ze(this,n),IE(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Ye(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=AS.fromJSON(e);return IE(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return AS._create(r,n)}catch(FU){return null}}}]),n}(IS),OS=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.call(this,"twitter.com")}return Ye(n,null,[{key:"credential",value:function(e,t){return vS._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(cb){return null}}}]),n}(SS);function DS(e,t){return LS.apply(this,arguments)}function LS(){return(LS=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zE(t,"POST","/v1/accounts:signUp",jE(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}OS.TWITTER_SIGN_IN_METHOD="twitter.com",OS.PROVIDER_ID="twitter.com";var MS=function(){function e(t){Ze(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Ye(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Eo(Ea().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,gI._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=FS(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Eo(Ea().mark((function t(n,r,i){var a;return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=FS(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function FS(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function jS(){return jS=Eo(Ea().mark((function e(t){var n,r,i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jI(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new MS({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,DS(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,MS._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),jS.apply(this,arguments)}var US=function(e){jt(n,e);var t=zt(n);function n(e,r,i,a){var o,u;return Ze(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Vt(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Ye(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ya);function qS(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw US._fromErrorAndOperation(e,n,t,r);throw n}))}function VS(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function BS(e,t){return zS.apply(this,arguments)}function zS(){return zS=Eo(Ea().mark((function e(t,n){var r,i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o(t),e.next=3,HS(!0,r,n);case 3:return e.t0=YE,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=VS(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),zS.apply(this,arguments)}function WS(e,t){return KS.apply(this,arguments)}function KS(){return KS=Eo(Ea().mark((function e(t,n){var r,i,a=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=iI,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",MS._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),KS.apply(this,arguments)}function HS(e,t,n){return GS.apply(this,arguments)}function GS(){return(GS=Eo(Ea().mark((function e(t,n,r){var i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cI(n);case 2:i=VS(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",IE(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZS(e,t){return QS.apply(this,arguments)}function QS(){return QS=Eo(Ea().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,iI(t,qS(i,a,n,t),r);case 6:return IE((o=e.sent).idToken,i,"internal-error"),IE(u=rI(o.idToken),i,"internal-error"),s=u.sub,IE(t.uid===s,i,"user-mismatch"),e.abrupt("return",MS._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&wE(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),QS.apply(this,arguments)}function YS(e,t){return $S.apply(this,arguments)}function $S(){return $S=Eo(Ea().mark((function e(t,n){var r,i,a,o,u=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,qS(t,i,n);case 4:return a=e.sent,e.next=7,MS._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),$S.apply(this,arguments)}function XS(e,t){return JS.apply(this,arguments)}function JS(){return(JS=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",YS(jI(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eT(e,t){return tT.apply(this,arguments)}function tT(){return(tT=Eo(Ea().mark((function e(t,n){var r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o(t),e.next=3,HS(!1,r,n.providerId);case 3:return e.abrupt("return",WS(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nT(e,t){return rT.apply(this,arguments)}function rT(){return(rT=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ZS(_o(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iT(e,t){return aT.apply(this,arguments)}function aT(){return(aT=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zE(t,"POST","/v1/accounts:signInWithCustomToken",jE(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oT(){return(oT=Eo(Ea().mark((function e(t,n){var r,i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jI(t),e.next=3,iT(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,MS._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var uT=function(){function e(t,n){Ze(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Ye(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?sT._fromServerResponse(e,t):wE(e,"internal-error")}}]),e}(),sT=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Ye(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(uT);function cT(e,t,n){var r;IE((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),IE("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(IE(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(IE(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function lT(){return(lT=Eo(Ea().mark((function e(t,n,r){var i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(t),a={requestType:"PASSWORD_RESET",email:n},r&&cT(i,a,r),e.next=5,nS(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fT(){return(fT=Eo(Ea().mark((function e(t,n,r){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WI(_o(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hT(){return(hT=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZI(_o(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dT(e,t){return pT.apply(this,arguments)}function pT(){return(pT=Eo(Ea().mark((function e(t,n){var r,i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o(t),e.next=3,WI(r,{oobCode:n});case 3:i=e.sent,IE(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return IE(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:IE(i.mfaInfo,r,"internal-error");case 13:IE(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=uT._fromServerResponse(jI(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vT(){return(vT=Eo(Ea().mark((function e(t,n){var r,i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dT(_o(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yT(e,t,n){return mT.apply(this,arguments)}function mT(){return(mT=Eo(Ea().mark((function e(t,n,r){var i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jI(t),e.next=3,DS(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,MS._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gT(){return(gT=Eo(Ea().mark((function e(t,n,r){var i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(t),a={requestType:"EMAIL_SIGNIN",email:n},IE(r.handleCodeInApp,i,"argument-error"),r&&cT(i,a,r),e.next=6,iS(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kT(){return(kT=Eo(Ea().mark((function e(t,n,r){var i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(t),IE((a=ES.credentialWithLink(n,r||PE()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",XS(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wT(e,t){return bT.apply(this,arguments)}function bT(){return(bT=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UE(t,"POST","/v1/accounts:createAuthUri",jE(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _T(){return(_T=Eo(Ea().mark((function e(t,n){var r,i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=AE()?PE():"http://localhost",i={identifier:n,continueUri:r},e.next=4,wT(_o(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xT(){return(xT=Eo(Ea().mark((function e(t,n){var r,i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&cT(r.auth,a,n),e.next=8,eS(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ET(){return(ET=Eo(Ea().mark((function e(t,n,r){var i,a,o,u;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&cT(i.auth,o,r),e.next=8,oS(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IT(e,t){return ST.apply(this,arguments)}function ST(){return(ST=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UE(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TT(){return(TT=Eo(Ea().mark((function e(t,n){var r,i,a,o,u,s,c;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=_o(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,iI(a,IT(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CT(e,t,n){return NT.apply(this,arguments)}function NT(){return(NT=Eo(Ea().mark((function e(t,n,r){var i,a,o,u;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,iI(t,HI(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var PT=Ye((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ze(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),AT=function(e){jt(n,e);var t=zt(n);function n(e,r,i,a){var o;return Ze(this,n),(o=t.call(this,e,r,i)).username=a,o}return Ye(n)}(PT),RT=function(e){jt(n,e);var t=zt(n);function n(e,r){return Ze(this,n),t.call(this,e,"facebook.com",r)}return Ye(n)}(PT),OT=function(e){jt(n,e);var t=zt(n);function n(e,r){return Ze(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Ye(n)}(AT),DT=function(e){jt(n,e);var t=zt(n);function n(e,r){return Ze(this,n),t.call(this,e,"google.com",r)}return Ye(n)}(PT),LT=function(e){jt(n,e);var t=zt(n);function n(e,r,i){return Ze(this,n),t.call(this,e,"twitter.com",r,i)}return Ye(n)}(AT);function MT(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=rI(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new PT(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new RT(a,i);case"github.com":return new OT(a,i);case"google.com":return new DT(a,i);case"twitter.com":return new LT(a,i,e.screenName||null);case"custom":case"anonymous":return new PT(a,null);default:return new PT(a,r,i)}}(n)}var FT=function(){function e(t,n){Ze(this,e),this.type=t,this.credential=n}return Ye(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:(0,N.Z)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),jT=function(){function e(t,n,r){Ze(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Ye(e,[{key:"resolveSignIn",value:function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=jI(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return uT._fromServerResponse(r,e)}));IE(i.mfaPendingCredential,r,"internal-error");var o=FT._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Eo(Ea().mark((function e(t){var a,u,s;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,MS._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return IE(n.user,r,"internal-error"),e.abrupt("return",MS._forOperation(n.user,n.operationType,u));case 17:wE(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function UT(e,t){return UE(e,"POST","/v2/accounts/mfaEnrollment:start",jE(e,t))}var qT=function(){function e(t){var n=this;Ze(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return uT._fromServerResponse(t.auth,e)})))}))}return Ye(e,[{key:"getSession",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=FT,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Eo(Ea().mark((function e(t,n){var r,i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,iI(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Eo(Ea().mark((function e(t){var n,r,i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,iI(this.user,UE(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",jE(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),VT=new WeakMap;var BT="__sak",zT=function(){function e(t,n){Ze(this,e),this.storageRetriever=t,this.type=n}return Ye(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(BT,"1"),this.storage.removeItem(BT),Promise.resolve(!0)):Promise.resolve(!1)}catch(cb){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var WT=function(e){jt(n,e);var t=zt(n);function n(){var e;return Ze(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Ba();return II(e)||AI(e)}()&&function(){try{return!(!window||window===window.top)}catch(FU){return!1}}(),e.fallbackToPolling=DI(),e._shouldAllowMigration=!0,e}return Ye(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);OI()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Eo(Ea().mark((function e(t,r){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(Lt(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Eo(Ea().mark((function e(t){var r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(Lt(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(Lt(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(zT);WT.type="LOCAL";var KT=WT,HT=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Ye(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(zT);HT.type="SESSION";var GT=HT;function ZT(e){return Promise.all(e.map(function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var QT=function(){function e(t){Ze(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Ye(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Eo(Ea().mark((function e(t){var n,r,i,a,o,u,s,c;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ZT(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function YT(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}QT.receivers=[];var $T=function(){function e(t){Ze(this,e),this.target=t,this.handlers=new Set}return Ye(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Eo(Ea().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=YT("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function XT(){return window}function JT(){return"undefined"!==typeof XT().WorkerGlobalScope&&"function"===typeof XT().importScripts}function eC(){return tC.apply(this,arguments)}function tC(){return(tC=Eo(Ea().mark((function e(){var t;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function nC(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var rC="firebaseLocalStorageDb",iC="firebaseLocalStorage",aC="fbase_key",oC=function(){function e(t){Ze(this,e),this.request=t}return Ye(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function uC(e,t){return e.transaction([iC],t?"readwrite":"readonly").objectStore(iC)}function sC(){var e=indexedDB.deleteDatabase(rC);return new oC(e).toPromise()}function cC(){var e=indexedDB.open(rC,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(iC,{keyPath:aC})}catch(FU){n(FU)}})),e.addEventListener("success",Eo(Ea().mark((function n(){var r;return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(iC)){n.next=12;break}return r.close(),n.next=5,sC();case 5:return n.t0=t,n.next=8,cC();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function lC(e,t,n){return fC.apply(this,arguments)}function fC(){return fC=Eo(Ea().mark((function e(t,n,r){var i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=uC(t,!0).put((i={},(0,N.Z)(i,aC,n),(0,N.Z)(i,"value",r),i)),e.abrupt("return",new oC(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),fC.apply(this,arguments)}function hC(e,t){return dC.apply(this,arguments)}function dC(){return dC=Eo(Ea().mark((function e(t,n){var r,i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=uC(t,!1).get(n),e.next=3,new oC(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),dC.apply(this,arguments)}function pC(e,t){var n=uC(e,!0).delete(t);return new oC(n).toPromise()}var vC=function(){function e(){Ze(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Ye(e,[{key:"_openDb",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,cC();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Eo(Ea().mark((function e(t){var n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JT()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Eo(Ea().mark((function e(){var t=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=QT._getInstance(JT()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Eo(Ea().mark((function e(n,r){var i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Eo(Ea().mark((function e(){var t,n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eC();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new $T(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&nC()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Eo(Ea().mark((function e(){var t;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,cC();case 5:return t=e.sent,e.next=8,lC(t,BT,"1");case 8:return e.next=10,pC(t,BT);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Eo(Ea().mark((function e(t,n){var r=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return lC(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return hC(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Eo(Ea().mark((function e(t){var n=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return pC(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Eo(Ea().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=uC(e,!1).getAll();return new oC(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Sa(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Eo(Ea().mark((function t(){return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();vC.type="LOCAL";var yC=vC;function mC(e,t){return UE(e,"POST","/v2/accounts/mfaSignIn:start",jE(e,t))}function gC(e){return kC.apply(this,arguments)}function kC(){return(kC=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UE(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wC(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=bE("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function bC(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var _C=1e12,xC=function(){function e(t){Ze(this,e),this.auth=t,this.counter=_C,this._widgets=new Map}return Ye(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new EC(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||_C;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||_C;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Eo(Ea().mark((function e(t){var n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||_C,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),EC=function(){function e(t,n,r){var i=this;Ze(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;IE(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Ye(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(FU){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(FU){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var IC=bC("rcb"),SC=new OE(3e4,6e4),TC="https://www.google.com/recaptcha/api.js?",CC=function(){function e(){Ze(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!XT().grecaptcha}return Ye(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return IE(NC(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(XT().grecaptcha):new Promise((function(r,i){var a=XT().setTimeout((function(){i(bE(e,"network-request-failed"))}),SC.get());XT()[IC]=function(){XT().clearTimeout(a),delete XT()[IC];var o=XT().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(bE(e,"internal-error"))},wC("".concat(TC,"?").concat(co({onload:IC,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(bE(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!XT().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function NC(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var PC=function(){function e(){Ze(this,e)}return Ye(e,[{key:"load",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new xC(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),AC="recaptcha",RC={theme:"light",type:"image"},OC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},RC),r=arguments.length>2?arguments[2]:void 0;Ze(this,e),this.parameters=n,this.type=AC,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jI(r),this.isInvisible="invisible"===this.parameters.size,IE("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;IE(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new PC:new CC,this.validateStartingState()}return Ye(e,[{key:"verify",value:function(){var e=Eo(Ea().mark((function e(){var t,n,r,i=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(FU){return Promise.reject(FU)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){IE(!this.parameters.sitekey,this.auth,"argument-error"),IE(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),IE("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=XT()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){IE(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Eo(Ea().mark((function e(){var t,n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Eo(Ea().mark((function e(){var t;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return IE(AE()&&!JT(),this.auth,"internal-error"),e.next=3,DC();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,gC(this.auth);case 8:IE(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return IE(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function DC(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var LC=function(){function e(t,n){Ze(this,e),this.verificationId=t,this.onConfirmation=n}return Ye(e,[{key:"confirm",value:function(e){var t=_S._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function MC(){return(MC=Eo(Ea().mark((function e(t,n,r){var i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jI(t),e.next=3,qC(i,n,_o(r));case 3:return a=e.sent,e.abrupt("return",new LC(a,(function(e){return XS(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FC(e,t,n){return jC.apply(this,arguments)}function jC(){return(jC=Eo(Ea().mark((function e(t,n,r){var i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(t),e.next=3,HS(!1,i,"phone");case 3:return e.next=5,qC(i.auth,n,_o(r));case 5:return a=e.sent,e.abrupt("return",new LC(a,(function(e){return eT(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UC(){return(UC=Eo(Ea().mark((function e(t,n,r){var i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(t),e.next=3,qC(i.auth,n,_o(r));case 3:return a=e.sent,e.abrupt("return",new LC(a,(function(e){return nT(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qC(e,t,n){return VC.apply(this,arguments)}function VC(){return VC=Eo(Ea().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,IE("string"===typeof a,t,"argument-error"),IE(r.type===AC,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return IE("enroll"===u.type,t,"internal-error"),e.next=13,UT(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return IE("signin"===u.type,t,"internal-error"),IE(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,mC(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,yS(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),VC.apply(this,arguments)}function BC(){return(BC=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WS(_o(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zC=function(){function e(t){Ze(this,e),this.providerId=e.PROVIDER_ID,this.auth=jI(t)}return Ye(e,[{key:"verifyPhoneNumber",value:function(e,t){return qC(this.auth,e,_o(t))}}],[{key:"credential",value:function(e,t){return _S._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?_S._fromTokenResponse(n,r):null}}]),e}();function WC(e,t){return t?NE(t):(IE(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}zC.PROVIDER_ID="phone",zC.PHONE_SIGN_IN_METHOD="phone";var KC=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Ye(n,[{key:"_getIdTokenResponse",value:function(e){return dS(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return dS(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return dS(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(zI);function HC(e){return YS(e.auth,new KC(e),e.bypassAuthState)}function GC(e){var t=e.auth,n=e.user;return IE(n,t,"internal-error"),ZS(n,new KC(e),e.bypassAuthState)}function ZC(e){return QC.apply(this,arguments)}function QC(){return(QC=Eo(Ea().mark((function e(t){var n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,IE(r=t.user,n,"internal-error"),e.abrupt("return",WS(r,new KC(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var YC=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Ze(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Ye(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Eo(Ea().mark((function t(n,r){return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Eo(Ea().mark((function e(t){var n,r,i,a,o,u,s;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HC;case"linkViaPopup":case"linkViaRedirect":return ZC;case"reauthViaPopup":case"reauthViaRedirect":return GC;default:wE(this.auth,"internal-error")}}},{key:"resolve",value:function(e){TE(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){TE(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),$C=new OE(2e3,1e4);function XC(e,t,n){return JC.apply(this,arguments)}function JC(){return(JC=Eo(Ea().mark((function e(t,n,r){var i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jI(t),xE(t,n,IS),a=WC(i,r),o=new rN(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eN(){return(eN=Eo(Ea().mark((function e(t,n,r){var i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xE((i=_o(t)).auth,n,IS),a=WC(i.auth,r),o=new rN(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tN(e,t,n){return nN.apply(this,arguments)}function nN(){return(nN=Eo(Ea().mark((function e(t,n,r){var i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xE((i=_o(t)).auth,n,IS),a=WC(i.auth,r),o=new rN(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rN=function(e){jt(n,e);var t=zt(n);function n(e,r,i,a,o){var u;return Ze(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Vt(u),u}return Ye(n,[{key:"executeNotNull",value:function(){var e=Eo(Ea().mark((function e(){var t;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return IE(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Eo(Ea().mark((function e(){var t,n=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TE(1===this.filter.length,"Popup operations only handle one event"),t=YT(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(bE(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(bE(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(bE(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,$C.get())}()}}]),n}(YC);rN.currentPopupAction=null;var iN=new Map,aN=function(e){jt(n,e);var t=zt(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ze(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Ye(n,[{key:"execute",value:function(){var e=Eo(Ea().mark((function e(){var t,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=iN.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,oN(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ft(Lt(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:iN.set(this.auth._key(),t);case 21:return this.bypassAuthState||iN.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Eo(Ea().mark((function e(t){var r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ft(Lt(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ft(Lt(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(YC);function oN(e,t){return uN.apply(this,arguments)}function uN(){return(uN=Eo(Ea().mark((function e(t,n){var r,i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hN(n),i=fN(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sN(e,t){return cN.apply(this,arguments)}function cN(){return(cN=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fN(t)._set(hN(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lN(e,t){iN.set(e._key(),t)}function fN(e){return NE(e._redirectPersistence)}function hN(e){return bI("pendingRedirect",e.config.apiKey,e.name)}function dN(e,t,n){return function(e,t,n){return pN.apply(this,arguments)}(e,t,n)}function pN(){return(pN=Eo(Ea().mark((function e(t,n,r){var i,a;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jI(t),xE(t,n,IS),a=WC(i,r),e.next=5,sN(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vN(e,t,n){return function(e,t,n){return yN.apply(this,arguments)}(e,t,n)}function yN(){return(yN=Eo(Ea().mark((function e(t,n,r){var i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xE((i=_o(t)).auth,n,IS),a=WC(i.auth,r),e.next=5,sN(a,i.auth);case 5:return e.next=7,xN(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mN(e,t,n){return function(e,t,n){return gN.apply(this,arguments)}(e,t,n)}function gN(){return(gN=Eo(Ea().mark((function e(t,n,r){var i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xE((i=_o(t)).auth,n,IS),a=WC(i.auth,r),e.next=5,HS(!1,i,n.providerId);case 5:return e.next=7,sN(a,i.auth);case 7:return e.next=9,xN(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kN(e,t){return wN.apply(this,arguments)}function wN(){return(wN=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jI(t)._initializationPromise;case 2:return e.abrupt("return",bN(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bN(e,t){return _N.apply(this,arguments)}function _N(){return _N=Eo(Ea().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=jI(t),a=WC(i,n),o=new aN(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),_N.apply(this,arguments)}function xN(e){return EN.apply(this,arguments)}function EN(){return(EN=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=YT("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var IN=function(){function e(t){Ze(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Ye(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TN(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!TN(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(bE(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(SN(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(SN(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function SN(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function TN(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function CN(e){return NN.apply(this,arguments)}function NN(){return NN=Eo(Ea().mark((function e(t){var n,r=arguments;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",UE(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),NN.apply(this,arguments)}var PN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AN=/^https?/;function RN(){return(RN=Eo(Ea().mark((function e(t){var n,r,i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,CN(t);case 4:n=e.sent,r=n.authorizedDomains,i=Sa(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ON(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:wE(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function ON(e){var t=PE(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!AN.test(r))return!1;if(PN.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var DN=new OE(3e4,6e4);function LN(){var e=XT().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Ge(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var MN=null;function FN(e){return MN=MN||function(e){return new Promise((function(t,n){var r,i,a;function o(){LN(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){LN(),n(bE(e,"network-request-failed"))},timeout:DN.get()})}if(null===(i=null===(r=XT().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=XT().gapi)||void 0===a?void 0:a.load)){var u=bC("iframefcb");return XT()[u]=function(){gapi.load?o():n(bE(e,"network-request-failed"))},wC("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw MN=null,e}))}(e),MN}var jN=new OE(5e3,15e3),UN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VN(e){var t=e.config;IE(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?DE(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:gu},i=qN.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(co(r).slice(1))}function BN(e){return zN.apply(this,arguments)}function zN(){return zN=Eo(Ea().mark((function e(t){var n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FN(t);case 2:return n=e.sent,IE(r=XT().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:VN(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UN,dontclear:!0},(function(e){return new Promise(function(){var n=Eo(Ea().mark((function n(r,i){var a,o,u;return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){XT().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=bE(t,"network-request-failed"),o=XT().setTimeout((function(){i(a)}),jN.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),zN.apply(this,arguments)}var WN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KN="_blank",HN="http://localhost",GN=function(){function e(t){Ze(this,e),this.window=t,this.associatedEvent=null}return Ye(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(FU){}}}]),e}();function ZN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},WN),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Ba().toLowerCase();n&&(u=SI(c)?KN:n),EI(c)&&(t=t||HN,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=Be(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(RI(c)&&"_self"!==u)return QN(t||"",u),new GN(null);var f=window.open(t||"",u,l);IE(f,e,"popup-blocked");try{f.focus()}catch(FU){}return new GN(f)}function QN(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var YN="__/auth/handler",$N="emulator/auth/handler";function XN(e,t,n,r,i,a){IE(e.config.authDomain,e,"auth-domain-config-required"),IE(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:gu,eventId:i};if(t instanceof IS){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",ao(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=Be(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof SS){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(YN);return DE(t,$N)}(e),"?").concat(co(d).slice(1))}var JN="webStorageSupport",eP=function(){function e(){Ze(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GT,this._completeRedirectFn=bN,this._overrideRedirectResult=lN}return Ye(e,[{key:"_openPopup",value:function(){var e=Eo(Ea().mark((function e(t,n,r,i){var a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TE(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=XN(t,n,r,PE(),i),e.abrupt("return",ZN(t,o,YT()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Eo(Ea().mark((function e(t,n,r,i){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=XN(t,n,r,PE(),i),XT().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(TE(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Eo(Ea().mark((function e(t){var n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BN(t);case 2:return n=e.sent,r=new IN(t),n.register("authEvent",(function(e){return IE(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(JN,{type:JN},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),wE(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return RN.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return DI()||II()||AI()}}]),e}(),tP=eP,nP=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this,"phone")).credential=e,r}return Ye(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return UE(e,"POST","/v2/accounts/mfaEnrollment:finalize",jE(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return UE(e,"POST","/v2/accounts/mfaSignIn:finalize",jE(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){Ze(this,e),this.factorId=t}return Ye(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return SE("unexpected MultiFactorSessionType")}}}]),e}()),rP=function(){function e(){Ze(this,e)}return Ye(e,null,[{key:"assertion",value:function(e){return nP._fromCredential(e)}}]),e}();rP.FACTOR_ID="phone";var iP,aP="@firebase/auth",oP="0.20.2",uP=function(){function e(t){Ze(this,e),this.auth=t,this.internalListeners=new Map}return Ye(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){IE(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();iP="Browser",fu(new Io("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){IE(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),IE(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:iP,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LI(iP)},i=new FI(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(NE);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),fu(new Io("auth-internal",(function(e){return function(e){return new uP(e)}(jI(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Eu(aP,oP,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(iP)),Eu(aP,oP,"esm2017");var sP=n(9969),cP=Zu.initializeApp({apiKey:"AIzaSyCJonn2C_qVKKkjnUwDjsFep48AthW8mXs",authDomain:"microgreens-c3970.firebaseapp.com",projectId:"microgreens-c3970",storageBucket:"microgreens-c3970.appspot.com",messagingSenderId:"136019085614",appId:"1:136019085614:web:672ad672ad470008a0d2bf",measurementId:"G-EWC1W1Q7XK"}),lP=new sP.Z(cP),fP="PRODUCTS.GET_PRODUCTS",hP="PRODUCTS.FETCH_PRODUCTS",dP=function(e){return{type:fP,payload:e}},pP=Ea().mark(yP),vP=Ea().mark(mP);function yP(){var e,t;return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Ia.call)(lP.firestore.getCollection,"products");case 2:return e=n.sent,t=e.docs.map((function(e){return(0,i.Z)({id:e.id},e.data())})),n.next=6,(0,Ia.put)(dP(t));case 6:case"end":return n.stop()}}),pP)}function mP(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ia.takeEvery)(hP,yP);case 2:case"end":return e.stop()}}),vP)}function gP(){return window}function kP(e,t,n){return wP.apply(this,arguments)}function wP(){return wP=Eo(Ea().mark((function e(t,n,r){var i,a,o,u,s;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=gP(),o=a.BuildInfo,TE(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,SP(n.sessionId);case 4:return u=e.sent,s={},AI()?s.ibi=o.packageName:CI()?s.apn=o.packageName:wE(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",XN(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),wP.apply(this,arguments)}function bP(){return(bP=Eo(Ea().mark((function e(t){var n,r,i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gP(),r=n.BuildInfo,i={},AI()?i.iosBundleId=r.packageName:CI()?i.androidPackageName=r.packageName:wE(t,"operation-not-supported-in-this-environment"),e.next=5,CN(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _P(e){var t=gP().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function xP(e,t,n){return EP.apply(this,arguments)}function EP(){return EP=Eo(Ea().mark((function e(t,n,r){var i,a,o;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gP(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(bE(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),CI()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),EP.apply(this,arguments)}function IP(e){var t,n,r,i,a,o,u,s,c,l,f=gP();IE("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),IE("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),IE("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),IE("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),IE("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function SP(e){return TP.apply(this,arguments)}function TP(){return(TP=Eo(Ea().mark((function e(t){var n,r,i;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=CP(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CP(e){if(TE(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var NP=function(e){jt(n,e);var t=zt(n);function n(){var e;return Ze(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Ye(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ft(Lt(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(IN);function PP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:LP(),postBody:null,tenantId:e.tenantId,error:bE(e,"no-auth-event")}}function AP(e,t){return MP()._set(FP(e),t)}function RP(e){return OP.apply(this,arguments)}function OP(){return(OP=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MP()._get(FP(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,MP()._remove(FP(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DP(e,t){var n,r,i=function(e){var t=jP(e),n=t.link?decodeURIComponent(t.link):void 0,r=jP(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return jP(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=jP(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(FU){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?bE(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function LP(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function MP(){return NE(KT)}function FP(e){return bI("authEvent",e.config.apiKey,e.name)}function jP(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=je(t=n)||He(t)||qe(t)||Ve();r[0];return lo(r.slice(1).join("?"))}var UP=function(){function e(){Ze(this,e),this._redirectPersistence=GT,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bN,this._overrideRedirectResult=lN}return Ye(e,[{key:"_initialize",value:function(){var e=Eo(Ea().mark((function e(t){var n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new NP(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){wE(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Eo(Ea().mark((function e(t,n,r,i){var a,o,u,s;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return IP(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),iN.clear(),e.next=10,this._originValidation(t);case 10:return o=PP(t,r,i),e.next=13,AP(t,o);case 13:return e.next=15,kP(t,o,n);case 15:return u=e.sent,e.next=18,_P(u);case 18:return s=e.sent,e.abrupt("return",xP(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return bP.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=gP(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Eo(Ea().mark((function n(){return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,RP(e);case 2:t.onEvent(VP());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Eo(Ea().mark((function n(r){var i,a;return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,RP(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=DP(i,r.url)),t.onEvent(a||VP());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");gP().handleOpenURL=function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(FU){console.error(FU)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),qP=UP;function VP(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:bE("no-auth-event")}}function BP(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function zP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba();return!("file:"!==BP()&&"ionic:"!==BP()&&"capacitor:"!==BP()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function WP(){return Ga()&&11===(null===document||void 0===document?void 0:document.documentMode)}function KP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba();return/Edge\/\d+/.test(e)}function HP(){try{var e=self.localStorage,t=YT();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba();return WP()||KP(e)}()||Qa()}catch(FU){return GP()&&Qa()}return!1}function GP(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ZP(){return("http:"===BP()||"https:"===BP()||Ka()||zP())&&!(Ha()||Wa())&&HP()&&!GP()}function QP(){return zP()&&"undefined"!==typeof document}function YP(){return $P.apply(this,arguments)}function $P(){return($P=Eo(Ea().mark((function e(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(QP()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var XP={LOCAL:"local",NONE:"none",SESSION:"session"},JP=IE,eA="persistence";function tA(e,t){JP(Object.values(XP).includes(t),e,"invalid-persistence-type"),Ha()?JP(t!==XP.SESSION,e,"unsupported-persistence-type"):Wa()?JP(t===XP.NONE,e,"unsupported-persistence-type"):GP()?JP(t===XP.NONE||t===XP.LOCAL&&Qa(),e,"unsupported-persistence-type"):JP(t===XP.NONE||HP(),e,"unsupported-persistence-type")}function nA(e){return rA.apply(this,arguments)}function rA(){return(rA=Eo(Ea().mark((function e(t){var n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=iA(),r=bI(eA,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iA(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(FU){return null}}var aA=IE,oA=function(){function e(){Ze(this,e),this.browserResolver=NE(tP),this.cordovaResolver=NE(qP),this.underlyingResolver=null,this._redirectPersistence=GT,this._completeRedirectFn=bN,this._overrideRedirectResult=lN}return Ye(e,[{key:"_initialize",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Eo(Ea().mark((function e(t,n,r,i){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Eo(Ea().mark((function e(t,n,r,i){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return QP()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return aA(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Eo(Ea().mark((function e(){var t;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,YP();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function uA(e){return e.unwrap()}function sA(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new dA(e,function(e,t){var n,r=_o(e),i=t;return IE(t.customData.operationType,r,"argument-error"),IE(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),jT._fromError(r,i)}(e,t));else if(r){var i=cA(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function cA(e){var t=(e instanceof Ya?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ya)&&"temporaryProof"in t&&"phoneNumber"in t)return zC.credentialFromResult(e);var n,r=t.providerId;if(!r||r===oE)return null;switch(r){case aE:n=NS;break;case rE:n=CS;break;case iE:n=PS;break;case uE:n=OS;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?AS._create(r,u):vS._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new TS(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Ya?n.credentialFromError(e):n.credentialFromResult(e)}function lA(e,t){return t.catch((function(t){throw t instanceof Ya&&sA(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,cA(t)),additionalUserInfo:MT(e),user:pA.getOrCreate(r)}}))}function fA(e,t){return hA.apply(this,arguments)}function hA(){return(hA=Eo(Ea().mark((function e(t,n){var r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return lA(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dA=function(){function e(t,n){Ze(this,e),this.resolver=n,this.auth=function(e){return e.wrapped()}(t)}return Ye(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return lA(uA(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),pA=function(){function e(t){Ze(this,e),this._delegate=t,this.multiFactor=function(e){var t=_o(e);return VT.has(t)||VT.set(t,qT._fromUser(t)),VT.get(t)}(t)}return Ye(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lA(this.auth,eT(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fA(this.auth,FC(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lA(this.auth,tN(this._delegate,t,oA)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nA(jI(this.auth));case 2:return e.abrupt("return",mN(this._delegate,t,oA));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lA(this.auth,nT(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return fA(this.auth,function(e,t,n){return UC.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return lA(this.auth,function(e,t,n){return eN.apply(this,arguments)}(this._delegate,e,oA))}},{key:"reauthenticateWithRedirect",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nA(jI(this.auth));case 2:return e.abrupt("return",vN(this._delegate,t,oA));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return xT.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BS(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return CT(_o(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return CT(_o(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return BC.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return TT.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ET.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();pA.USER_MAP=new WeakMap;var vA=IE,yA=function(){function e(t,n){if(Ze(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;vA(r,"invalid-api-key",{appName:t.name}),vA(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?oA:void 0;this._delegate=n.initialize({options:{persistence:gA(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(vE),this.linkUnderlyingAuth()}return Ye(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?pA.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){qI(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return hT.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return dT(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return fT.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Eo(Ea().mark((function e(t,n){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lA(this._delegate,yT(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return _T.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=xS.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Eo(Ea().mark((function e(){var t;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vA(ZP(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,kN(this._delegate,oA);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",lA(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){jI(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=mA(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=mA(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return gT.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return lT.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Eo(Ea().mark((function e(t){var n,r;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tA(this._delegate,t),e.t0=t,e.next=e.t0===XP.SESSION?4:e.t0===XP.LOCAL?6:e.t0===XP.NONE?11:13;break;case 4:return n=GT,e.abrupt("break",14);case 6:return e.next=8,NE(yC)._isAvailable();case 8:return r=e.sent,n=r?yC:KT,e.abrupt("break",14);case 11:return n=wI,e.abrupt("break",14);case 13:return e.abrupt("return",wE("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return lA(this._delegate,function(e){return jS.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return lA(this._delegate,XS(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return lA(this._delegate,function(e,t){return oT.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return lA(this._delegate,function(e,t,n){return XS(_o(e),ES.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return lA(this._delegate,function(e,t,n){return kT.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return fA(this._delegate,function(e,t,n){return MC.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vA(ZP(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",lA(this._delegate,XC(this._delegate,t,oA)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Eo(Ea().mark((function e(t){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vA(ZP(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,nA(this._delegate);case 3:return e.abrupt("return",dN(this._delegate,t,oA));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return vT.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function mA(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&pA.getOrCreate(e))},error:t,complete:n}}function gA(e,t){var n=function(e,t){var n=iA();if(!n)return[];var r=bI(eA,e,t);switch(n.getItem(r)){case XP.NONE:return[wI];case XP.LOCAL:return[yC,GT];case XP.SESSION:return[GT];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(yC)||n.push(yC),"undefined"!==typeof window)for(var r=0,i=[KT,GT];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(wI)||n.push(wI),n}yA.Persistence=XP;var kA=function(){function e(){Ze(this,e),this.providerId="phone",this._delegate=new zC(uA(Zu.auth()))}return Ye(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return zC.credential(e,t)}}]),e}();kA.PHONE_SIGN_IN_METHOD=zC.PHONE_SIGN_IN_METHOD,kA.PROVIDER_ID=zC.PROVIDER_ID;var wA,bA=IE,_A=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zu.app();Ze(this,e),bA(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new OC(t,n,i.auth()),this.type=this._delegate.type}return Ye(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(wA=Zu).INTERNAL.registerComponent(new Io("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new yA(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:sE,PASSWORD_RESET:cE,RECOVER_EMAIL:lE,REVERT_SECOND_FACTOR_ADDITION:fE,VERIFY_AND_CHANGE_EMAIL:hE,VERIFY_EMAIL:dE}},EmailAuthProvider:ES,FacebookAuthProvider:CS,GithubAuthProvider:PS,GoogleAuthProvider:NS,OAuthProvider:TS,SAMLAuthProvider:RS,PhoneAuthProvider:kA,PhoneMultiFactorGenerator:rP,RecaptchaVerifier:_A,TwitterAuthProvider:OS,Auth:yA,AuthCredential:zI,Error:Ya}).setInstantiationMode("LAZY").setMultipleInstances(!1)),wA.registerVersion("@firebase/auth-compat","0.2.15");var xA="@firebase/database",EA="0.13.0",IA="";function SA(e){IA=e}var TA=function(){function e(t){Ze(this,e),this.domStorage_=t,this.prefix_="firebase:"}return Ye(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),to(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:eo(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),CA=function(){function e(){Ze(this,e),this.cache_={},this.isInMemoryStorage=!0}return Ye(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ro(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),NA=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new TA(t)}}catch(FU){}return new CA},PA=NA("localStorage"),AA=NA("sessionStorage"),RA=new Mo("@firebase/database"),OA=function(){var e=1;return function(){return e++}}(),DA=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Ra(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ho;n.update(t);var r=n.digest();return La.encodeByteArray(r)},LA=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?to(r):r,t+=" "}return t},MA=null,FA=!0,jA=function(e,t){Ra(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(RA.logLevel=No.VERBOSE,MA=RA.log.bind(RA),t&&AA.set("logging_enabled",!0)):"function"===typeof e?MA=e:(MA=null,AA.remove("logging_enabled"))},UA=function(){if(!0===FA&&(FA=!1,null===MA&&!0===AA.get("logging_enabled")&&jA(!0)),MA){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=LA.apply(null,t);MA(r)}},qA=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];UA.apply(void 0,[e].concat(n))}},VA=function(){var e="FIREBASE INTERNAL ERROR: "+LA.apply(void 0,arguments);RA.error(e)},BA=function(){var e="FIREBASE FATAL ERROR: ".concat(LA.apply(void 0,arguments));throw RA.error(e),new Error(e)},zA=function(){var e="FIREBASE WARNING: "+LA.apply(void 0,arguments);RA.warn(e)},WA=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},KA="[MIN_NAME]",HA="[MAX_NAME]",GA=function(e,t){if(e===t)return 0;if(e===KA||t===HA)return-1;if(t===KA||e===HA)return 1;var n=rR(e),r=rR(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},ZA=function(e,t){return e===t?0:e<t?-1:1},QA=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+to(t))},YA=function e(t){if("object"!==typeof t||null===t)return to(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=to(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},$A=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function XA(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var JA=function(e){Ra(!WA(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var eR=new RegExp("^-?(0*)\\d{1,10}$"),tR=-2147483648,nR=2147483647,rR=function(e){if(eR.test(e)){var t=Number(e);if(t>=tR&&t<=nR)return t}return null},iR=function(e){try{e()}catch(FU){setTimeout((function(){var t=FU.stack||"";throw zA("Exception was thrown by user callback.",t),FU}),Math.floor(0))}},aR=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},oR=function(){function e(t,n){var r=this;Ze(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return Ye(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){zA('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),uR=function(){function e(t,n,r){var i=this;Ze(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return Ye(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(UA("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zA(e)}}]),e}(),sR=function(){function e(t){Ze(this,e),this.accessToken=t}return Ye(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();sR.OWNER="owner";var cR="5",lR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fR="websocket",hR="long_polling",dR=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Ze(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=PA.get("host:"+t)||this._host}return Ye(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&PA.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function pR(e,t,n){var r;if(Ra("string"===typeof t,"typeof type must == string"),Ra("object"===typeof n,"typeof params must == object"),t===fR)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==hR)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return XA(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var vR=function(){function e(){Ze(this,e),this.counters_={}}return Ye(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ro(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Ua(void 0,this.counters_)}}]),e}(),yR={},mR={};function gR(e){var t=e.toString();return yR[t]||(yR[t]=new vR),yR[t]}var kR=function(){function e(t){Ze(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return Ye(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&iR((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),wR="start",bR="close",_R=function(){function e(t,n,r,i,a,o,u){var s=this;Ze(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qA(t),this.stats_=gR(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),pR(n,hR,e)}}return Ye(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new kR(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Za()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new xR((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===wR)n.id=a,n.password=o;else{if(i!==bR)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=cR,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&lR.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=to(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Ma(t),r=$A(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Za()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=to(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Za()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),xR=function(){function e(t,n,r,i){if(Ze(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Za())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=OA(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(FU){UA("frame writing exception"),FU.stack&&UA(FU.stack),UA(FU)}}}return Ye(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Za()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){UA("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(FU){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||UA("No IE domain setting required")}catch(FU){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),ER=null;"undefined"!==typeof MozWebSocket?ER=MozWebSocket:"undefined"!==typeof WebSocket&&(ER=WebSocket);var IR=function(){function e(t,n,r,i,a,o,u){Ze(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qA(this.connId),this.stats_=gR(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return Ye(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,PA.set("previous_websocket_failure",!0);try{if(Za()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(cR,"/").concat(IA,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/chip",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o})}this.mySock=new ER(this.connURL,[],undefined)}catch(FU){this.log_("Error instantiating WebSocket.");var u=FU.message||FU.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){PA.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=eo(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Ra(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=to(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=$A(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(FU){this.log_("Exception thrown from WebSocket.send():",FU.message||FU.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=cR,!Za()&&"undefined"!==typeof location&&location.hostname&&lR.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),pR(e,fR,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==ER&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return PA.isInMemoryStorage||!0===PA.get("previous_websocket_failure")}}]),e}();IR.responsesRequiredToBeHealthy=2,IR.healthyTimeout=3e4;var SR=function(){function e(t){Ze(this,e),this.initTransports_(t)}return Ye(e,[{key:"initTransports_",value:function(t){var n=IR&&IR.isAvailable(),r=n&&!IR.previouslyFailed();if(t.webSocketOnly&&(n||zA("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[IR];else{var i,a=this.transports_=[],o=Sa(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[_R,IR]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();SR.globalTransportInitialized_=!1;var TR=function(){function e(t,n,r,i,a,o,u,s,c,l){Ze(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qA("c:"+this.id+":"),this.transportManager_=new SR(n),this.log_("Connection created"),this.start_()}return Ye(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=aR((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=QA("t",e),n=QA("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=QA("t",e),n=QA("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=QA("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?VA("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):VA("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),cR!==n&&zA("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),aR((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):aR((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(PA.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),CR=function(){function e(){Ze(this,e)}return Ye(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),NR=function(){function e(t){Ze(this,e),this.allowedEvents_=t,this.listeners_={},Ra(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return Ye(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=Ge(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Ra(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),PR=function(e){jt(n,e);var t=zt(n);function n(){var e;return Ze(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||za()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Ye(n,[{key:"getInitialEvent",value:function(e){return Ra("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(NR),AR=function(){function e(t,n){if(Ze(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return Ye(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function RR(){return new AR("")}function OR(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function DR(e){return e.pieces_.length-e.pieceNum_}function LR(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new AR(e.pieces_,t)}function MR(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function FR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function jR(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new AR(t,0)}function UR(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof AR)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new AR(n,0)}function qR(e){return e.pieceNum_>=e.pieces_.length}function VR(e,t){var n=OR(e),r=OR(t);if(null===n)return t;if(n===r)return VR(LR(e),LR(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function BR(e,t){for(var n=FR(e,0),r=FR(t,0),i=0;i<n.length&&i<r.length;i++){var a=GA(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function zR(e,t){if(DR(e)!==DR(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function WR(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(DR(e)>DR(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var KR=Ye((function e(t,n){Ze(this,e),this.errorPrefix_=n,this.parts_=FR(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=bo(this.parts_[r]);HR(this)}));function HR(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+GR(e))}function GR(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var ZR=function(e){jt(n,e);var t=zt(n);function n(){var e,r,i;return Ze(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return Ye(n,[{key:"getInitialEvent",value:function(e){return Ra("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(NR),QR=1e3,YR=function(e){jt(n,e);var t=zt(n);function n(e,r,i,a,o,u,s,c){var l;if(Ze(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=qA("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=QR,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Za())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return ZR.getInstance().on("visible",l.onVisible_,Vt(l)),-1===e.host.indexOf("fblocal")&&PR.getInstance().on("online",l.onOnline_,Vt(l)),l}return Ye(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(to(i)),Ra(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new qa,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Ra(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ra(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=no(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=no(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ra(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+to(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):VA("Unrecognized action received from server: "+to(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Ra(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=QR,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=QR,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=QR),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Eo(Ea().mark((function e(){var t,r,i,a,o,u,s,c,l,f,h,d,p,v,y=this;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,c=function(){s?s.close():(u=!0,i())},l=function(e){Ra(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:c,sendRequest:l},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:h=e.sent,d=Be(h,2),p=d[0],v=d[1],u?UA("getToken() completed but was canceled"):(UA("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,s=new TR(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){zA(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&zA(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){UA("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){UA("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ao(this.interruptReasons_)&&(this.reconnectDelay_=QR,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return YA(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new AR(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){UA("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){UA("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=Sa(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=Sa(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Za()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+IA.replace(/\./g,"-")]=1,za()?e["framework.cordova"]=1:Ha()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=PR.getInstance().currentlyOnline();return ao(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ro(e,"w")){var n=io(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();zA("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(CR);YR.nextPersistentConnectionId_=0,YR.nextConnectionId_=0;var $R,XR=function(){function e(t,n){Ze(this,e),this.name=t,this.node=n}return Ye(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),JR=function(){function e(){Ze(this,e)}return Ye(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new XR(KA,e),r=new XR(KA,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return XR.MIN}}]),e}(),eO=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"compare",value:function(e,t){return GA(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Oa("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return XR.MIN}},{key:"maxPost",value:function(){return new XR(HA,$R)}},{key:"makePost",value:function(e,t){return Ra("string"===typeof e,"KeyIndex indexValue must always be a string."),new XR(e,$R)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return $R},set:function(e){$R=e}}]),n}(JR),tO=new eO,nO=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Ze(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return Ye(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),rO=function(){function e(t,n,r,i,a){Ze(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:oO.EMPTY_NODE,this.right=null!=a?a:oO.EMPTY_NODE}return Ye(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return oO.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return oO.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();rO.RED=!0,rO.BLACK=!1;var iO,aO=function(){function e(){Ze(this,e)}return Ye(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new rO(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),oO=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;Ze(this,e),this.comparator_=t,this.root_=n}return Ye(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,rO.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,rO.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new nO(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new nO(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new nO(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new nO(this.root_,null,this.comparator_,!0,e)}}]),e}();function uO(e,t){return GA(e.name,t.name)}function sO(e,t){return GA(e,t)}oO.EMPTY_NODE=new aO;var cO,lO,fO,hO=function(e){return"number"===typeof e?"number:"+JA(e):"string:"+e},dO=function(e){if(e.isLeafNode()){var t=e.val();Ra("string"===typeof t||"number"===typeof t||"object"===typeof t&&ro(t,".sv"),"Priority must be a string or number.")}else Ra(e===iO||e.isEmpty(),"priority of unexpected type.");Ra(e===iO||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},pO=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;Ze(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Ra(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),dO(this.priorityNode_)}return Ye(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return qR(t)?this:".priority"===OR(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=OR(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Ra(".priority"!==r||1===DR(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(LR(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+hO(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?JA(this.value_):this.value_,this.lazyHash_=DA(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Ra(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Ra(i>=0,"Unknown leaf type: "+n),Ra(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return cO},set:function(e){cO=e}}]),e}();pO.VALUE_TYPE_ORDER=["object","boolean","number","string"];var vO,yO,mO=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?GA(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return XR.MIN}},{key:"maxPost",value:function(){return new XR(HA,new pO("[PRIORITY-POST]",fO))}},{key:"makePost",value:function(e,t){var n=lO(e);return new XR(t,new pO("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(JR),gO=new mO,kO=Math.log(2),wO=function(){function e(t){Ze(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/kO,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return Ye(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),bO=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new rO(o,a.node,rO.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new rO(o,a.node,rO.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new rO(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,rO.BLACK):(u(f,rO.BLACK),u(f,rO.RED))}return a}(new wO(e.length));return new oO(r||t,a)},_O={},xO=function(){function e(t,n){Ze(this,e),this.indexes_=t,this.indexSet_=n}return Ye(e,[{key:"get",value:function(e){var t=io(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof oO?t:null}},{key:"hasIndex",value:function(e){return ro(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Ra(t!==tO,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(XR.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?bO(i,t.getCompare()):_O;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(oo(this.indexes_,(function(e,i){var a=io(r.indexSet_,i);if(Ra(a,"Missing index implementation for "+i),e===_O){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(XR.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),bO(o,a.getCompare())}return _O}var c=n.get(t.name),l=e;return c&&(l=l.remove(new XR(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(oo(this.indexes_,(function(e){if(e===_O)return e;var r=n.get(t.name);return r?e.remove(new XR(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Ra(_O&&gO,"ChildrenNode.ts has not been loaded"),vO=vO||new e({".priority":_O},{".priority":gO})}}]),e}(),EO=function(){function e(t,n,r){Ze(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&dO(this.priorityNode_),this.children_.isEmpty()&&Ra(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Ye(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||yO}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?yO:t}},{key:"getChild",value:function(e){var t=OR(e);return null===t?this:this.getImmediateChild(t).getChild(LR(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Ra(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new XR(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?yO:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=OR(e);if(null===n)return t;Ra(".priority"!==OR(e)||1===DR(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(LR(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(gO,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+hO(this.getPriority().val())+":"),this.forEachChild(gO,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":DA(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new XR(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new XR(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new XR(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,XR.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,XR.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===IO?-1:0}},{key:"withIndex",value:function(t){if(t===tO||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===tO||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(gO),r=t.getIterator(gO),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===tO?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return yO||(yO=new e(new oO(sO),null,xO.Default))}}]),e}();EO.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var IO=new(function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.call(this,new oO(sO),EO.EMPTY_NODE,xO.Default)}return Ye(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return EO.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(EO));Object.defineProperties(XR,{MIN:{value:new XR(KA,EO.EMPTY_NODE)},MAX:{value:new XR(HA,IO)}}),eO.__EMPTY_NODE=EO.EMPTY_NODE,pO.__childrenNodeConstructor=EO,iO=IO,function(e){fO=e}(IO);function SO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return EO.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ra(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new pO(n,SO(t))}if(e instanceof Array){var r=EO.EMPTY_NODE;return XA(e,(function(t,n){if(ro(e,t)&&"."!==t.substring(0,1)){var i=SO(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(SO(t))}var i=[],a=!1,o=e;if(XA(o,(function(e,t){if("."!==e.substring(0,1)){var n=SO(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new XR(e,n)))}})),0===i.length)return EO.EMPTY_NODE;var u=bO(i,uO,(function(e){return e.name}),sO);if(a){var s=bO(i,gO.getCompare());return new EO(u,SO(t),new xO({".priority":s},{".priority":gO}))}return new EO(u,SO(t),xO.Default)}!function(e){lO=e}(SO);var TO=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this)).indexPath_=e,Ra(!qR(e)&&".priority"!==OR(e),"Can't create PathIndex with empty path or .priority key"),r}return Ye(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?GA(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=SO(e),r=EO.EMPTY_NODE.updateChild(this.indexPath_,n);return new XR(t,r)}},{key:"maxPost",value:function(){var e=EO.EMPTY_NODE.updateChild(this.indexPath_,IO);return new XR(HA,e)}},{key:"toString",value:function(){return FR(this.indexPath_,0).join("/")}}]),n}(JR),CO=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?GA(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return XR.MIN}},{key:"maxPost",value:function(){return XR.MAX}},{key:"makePost",value:function(e,t){var n=SO(e);return new XR(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(JR),NO=new CO,PO="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",AO=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=PO.charAt(n%64),n=Math.floor(n/64);Ra(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=PO.charAt(t[r]);return Ra(20===o.length,"nextPushId: Length should be 20."),o}}(),RO=function(e){if("2147483647"===e)return"-";var t=rR(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return HA;var a=n[i],o=PO.charAt(PO.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},OO=function(e){if("-2147483648"===e)return KA;var t=rR(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=PO.charAt(PO.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function DO(e){return{type:"value",snapshotNode:e}}function LO(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function MO(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function FO(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var jO=function(){function e(t){Ze(this,e),this.index_=t}return Ye(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Ra(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(MO(t,o)):Ra(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(LO(t,n)):a.trackChildChange(FO(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(gO,(function(e,r){t.hasChild(e)||n.trackChildChange(MO(e,r))})),t.isLeafNode()||t.forEachChild(gO,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(FO(t,r,i))}else n.trackChildChange(LO(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?EO.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),UO=function(){function e(t){Ze(this,e),this.indexedFilter_=new jO(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return Ye(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new XR(t,n))||(n=EO.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=EO.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(EO.EMPTY_NODE);var i=this;return t.forEachChild(gO,(function(e,t){i.matches(new XR(e,t))||(r=r.updateImmediateChild(e,EO.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),qO=function(){function e(t){Ze(this,e),this.rangedFilter_=new UO(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return Ye(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new XR(t,n))||(n=EO.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=EO.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=EO.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(EO.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var f=this.index_.getCompare();c=function(e,t){return f(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var h=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&h<this.limit_&&c(p,s)<=0?h++:r=r.updateImmediateChild(p.name,EO.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;Ra(u.numChildren()===this.limit_,"");var s=new XR(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||u.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(FO(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(MO(t,f));var p=u.updateImmediateChild(t,EO.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(LO(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(MO(c.name,c.node)),i.trackChildChange(LO(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,EO.EMPTY_NODE)):e}}]),e}(),VO=function(){function e(){Ze(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=gO}return Ye(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Ra(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Ra(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:KA}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Ra(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Ra(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:HA}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Ra(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===gO}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function BO(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function zO(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function WO(e,t){var n=e.copy();return n.index_=t,n}function KO(e){var t,n={};return e.isDefault()||(e.index_===gO?t="$priority":e.index_===NO?t="$value":e.index_===tO?t="$key":(Ra(e.index_ instanceof TO,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=to(t),e.startSet_&&(n.startAt=to(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+to(e.indexStartName_))),e.endSet_&&(n.endAt=to(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+to(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function HO(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==gO&&(t.i=e.index_.toString()),t}var GO=function(e){jt(n,e);var t=zt(n);function n(e,r,i,a){var o;return Ze(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=qA("p:rest:"),o.listens_={},o}return Ye(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=KO(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),io(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=KO(e._queryParams),r=e._path.toString(),i=new qa;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=Be(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+co(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=eo(c.responseText)}catch(FU){zA("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&zA("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Ra(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(CR),ZO=function(){function e(){Ze(this,e),this.rootNode_=EO.EMPTY_NODE}return Ye(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function QO(){return{value:null,children:new Map}}function YO(e,t,n){if(qR(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=OR(t);e.children.has(r)||e.children.set(r,QO()),YO(e.children.get(r),t=LR(t),n)}}function $O(e,t){if(qR(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(gO,(function(t,n){YO(e,new AR(t),n)})),$O(e,t)}if(e.children.size>0){var r=OR(t);if(t=LR(t),e.children.has(r))$O(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function XO(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){XO(r,new AR(t.toString()+"/"+e),n)}))}var JO,eD=function(){function e(t){Ze(this,e),this.collection_=t,this.last_=null}return Ye(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&XA(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),tD=function(){function e(t,n){Ze(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new eD(t);var r=1e4+2e4*Math.random();aR(this.reportStats_.bind(this),Math.floor(r))}return Ye(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;XA(t,(function(t,i){i>0&&ro(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),aR(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function nD(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(JO||(JO={}));var rD,iD=function(){function e(t,n,r){Ze(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=JO.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return Ye(e,[{key:"operationForChild",value:function(t){if(qR(this.path)){if(null!=this.affectedTree.value)return Ra(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new AR(t));return new e(RR(),n,this.revert)}return Ra(OR(this.path)===t,"operationForChild called for unrelated child."),new e(LR(this.path),this.affectedTree,this.revert)}}]),e}(),aD=function(){function e(t,n){Ze(this,e),this.source=t,this.path=n,this.type=JO.LISTEN_COMPLETE}return Ye(e,[{key:"operationForChild",value:function(t){return qR(this.path)?new e(this.source,RR()):new e(this.source,LR(this.path))}}]),e}(),oD=function(){function e(t,n,r){Ze(this,e),this.source=t,this.path=n,this.snap=r,this.type=JO.OVERWRITE}return Ye(e,[{key:"operationForChild",value:function(t){return qR(this.path)?new e(this.source,RR(),this.snap.getImmediateChild(t)):new e(this.source,LR(this.path),this.snap)}}]),e}(),uD=function(){function e(t,n,r){Ze(this,e),this.source=t,this.path=n,this.children=r,this.type=JO.MERGE}return Ye(e,[{key:"operationForChild",value:function(t){if(qR(this.path)){var n=this.children.subtree(new AR(t));return n.isEmpty()?null:n.value?new oD(this.source,RR(),n.value):new e(this.source,RR(),n)}return Ra(OR(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,LR(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),sD=function(){function e(t,n,r){Ze(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return Ye(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(qR(e))return this.isFullyInitialized()&&!this.filtered_;var t=OR(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),cD=Ye((function e(t){Ze(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function lD(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Oa("Should only compare child_ events.");var r=new XR(t.childName,t.snapshotNode),i=new XR(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function fD(e,t){return{eventCache:e,serverCache:t}}function hD(e,t,n,r){return fD(new sD(t,n,r),e.serverCache)}function dD(e,t,n,r){return fD(e.eventCache,new sD(t,n,r))}function pD(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function vD(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var yD=function(){return rD||(rD=new oO(ZA)),rD},mD=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yD();Ze(this,e),this.value=t,this.children=n}return Ye(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:RR(),value:this.value};if(qR(e))return null;var n=OR(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(LR(e),t);return null!=i?{path:UR(new AR(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(qR(t))return this;var n=OR(t),r=this.children.get(n);return null!==r?r.subtree(LR(t)):new e(null)}},{key:"set",value:function(t,n){if(qR(t))return new e(n,this.children);var r=OR(t),i=(this.children.get(r)||new e(null)).set(LR(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(qR(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=OR(t),r=this.children.get(n);if(r){var i,a=r.remove(LR(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(qR(e))return this.value;var t=OR(e),n=this.children.get(t);return n?n.get(LR(e)):null}},{key:"setTree",value:function(t,n){if(qR(t))return n;var r,i=OR(t),a=(this.children.get(i)||new e(null)).setTree(LR(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(RR(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(UR(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,RR(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(qR(e))return null;var i=OR(e),a=this.children.get(i);return a?a.findOnPath_(LR(e),UR(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,RR(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(qR(t))return this;this.value&&r(n,this.value);var i=OR(t),a=this.children.get(i);return a?a.foreachOnPath_(LR(t),UR(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(RR(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(UR(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return XA(t,(function(e,t){n=n.set(new AR(e),t)})),n}}]),e}(),gD=function(){function e(t){Ze(this,e),this.writeTree_=t}return Ye(e,null,[{key:"empty",value:function(){return new e(new mD(null))}}]),e}();function kD(e,t,n){if(qR(t))return new gD(new mD(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=VR(i,t);return a=a.updateChild(o,n),new gD(e.writeTree_.set(i,a))}var u=new mD(n),s=e.writeTree_.setTree(t,u);return new gD(s)}function wD(e,t,n){var r=e;return XA(n,(function(e,n){r=kD(r,UR(t,e),n)})),r}function bD(e,t){if(qR(t))return gD.empty();var n=e.writeTree_.setTree(t,new mD(null));return new gD(n)}function _D(e,t){return null!=xD(e,t)}function xD(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(VR(n.path,t)):null}function ED(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(gO,(function(e,n){t.push(new XR(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new XR(e,n.value))})),t}function ID(e,t){if(qR(t))return e;var n=xD(e,t);return new gD(null!=n?new mD(n):e.writeTree_.subtree(t))}function SD(e){return e.writeTree_.isEmpty()}function TD(e,t){return CD(RR(),e.writeTree_,t)}function CD(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Ra(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=CD(UR(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(UR(e,".priority"),r)),n}function ND(e,t){return zD(t,e)}function PD(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function AD(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Ra(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&RD(u,r.path)?i=!1:WR(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=DD(e.allWrites,OD,RR()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=bD(e.visibleWrites,r.path):XA(r.children,(function(t){e.visibleWrites=bD(e.visibleWrites,UR(r.path,t))}));return!0}return!1}function RD(e,t){if(e.snap)return WR(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&WR(UR(e.path,n),t))return!0;return!1}function OD(e){return e.visible}function DD(e,t,n){for(var r=gD.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)WR(n,o)?r=kD(r,u=VR(n,o),a.snap):WR(o,n)&&(u=VR(o,n),r=kD(r,RR(),a.snap.getChild(u)));else{if(!a.children)throw Oa("WriteRecord should have .snap or .children");if(WR(n,o))r=wD(r,u=VR(n,o),a.children);else if(WR(o,n))if(qR(u=VR(o,n)))r=wD(r,RR(),a.children);else{var s=io(a.children,OR(u));if(s){var c=s.getChild(LR(u));r=kD(r,RR(),c)}}}}}return r}function LD(e,t,n,r,i){if(r||i){var a=ID(e.visibleWrites,t);if(!i&&SD(a))return n;if(i||null!=n||_D(a,RR())){return TD(DD(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(WR(e.path,t)||WR(t,e.path))}),t),n||EO.EMPTY_NODE)}return null}var o=xD(e.visibleWrites,t);if(null!=o)return o;var u=ID(e.visibleWrites,t);return SD(u)?n:null!=n||_D(u,RR())?TD(u,n||EO.EMPTY_NODE):null}function MD(e,t,n,r){return LD(e.writeTree,e.treePath,t,n,r)}function FD(e,t){return function(e,t,n){var r=EO.EMPTY_NODE,i=xD(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(gO,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=ID(e.visibleWrites,t);return n.forEachChild(gO,(function(e,t){var n=TD(ID(a,new AR(e)),t);r=r.updateImmediateChild(e,n)})),ED(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return ED(ID(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function jD(e,t,n,r){return function(e,t,n,r,i){Ra(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=UR(t,n);if(_D(e.visibleWrites,a))return null;var o=ID(e.visibleWrites,a);return SD(o)?i.getChild(n):TD(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function UD(e,t){return function(e,t){return xD(e.visibleWrites,t)}(e.writeTree,UR(e.treePath,t))}function qD(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=ID(e.visibleWrites,t),c=xD(s,RR());if(null!=c)u=c;else{if(null==n)return[];u=TD(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function VD(e,t,n){return function(e,t,n,r){var i=UR(t,n),a=xD(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?TD(ID(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function BD(e,t){return zD(UR(e.treePath,t),e.writeTree)}function zD(e,t){return{treePath:e,writeTree:t}}var WD=function(){function e(){Ze(this,e),this.changeMap=new Map}return Ye(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Ra("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ra(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,FO(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,MO(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,LO(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Oa("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,FO(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),KD=new(function(){function e(){Ze(this,e)}return Ye(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),HD=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Ze(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return Ye(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new sD(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return VD(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:vD(this.viewCache_),i=qD(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function GD(e,t,n,r,i){var a,o,u=new WD;if(n.type===JO.OVERWRITE){var s=n;s.source.fromUser?a=YD(e,t,s.path,s.snap,r,i,u):(Ra(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!qR(s.path),a=QD(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===JO.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=UR(n,r);$D(t,OR(c))&&(u=YD(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=UR(n,r);$D(t,OR(c))||(u=YD(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(Ra(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=JD(e,t,c.path,c.children,r,i,o,u))}else if(n.type===JO.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=UD(r,n))return t;var u,s=new HD(r,t,i),c=t.eventCache.getNode();if(qR(n)||".priority"===OR(n)){var l;if(t.serverCache.isFullyInitialized())l=MD(r,vD(t));else{var f=t.serverCache.getNode();Ra(f instanceof EO,"serverChildren would be complete if leaf node"),l=FD(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var h=OR(n),d=VD(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,LR(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,EO.EMPTY_NODE,LR(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=MD(r,vD(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=UD(r,RR()),hD(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=UD(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(qR(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return QD(e,t,n,s.getNode().getChild(n),i,a,u,o);if(qR(n)){var c=new mD(null);return s.getNode().forEachChild(tO,(function(e,t){c=c.set(new AR(e),t)})),JD(e,t,n,c,i,a,u,o)}return t}var l=new mD(null);return r.foreach((function(e,t){var r=UR(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),JD(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==JO.LISTEN_COMPLETE)throw Oa("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=dD(t,a.getNode(),a.isFullyInitialized()||qR(n),a.isFiltered());return ZD(e,o,n,r,KD,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=pD(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(DO(pD(t)))}}(t,a,f),{viewCache:a,changes:f}}function ZD(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=UD(r,n))return t;if(qR(n))if(Ra(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=vD(t),l=FD(r,c instanceof EO?c:EO.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=MD(r,vD(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=OR(n);if(".priority"===h){Ra(1===DR(n),"Can't have a priority with additional path components");var d=s.getNode(),p=jD(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=LR(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var m=jD(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(h).updateChild(y,m):s.getNode().getImmediateChild(h)}else v=VD(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,y,i,a):s.getNode()}}return hD(t,o,s.isFullyInitialized()||qR(n),e.filter.filtersNodes())}function QD(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(qR(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=OR(n);if(!c.isCompleteForPath(n)&&DR(n)>1)return t;var d=LR(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,KD,null)}var v=dD(t,s,c.isFullyInitialized()||qR(n),l.filtersNodes());return ZD(e,v,n,i,new HD(i,v,a),u)}function YD(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new HD(i,t,a);if(qR(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=hD(t,s,!0,e.filter.filtersNodes());else{var f=OR(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=hD(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=LR(n),p=c.getNode().getImmediateChild(f);if(qR(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===MR(d)&&v.getChild(jR(d)).isEmpty()?v:v.updateChild(d,r):EO.EMPTY_NODE}if(p.equals(h))u=t;else u=hD(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function $D(e,t){return e.eventCache.isCompleteForChild(t)}function XD(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function JD(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=qR(n)?r:new mD(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=XD(0,t.serverCache.getNode().getImmediateChild(n),r);c=QD(e,c,new AR(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!s){var f=XD(0,t.serverCache.getNode().getImmediateChild(n),r);c=QD(e,c,new AR(n),f,i,a,o,u)}})),c}var eL,tL=function(){function e(t,n){Ze(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new jO(i.getIndex()),o=(r=i).loadsAllData()?new jO(r.getIndex()):r.hasLimit()?new qO(r):new UO(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(EO.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(EO.EMPTY_NODE,s.getNode(),null),f=new sD(c,u.isFullyInitialized(),a.filtersNodes()),h=new sD(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=fD(h,f),this.eventGenerator_=new cD(this.query_)}return Ye(e,[{key:"query",get:function(){return this.query_}}]),e}();function nL(e,t){var n=vD(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!qR(t)&&!n.getImmediateChild(OR(t)).isEmpty())?n.getChild(t):null}function rL(e){return 0===e.eventRegistrations_.length}function iL(e,t,n){var r=[];if(n){Ra(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function aL(e,t,n,r){t.type===JO.MERGE&&null!==t.source.queryId&&(Ra(vD(e.viewCache_),"We should always have a full cache before handling merges"),Ra(pD(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=GD(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,Ra(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Ra(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Ra(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,oL(e,u.changes,u.viewCache.eventCache.getNode(),null)}function oL(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),lD(e,i,"child_removed",t,r,n),lD(e,i,"child_added",t,r,n),lD(e,i,"child_moved",a,r,n),lD(e,i,"child_changed",t,r,n),lD(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var uL,sL=Ye((function e(){Ze(this,e),this.views=new Map}));function cL(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Ra(null!=a,"SyncTree gave us an op for an invalid query."),aL(a,t,n,r)}var o,u=[],s=Sa(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(aL(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function lL(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=MD(n,i?r:null),s=!1;u?s=!0:r instanceof EO?(u=FD(n,r),s=!1):(u=EO.EMPTY_NODE,s=!1);var c=fD(new sD(u,s,!1),new sD(r,i,!1));return new tL(t,c)}return o}function fL(e,t,n,r,i,a){var o=lL(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(gO,(function(e,t){r.push(LO(e,t))})),n.isFullyInitialized()&&r.push(DO(n.getNode())),oL(e,r,n.getNode(),t)}(o,n)}function hL(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=mL(e);if("default"===i){var s,c=Sa(e.views.entries());try{for(c.s();!(s=c.n()).done;){var l=Be(s.value,2),f=l[0],h=l[1];o=o.concat(iL(h,n,r)),rL(h)&&(e.views.delete(f),h.query._queryParams.loadsAllData()||a.push(h.query))}}catch(p){c.e(p)}finally{c.f()}}else{var d=e.views.get(i);d&&(o=o.concat(iL(d,n,r)),rL(d)&&(e.views.delete(i),d.query._queryParams.loadsAllData()||a.push(d.query)))}return u&&!mL(e)&&a.push(new(Ra(eL,"Reference.ts has not been loaded"),eL)(t._repo,t._path)),{removed:a,events:o}}function dL(e){var t,n=[],r=Sa(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function pL(e,t){var n,r=null,i=Sa(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||nL(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function vL(e,t){if(t._queryParams.loadsAllData())return gL(e);var n=t._queryIdentifier;return e.views.get(n)}function yL(e,t){return null!=vL(e,t)}function mL(e){return null!=gL(e)}function gL(e){var t,n=Sa(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var kL=1,wL=Ye((function e(t){Ze(this,e),this.listenProvider_=t,this.syncPointTree_=new mD(null),this.pendingWriteTree_={visibleWrites:gD.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function bL(e,t,n,r,i){return function(e,t,n,r,i){Ra(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=kD(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?NL(e,new oD({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function _L(e,t,n,r){!function(e,t,n,r){Ra(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=wD(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=mD.fromObject(n);return NL(e,new uD({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function xL(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=PD(e.pendingWriteTree_,t),i=AD(e.pendingWriteTree_,t);if(i){var a=new mD(null);return null!=r.snap?a=a.set(RR(),!0):XA(r.children,(function(e){a=a.set(new AR(e),!0)})),NL(e,new iD(r.path,a,n))}return[]}function EL(e,t,n){return NL(e,new oD({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function IL(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||yL(a,t))){var u=hL(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var s=u.removed;o=u.events;var c=-1!==s.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return mL(t)}));if(c&&!l){var f=e.syncPointTree_.subtree(i);if(!f.isEmpty())for(var h=function(e){return e.fold((function(e,t,n){if(t&&mL(t))return[gL(t)];var r=[];return t&&(r=dL(t)),XA(n,(function(e,t){r=r.concat(t)})),r}))}(f),d=0;d<h.length;++d){var p=h[d],v=p.query,y=RL(e,p);e.listenProvider_.startListening(jL(v),OL(e,v),y.hashFn,y.onComplete)}}if(!l&&s.length>0&&!r)if(c){e.listenProvider_.stopListening(jL(t),null)}else s.forEach((function(t){var n=e.queryToTagMap.get(DL(t));e.listenProvider_.stopListening(jL(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=DL(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,s)}return o}function SL(e,t,n){var r=t._path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=VR(e,r);i=i||pL(t,n),a=a||mL(t)}));var o,u=e.syncPointTree_.get(r);(u?(a=a||mL(u),i=i||pL(u,RR())):(u=new sL,e.syncPointTree_=e.syncPointTree_.set(r,u)),null!=i)?o=!0:(o=!1,i=EO.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=pL(t,RR());n&&(i=i.updateImmediateChild(e,n))})));var s=yL(u,t);if(!s&&!t._queryParams.loadsAllData()){var c=DL(t);Ra(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=kL++;e.queryToTagMap.set(c,l),e.tagToQueryMap.set(l,c)}var f=fL(u,t,n,ND(e.pendingWriteTree_,r),i,o);if(!s&&!a){var h=vL(u,t);f=f.concat(function(e,t,n){var r=t._path,i=OL(e,t),a=RL(e,n),o=e.listenProvider_.startListening(jL(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)Ra(!mL(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!qR(e)&&t&&mL(t))return[gL(t).query];var r=[];return t&&(r=r.concat(dL(t).map((function(e){return e.query})))),XA(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(jL(l),OL(e,l))}return o}(e,t,h))}return f}function TL(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=pL(n,VR(e,t));if(r)return r}));return LD(r,t,i,n,!0)}function CL(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=VR(e,n);r=r||pL(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||pL(i,RR()):(i=new sL,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new sD(r,!0,!1):null;return function(e){return pD(e.viewCache_)}(lL(i,t,ND(e.pendingWriteTree_,t._path),a?o.getNode():EO.EMPTY_NODE,a))}function NL(e,t){return PL(t,e.syncPointTree_,null,ND(e.pendingWriteTree_,RR()))}function PL(e,t,n,r){if(qR(e.path))return AL(e,t,n,r);var i=t.get(RR());null==n&&null!=i&&(n=pL(i,RR()));var a=[],o=OR(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=BD(r,o);a=a.concat(PL(u,s,c,l))}return i&&(a=a.concat(cL(i,e,r,n))),a}function AL(e,t,n,r){var i=t.get(RR());null==n&&null!=i&&(n=pL(i,RR()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=BD(r,t),s=e.operationForChild(t);s&&(a=a.concat(AL(s,i,o,u)))})),i&&(a=a.concat(cL(i,e,r,n))),a}function RL(e,t){var n=t.query,r=OL(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||EO.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=LL(e,n);if(r){var i=ML(r),a=i.path,o=i.queryId,u=VR(a,t);return FL(e,a,new aD(nD(o),u))}return[]}(e,n._path,r):function(e,t){return NL(e,new aD({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return IL(e,n,null,i)}}}function OL(e,t){var n=DL(t);return e.queryToTagMap.get(n)}function DL(e){return e._path.toString()+"$"+e._queryIdentifier}function LL(e,t){return e.tagToQueryMap.get(t)}function ML(e){var t=e.indexOf("$");return Ra(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new AR(e.substr(0,t))}}function FL(e,t,n){var r=e.syncPointTree_.get(t);return Ra(r,"Missing sync point for query tag that we're tracking"),cL(r,n,ND(e.pendingWriteTree_,t),null)}function jL(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ra(uL,"Reference.ts has not been loaded"),uL)(e._repo,e._path):e}var UL=function(){function e(t){Ze(this,e),this.node_=t}return Ye(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),qL=function(){function e(t,n){Ze(this,e),this.syncTree_=t,this.path_=n}return Ye(e,[{key:"getImmediateChild",value:function(t){var n=UR(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return TL(this.syncTree_,this.path_)}}]),e}(),VL=function(e,t,n){return e&&"object"===typeof e?(Ra(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?BL(e[".sv"],t,n):"object"===typeof e[".sv"]?zL(e[".sv"],t):void Ra(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},BL=function(e,t,n){if("timestamp"===e)return n.timestamp;Ra(!1,"Unexpected server value: "+e)},zL=function(e,t,n){e.hasOwnProperty("increment")||Ra(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Ra(!1,"Unexpected increment value: "+r);var i=t.node();if(Ra(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},WL=function(e,t,n,r){return HL(t,new qL(n,e),r)},KL=function(e,t,n){return HL(e,new UL(t),n)};function HL(e,t,n){var r,i=e.getPriority().val(),a=VL(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=VL(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new pO(u,SO(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new pO(a))),s.forEachChild(gO,(function(e,i){var a=HL(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var GL=Ye((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};Ze(this,e),this.name=t,this.parent=n,this.node=r}));function ZL(e,t){for(var n=t instanceof AR?t:new AR(t),r=e,i=OR(n);null!==i;){var a=io(r.node.children,i)||{children:{},childCount:0};r=new GL(i,r,a),i=OR(n=LR(n))}return r}function QL(e){return e.node.value}function YL(e,t){e.node.value=t,tM(e)}function $L(e){return e.node.childCount>0}function XL(e,t){XA(e.node.children,(function(n,r){t(new GL(n,e,r))}))}function JL(e,t,n,r){n&&!r&&t(e),XL(e,(function(e){JL(e,t,!0,r)})),n&&r&&t(e)}function eM(e){return new AR(null===e.parent?e.name:eM(e.parent)+"/"+e.name)}function tM(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===QL(e)&&!$L(e)}(n),i=ro(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,tM(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,tM(e))}(e.parent,e.name,e)}var nM=/[\[\].#$\/\u0000-\u001F\u007F]/,rM=/[\[\].#$\u0000-\u001F\u007F]/,iM=10485760,aM=function(e){return"string"===typeof e&&0!==e.length&&!nM.test(e)},oM=function(e){return"string"===typeof e&&0!==e.length&&!rM.test(e)},uM=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!WA(e)||e&&"object"===typeof e&&ro(e,".sv")},sM=function(e,t,n,r){r&&void 0===t||cM(go(e,"value"),t,n)},cM=function e(t,n,r){var i=r instanceof AR?new KR(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+GR(i));if("function"===typeof n)throw new Error(t+"contains a function "+GR(i)+" with contents = "+n.toString());if(WA(n))throw new Error(t+"contains "+n.toString()+" "+GR(i));if("string"===typeof n&&n.length>iM/3&&bo(n)>iM)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+GR(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(XA(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!aM(n)))throw new Error(t+" contains an invalid key ("+n+") "+GR(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=bo(s),HR(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=bo(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+GR(i)+" in addition to actual children.")}},lM=function(e,t,n,r){if(!r||void 0!==t){var i=go(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];XA(t,(function(e,t){var r=new AR(e);if(cM(i,t,UR(n,r)),".priority"===MR(r)&&!uM(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=FR(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!aM(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(BR);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&WR(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},fM=function(e,t,n){if(!n||void 0!==t){if(WA(t))throw new Error(go(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!uM(t))throw new Error(go(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},hM=function(e,t,n,r){if((!r||void 0!==n)&&!aM(n))throw new Error(go(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},dM=function(e,t,n,r){if((!r||void 0!==n)&&!oM(n))throw new Error(go(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},pM=function(e,t){if(".info"===OR(t))throw new Error(e+" failed = Can't modify data under /.info/")},vM=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!aM(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),oM(e)}(n))throw new Error(go(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},yM=Ye((function e(){Ze(this,e),this.eventLists_=[],this.recursionDepth_=0}));function mM(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||zR(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function gM(e,t,n){mM(e,n),wM(e,(function(e){return zR(e,t)}))}function kM(e,t,n){mM(e,n),wM(e,(function(e){return WR(e,t)||WR(t,e)}))}function wM(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(bM(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function bM(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();MA&&UA("event: "+n.toString()),iR(r)}}}var _M="repo_interrupt",xM=function(){function e(t,n,r,i){Ze(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yM,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=QO(),this.transactionQueueTree_=new GL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return Ye(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function EM(e,t,n){if(e.stats_=gR(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new GO(e.repoInfo_,(function(t,n,r,i){TM(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return CM(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{to(n)}catch(FU){throw new Error("Invalid authOverride provided: "+FU)}}e.persistentConnection_=new YR(e.repoInfo_,t,(function(t,n,r,i){TM(e,t,n,r,i)}),(function(t){CM(e,t)}),(function(t){!function(e,t){XA(t,(function(t,n){NM(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return mR[n]||(mR[n]=t()),mR[n]}(e.repoInfo_,(function(){return new tD(e.stats_,e.server_)})),e.infoData_=new ZO,e.infoSyncTree_=new wL({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=EL(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),NM(e,"connected",!1),e.serverSyncTree_=new wL({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);kM(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function IM(e){var t=e.infoData_.getNode(new AR(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function SM(e){return(t=(t={timestamp:IM(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function TM(e,t,n,r,i){e.dataUpdateCount++;var a=new AR(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=oo(n,(function(e){return SO(e)}));o=function(e,t,n,r){var i=LL(e,r);if(i){var a=ML(i),o=a.path,u=a.queryId,s=VR(o,t),c=mD.fromObject(n);return FL(e,o,new uD(nD(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=SO(n);o=function(e,t,n,r){var i=LL(e,r);if(null!=i){var a=ML(i),o=a.path,u=a.queryId,s=VR(o,t);return FL(e,o,new oD(nD(u),s,n))}return[]}(e.serverSyncTree_,a,s,i)}else if(r){var c=oo(n,(function(e){return SO(e)}));o=function(e,t,n){var r=mD.fromObject(n);return NL(e,new uD({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=SO(n);o=EL(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=VM(e,a)),kM(e.eventQueue_,f,o)}function CM(e,t){NM(e,"connected",t),!1===t&&function(e){MM(e,"onDisconnectEvents");var t=SM(e),n=QO();XO(e.onDisconnect_,RR(),(function(r,i){var a=WL(r,i,e.serverSyncTree_,t);YO(n,r,a)}));var r=[];XO(n,RR(),(function(t,n){r=r.concat(EL(e.serverSyncTree_,t,n));var i=HM(e,t);VM(e,i)})),e.onDisconnect_=QO(),kM(e.eventQueue_,RR(),r)}(e)}function NM(e,t,n){var r=new AR("/.info/"+t),i=SO(n);e.infoData_.updateSnapshot(r,i);var a=EL(e.infoSyncTree_,r,i);kM(e.eventQueue_,r,a)}function PM(e){return e.nextWriteId_++}function AM(e,t,n,r,i){MM(e,"set",{path:t.toString(),value:n,priority:r});var a=SM(e),o=SO(n,r),u=TL(e.serverSyncTree_,t),s=KL(o,u,a),c=PM(e),l=bL(e.serverSyncTree_,t,s,c,!0);mM(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||zA("set at "+t+" failed: "+n);var o=xL(e.serverSyncTree_,c,!a);kM(e.eventQueue_,t,o),FM(e,i,n,r)}));var f=HM(e,t);VM(e,f),kM(e.eventQueue_,f,[])}function RM(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&$O(e.onDisconnect_,t),FM(e,n,r,i)}))}function OM(e,t,n,r){var i=SO(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&YO(e.onDisconnect_,t,i),FM(e,r,n,a)}))}function DM(e,t,n){var r;r=".info"===OR(t._path)?IL(e.infoSyncTree_,t,n):IL(e.serverSyncTree_,t,n),gM(e.eventQueue_,t._path,r)}function LM(e){e.persistentConnection_&&e.persistentConnection_.interrupt(_M)}function MM(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];UA.apply(void 0,[t].concat(r))}function FM(e,t,n,r){t&&iR((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function jM(e,t,n){return TL(e.serverSyncTree_,t,n)||EO.EMPTY_NODE}function UM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||KM(e,t),QL(t)){var n=zM(e,t);Ra(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&qM(e,eM(t),n)}else $L(t)&&XL(t,(function(t){UM(e,t)}))}function qM(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=jM(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];Ra(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=VR(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){MM(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(xL(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);KM(e,ZL(e.transactionQueueTree_,t)),UM(e,e.transactionQueueTree_),kM(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)iR(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{zA("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}VM(e,t)}}),o)}function VM(e,t){var n=BM(e,t),r=eM(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=VR(n,s.path),l=!1,f=void 0;if(Ra(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,f=s.abortReason,i=i.concat(xL(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,f="maxretry",i=i.concat(xL(e.serverSyncTree_,s.currentWriteId,!0));else{var h=jM(e,s.path,o);s.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){cM("transaction failed: Data returned ",d,s.path);var p=SO(d);"object"===typeof d&&null!=d&&ro(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=s.currentWriteId,y=SM(e),m=KL(p,h,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=PM(e),o.splice(o.indexOf(v),1),i=(i=i.concat(bL(e.serverSyncTree_,s.path,m,s.currentWriteId,s.applyLocally))).concat(xL(e.serverSyncTree_,v,!0))}else l=!0,f="nodata",i=i.concat(xL(e.serverSyncTree_,s.currentWriteId,!0))}kM(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===f?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(f),!1,null)}))))},s=0;s<t.length;s++)u(s);KM(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)iR(r[c]);UM(e,e.transactionQueueTree_)}(e,zM(e,n),r),r}function BM(e,t){var n,r=e.transactionQueueTree_;for(n=OR(t);null!==n&&void 0===QL(r);)r=ZL(r,n),n=OR(t=LR(t));return r}function zM(e,t){var n=[];return WM(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function WM(e,t,n){var r=QL(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);XL(t,(function(t){WM(e,t,n)}))}function KM(e,t){var n=QL(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,YL(t,n.length>0?n:void 0)}XL(t,(function(t){KM(e,t)}))}function HM(e,t){var n=eM(BM(e,t)),r=ZL(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){GM(e,t)})),GM(e,r),JL(r,(function(t){GM(e,t)})),n}function GM(e,t){var n=QL(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Ra(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Ra(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(xL(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?YL(t,void 0):n.length=a+1,kM(e.eventQueue_,eM(t),i);for(var u=0;u<r.length;u++)iR(r[u])}}var ZM=function(e,t){var n=QM(e),r=n.namespace;"firebase.com"===n.domain&&BA(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||BA("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&zA("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new dR(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new AR(n.pathString)}},QM=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(FU){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=Sa(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):zA("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},YM=function(){function e(t,n,r,i){Ze(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return Ye(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+to(this.snapshot.exportVal())}}]),e}(),$M=function(){function e(t,n,r){Ze(this,e),this.eventRegistration=t,this.error=n,this.path=r}return Ye(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),XM=function(){function e(t,n){Ze(this,e),this.snapshotCallback=t,this.cancelCallback=n}return Ye(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Ra(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),JM=function(){function e(t,n){Ze(this,e),this._repo=t,this._path=n}return Ye(e,[{key:"cancel",value:function(){var e=new qa;return RM(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){pM("OnDisconnect.remove",this._path);var e=new qa;return OM(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){pM("OnDisconnect.set",this._path),sM("OnDisconnect.set",e,this._path,!1);var t=new qa;return OM(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){pM("OnDisconnect.setWithPriority",this._path),sM("OnDisconnect.setWithPriority",e,this._path,!1),fM("OnDisconnect.setWithPriority",t,!1);var n=new qa;return function(e,t,n,r,i){var a=SO(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&YO(e.onDisconnect_,t,a),FM(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){pM("OnDisconnect.update",this._path),lM("OnDisconnect.update",e,this._path,!1);var t=new qa;return function(e,t,n,r){if(ao(n))return UA("onDisconnect().update() called with empty data.  Don't do anything."),void FM(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&XA(n,(function(n,r){var i=SO(r);YO(e.onDisconnect_,UR(t,n),i)})),FM(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),eF=function(){function e(t,n,r,i){Ze(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return Ye(e,[{key:"key",get:function(){return qR(this._path)?null:MR(this._path)}},{key:"ref",get:function(){return new iF(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=HO(this._queryParams),t=YA(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return HO(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=_o(t))instanceof e))return!1;var n=this._repo===t._repo,r=zR(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function tF(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function nF(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===tO){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==KA)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==HA)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===gO){if(null!=t&&!uM(t)||null!=n&&!uM(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ra(e.getIndex()instanceof TO||e.getIndex()===NO,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function rF(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var iF=function(e){jt(n,e);var t=zt(n);function n(e,r){return Ze(this,n),t.call(this,e,r,new VO,!1)}return Ye(n,[{key:"parent",get:function(){var e=jR(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(eF),aF=function(){function e(t,n,r){Ze(this,e),this._node=t,this.ref=n,this._index=r}return Ye(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new AR(t),r=sF(this.ref,t);return new e(this._node.getChild(n),r,gO)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,sF(n.ref,r),gO))}))}},{key:"hasChild",value:function(e){var t=new AR(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function oF(e,t){return(e=_o(e))._checkNotDeleted("ref"),void 0!==t?sF(e._root,t):e._root}function uF(e,t){(e=_o(e))._checkNotDeleted("refFromURL");var n=ZM(t,e._repo.repoInfo_.nodeAdmin);vM("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||BA("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),oF(e,n.path.toString())}function sF(e,t){var n,r,i,a;return null===OR((e=_o(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),dM(n,r,i,a)):dM("child","path",t,!1),new iF(e._repo,UR(e._path,t))}function cF(e,t){e=_o(e),pM("push",e._path),sM("push",t,e._path,!0);var n,r=IM(e._repo),i=AO(r),a=sF(e,i),o=sF(e,i);return n=null!=t?fF(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function lF(e){return pM("remove",e._path),fF(e,null)}function fF(e,t){e=_o(e),pM("set",e._path),sM("set",t,e._path,!1);var n=new qa;return AM(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function hF(e,t){e=_o(e),pM("setPriority",e._path),fM("setPriority",t,!1);var n=new qa;return AM(e._repo,UR(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function dF(e,t,n){if(pM("setWithPriority",e._path),sM("setWithPriority",t,e._path,!1),fM("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new qa;return AM(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function pF(e,t){lM("update",t,e._path,!1);var n=new qa;return function(e,t,n,r){MM(e,"update",{path:t.toString(),value:n});var i=!0,a=SM(e),o={};if(XA(n,(function(n,r){i=!1,o[n]=WL(UR(t,n),SO(r),e.serverSyncTree_,a)})),i)UA("update() called with empty data.  Don't do anything."),FM(0,r,"ok",void 0);else{var u=PM(e),s=_L(e.serverSyncTree_,t,o,u);mM(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||zA("update at "+t+" failed: "+n);var o=xL(e.serverSyncTree_,u,!a),s=o.length>0?VM(e,t):t;kM(e.eventQueue_,s,o),FM(0,r,n,i)})),XA(n,(function(n){var r=HM(e,UR(t,n));VM(e,r)})),kM(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function vF(e){return function(e,t){var n=CL(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=SO(n).withIndex(t._queryParams.getIndex()),i=EL(e.serverSyncTree_,t._path,r);return gM(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return MM(e,"get for query "+to(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=_o(e))._repo,e).then((function(t){return new aF(t,new iF(e._repo,e._path),e._queryParams.getIndex())}))}var yF=function(){function e(t){Ze(this,e),this.callbackContext=t}return Ye(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new YM("value",this,new aF(e.snapshotNode,new iF(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new $M(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),mF=function(){function e(t,n){Ze(this,e),this.eventType=t,this.callbackContext=n}return Ye(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new $M(this,e,t):null}},{key:"createEvent",value:function(e,t){Ra(null!=e.childName,"Child events should have a childName.");var n=sF(new iF(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new YM(e.type,this,new aF(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function gF(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){DM(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new XM(n,a||void 0),c="value"===t?new yF(s):new mF(t,s);return function(e,t,n){var r;r=".info"===OR(t._path)?SL(e.infoSyncTree_,t,n):SL(e.serverSyncTree_,t,n),gM(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return DM(e._repo,e,c)}}function kF(e,t,n,r){return gF(e,"value",t,n,r)}function wF(e,t,n,r){return gF(e,"child_added",t,n,r)}function bF(e,t,n,r){return gF(e,"child_changed",t,n,r)}function _F(e,t,n,r){return gF(e,"child_moved",t,n,r)}function xF(e,t,n,r){return gF(e,"child_removed",t,n,r)}function EF(e,t,n){var r=null,i=n?new XM(n):null;"value"===t?r=new yF(i):t&&(r=new mF(t,i)),DM(e._repo,e,r)}var IF=Ye((function e(){Ze(this,e)})),SF=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ye(n,[{key:"_apply",value:function(e){sM("endAt",this._value,e._path,!0);var t=zO(e._queryParams,this._value,this._key);if(rF(t),nF(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new eF(e._repo,e._path,t,e._orderByCalled)}}]),n}(IF);function TF(e,t){return hM("endAt","key",t,!0),new SF(e,t)}var CF=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ye(n,[{key:"_apply",value:function(e){sM("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===tO?("string"===typeof t&&(t=OO(t)),r=zO(e,t,n)):r=zO(e,t,null==n?KA:OO(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(rF(t),nF(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new eF(e._repo,e._path,t,e._orderByCalled)}}]),n}(IF);function NF(e,t){return hM("endBefore","key",t,!0),new CF(e,t)}var PF=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ye(n,[{key:"_apply",value:function(e){sM("startAt",this._value,e._path,!0);var t=BO(e._queryParams,this._value,this._key);if(rF(t),nF(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new eF(e._repo,e._path,t,e._orderByCalled)}}]),n}(IF);function AF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return hM("startAt","key",t,!0),new PF(e,t)}var RF=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ye(n,[{key:"_apply",value:function(e){sM("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===tO?("string"===typeof t&&(t=RO(t)),r=BO(e,t,n)):r=BO(e,t,null==n?HA:RO(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(rF(t),nF(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new eF(e._repo,e._path,t,e._orderByCalled)}}]),n}(IF);function OF(e,t){return hM("startAfter","key",t,!0),new RF(e,t)}var DF=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this))._limit=e,r}return Ye(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new eF(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(IF);function LF(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new DF(e)}var MF=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this))._limit=e,r}return Ye(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new eF(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(IF);function FF(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new MF(e)}var jF=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this))._path=e,r}return Ye(n,[{key:"_apply",value:function(e){tF(e,"orderByChild");var t=new AR(this._path);if(qR(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new TO(t),r=WO(e._queryParams,n);return nF(r),new eF(e._repo,e._path,r,!0)}}]),n}(IF);function UF(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return dM("orderByChild","path",e,!1),new jF(e)}var qF=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"_apply",value:function(e){tF(e,"orderByKey");var t=WO(e._queryParams,tO);return nF(t),new eF(e._repo,e._path,t,!0)}}]),n}(IF);function VF(){return new qF}var BF=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"_apply",value:function(e){tF(e,"orderByPriority");var t=WO(e._queryParams,gO);return nF(t),new eF(e._repo,e._path,t,!0)}}]),n}(IF);function zF(){return new BF}var WF=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"_apply",value:function(e){tF(e,"orderByValue");var t=WO(e._queryParams,NO);return nF(t),new eF(e._repo,e._path,t,!0)}}]),n}(IF);function KF(){return new WF}var HF=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this))._value=e,i._key=r,i}return Ye(n,[{key:"_apply",value:function(e){if(sM("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new SF(this._value,this._key)._apply(new PF(this._value,this._key)._apply(e))}}]),n}(IF);function GF(e,t){return hM("equalTo","key",t,!0),new HF(e,t)}function ZF(e){for(var t=_o(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];t=u._apply(t)}return t}!function(e){Ra(!eL,"__referenceConstructor has already been defined"),eL=e}(iF),function(e){Ra(!uL,"__referenceConstructor has already been defined"),uL=e}(iF);var QF={},YF=!1;function $F(e,t,n,r){e.repoInfo_=new dR("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function XF(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||BA("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),UA("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=ZM(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/chip",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=ZM(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new sR(sR.OWNER):new uR(e.name,e.options,t);vM("Invalid Firebase Database URL",u),qR(u.path)||BA("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=QF[t.name];i||(i={},QF[t.name]=i);var a=i[e.toURLString()];a&&BA("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new xM(e,YF,n,r),i[e.toURLString()]=a,a}(s,e,l,new oR(e.name,n));return new JF(f,e)}var JF=function(){function e(t,n){Ze(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return Ye(e,[{key:"_repo",get:function(){return this._instanceStarted||(EM(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new iF(this._repo,RR())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=QF[t];n&&n[e.key]===e||BA("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),LM(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&BA("Cannot call "+e+" on a deleted database.")}}]),e}();function ej(){SR.IS_TRANSPORT_INITIALIZED&&zA("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function tj(){ej(),_R.forceDisallow()}function nj(){ej(),IR.forceDisallow(),_R.forceAllow()}function rj(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=_o(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&BA("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&BA('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new sR(sR.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:Va(r.mockUserToken,e.app.options.projectId);a=new sR(o)}$F(i,t,n,a)}function ij(e){(e=_o(e))._checkNotDeleted("goOffline"),LM(e._repo)}function aj(e){var t;(e=_o(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(_M)}function oj(e,t){jA(e,t)}var uj={".sv":"timestamp"};var sj=function(){function e(t,n){Ze(this,e),this.committed=t,this.snapshot=n}return Ye(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function cj(e,t,n){var r;if(e=_o(e),pM("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new qa,o=kF(e,(function(){}));return function(e,t,n,r,i,a){MM(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:OA(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=jM(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{cM("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=ZL(e.transactionQueueTree_,t),f=QL(l)||[];f.push(o),YL(l,f),"object"===typeof s&&null!==s&&ro(s,".priority")?(c=io(s,".priority"),Ra(uM(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(TL(e.serverSyncTree_,t)||EO.EMPTY_NODE).getPriority().val();var h=SM(e),d=SO(s,c),p=KL(d,u,h);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=PM(e);var v=bL(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);kM(e.eventQueue_,t,v),UM(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new aF(r,new iF(e._repo,e._path),gO),a.resolve(new sj(n,i)))}),o,i),a.promise}YR.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},YR.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){SA(gu),fu(new Io("database",(function(e,t){var n=t.instanceIdentifier;return XF(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Eu(xA,EA,e),Eu(xA,EA,"esm2017")}();var lj=new Mo("@firebase/database-compat"),fj=function(e){var t="FIREBASE WARNING: "+e;lj.warn(t)},hj=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(go(e,t)+"must be a boolean.")},dj=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(go(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},pj=function(){function e(t){Ze(this,e),this._delegate=t}return Ye(e,[{key:"cancel",value:function(e){mo("OnDisconnect.cancel",0,1,arguments.length),ko("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){mo("OnDisconnect.remove",0,1,arguments.length),ko("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){mo("OnDisconnect.set",1,2,arguments.length),ko("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){mo("OnDisconnect.setWithPriority",2,3,arguments.length),ko("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(mo("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,fj("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ko("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),vj=function(){function e(t,n){Ze(this,e),this.committed=t,this.snapshot=n}return Ye(e,[{key:"toJSON",value:function(){return mo("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),yj=function(){function e(t,n){Ze(this,e),this._database=t,this._delegate=n}return Ye(e,[{key:"val",value:function(){return mo("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return mo("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return mo("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return mo("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return mo("DataSnapshot.child",0,1,arguments.length),t=String(t),dM("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return mo("DataSnapshot.hasChild",1,1,arguments.length),dM("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return mo("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return mo("DataSnapshot.forEach",1,1,arguments.length),ko("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return mo("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return mo("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return mo("DataSnapshot.ref",0,0,arguments.length),new gj(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),mj=function(){function e(t,n){Ze(this,e),this.database=t,this._delegate=n}return Ye(e,[{key:"on",value:function(t,n,r,i){var a,o=this;mo("Query.on",2,4,arguments.length),ko("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new yj(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return kF(this._delegate,s,c),n;case"child_added":return wF(this._delegate,s,c),n;case"child_removed":return xF(this._delegate,s,c),n;case"child_changed":return bF(this._delegate,s,c),n;case"child_moved":return _F(this._delegate,s,c),n;default:throw new Error(go("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(mo("Query.off",0,3,arguments.length),dj("Query.off",e,!0),ko("Query.off","callback",t,!0),wo("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,EF(this._delegate,e,r)}else EF(this._delegate,e)}},{key:"get",value:function(){var e=this;return vF(this._delegate).then((function(t){return new yj(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;mo("Query.once",1,4,arguments.length),ko("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new qa,s=function(e,t){var r=new yj(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":kF(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":wF(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":xF(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":bF(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":_F(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(go("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return mo("Query.limitToFirst",1,1,arguments.length),new e(this.database,ZF(this._delegate,LF(t)))}},{key:"limitToLast",value:function(t){return mo("Query.limitToLast",1,1,arguments.length),new e(this.database,ZF(this._delegate,FF(t)))}},{key:"orderByChild",value:function(t){return mo("Query.orderByChild",1,1,arguments.length),new e(this.database,ZF(this._delegate,UF(t)))}},{key:"orderByKey",value:function(){return mo("Query.orderByKey",0,0,arguments.length),new e(this.database,ZF(this._delegate,VF()))}},{key:"orderByPriority",value:function(){return mo("Query.orderByPriority",0,0,arguments.length),new e(this.database,ZF(this._delegate,zF()))}},{key:"orderByValue",value:function(){return mo("Query.orderByValue",0,0,arguments.length),new e(this.database,ZF(this._delegate,KF()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return mo("Query.startAt",0,2,arguments.length),new e(this.database,ZF(this._delegate,AF(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return mo("Query.startAfter",0,2,arguments.length),new e(this.database,ZF(this._delegate,OF(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return mo("Query.endAt",0,2,arguments.length),new e(this.database,ZF(this._delegate,TF(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return mo("Query.endBefore",0,2,arguments.length),new e(this.database,ZF(this._delegate,NF(t,n)))}},{key:"equalTo",value:function(t,n){return mo("Query.equalTo",1,2,arguments.length),new e(this.database,ZF(this._delegate,GF(t,n)))}},{key:"toString",value:function(){return mo("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return mo("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(mo("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new gj(this.database,new iF(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,ko(e,"cancel",r.cancel,!0),r.context=n,wo(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(go(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),gj=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this,e,new eF(r._repo,r._path,new VO,!1))).database=e,i._delegate=r,i}return Ye(n,[{key:"getKey",value:function(){return mo("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return mo("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,sF(this._delegate,e))}},{key:"getParent",value:function(){mo("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return mo("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){mo("Reference.set",1,2,arguments.length),ko("Reference.set","onComplete",t,!0);var n=fF(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(mo("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,fj("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}pM("Reference.update",this._delegate._path),ko("Reference.update","onComplete",t,!0);var i=pF(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){mo("Reference.setWithPriority",2,3,arguments.length),ko("Reference.setWithPriority","onComplete",n,!0);var r=dF(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){mo("Reference.remove",0,1,arguments.length),ko("Reference.remove","onComplete",e,!0);var t=lF(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;mo("Reference.transaction",1,3,arguments.length),ko("Reference.transaction","transactionUpdate",e,!1),ko("Reference.transaction","onComplete",t,!0),hj("Reference.transaction","applyLocally",n,!0);var i=cj(this._delegate,e,{applyLocally:n}).then((function(e){return new vj(e.committed,new yj(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){mo("Reference.setPriority",1,2,arguments.length),ko("Reference.setPriority","onComplete",t,!0);var n=hF(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;mo("Reference.push",0,2,arguments.length),ko("Reference.push","onComplete",t,!0);var i=cF(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return pM("Reference.onDisconnect",this._delegate._path),new pj(new JM(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(mj),kj=function(){function e(t,n){var r=this;Ze(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:tj,forceLongPolling:nj}}return Ye(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};rj(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(mo("database.ref",0,1,arguments.length),e instanceof gj){var t=uF(this._delegate,e.toString());return new gj(this,t)}var n=oF(this._delegate,e);return new gj(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";mo(t,1,1,arguments.length);var n=uF(this._delegate,e);return new gj(this,n)}},{key:"goOffline",value:function(){return mo("database.goOffline",0,0,arguments.length),ij(this._delegate)}},{key:"goOnline",value:function(){return mo("database.goOnline",0,0,arguments.length),aj(this._delegate)}}]),e}();kj.ServerValue={TIMESTAMP:uj,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var wj=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;SA(r);var s=new To("auth-internal",new Po("database-standalone"));return s.setComponent(new Io("auth-internal",(function(){return i}),"PRIVATE")),{instance:new kj(XF(t,s,void 0,n,u),t),namespace:a}}}),bj=kj.ServerValue;!function(e){e.INTERNAL.registerComponent(new Io("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new kj(i,r)}),"PUBLIC").setServiceProps({Reference:gj,Query:mj,Database:kj,DataSnapshot:yj,enableLogging:oj,INTERNAL:wj,ServerValue:bj}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.2.0")}(Zu);function _j(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new _h("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function xj(){if("undefined"===typeof Uint8Array)throw new _h("unimplemented","Uint8Arrays are not available in this environment.")}function Ej(){if("undefined"==typeof atob)throw new _h("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Ij=function(){function e(t){Ze(this,e),this._delegate=t}return Ye(e,[{key:"toBase64",value:function(){return Ej(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return xj(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Ej(),new e(M_.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return xj(),new e(M_.fromUint8Array(t))}}]),e}();function Sj(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Sa(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Tj=function(){function e(){Ze(this,e)}return Ye(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){D_(e=f_(e,S_));var n=T_(e),r=e._freezeSettings(),i=new Mb;return N_(n,i,new Db(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){D_(e=f_(e,S_));var t=T_(e),n=e._freezeSettings(),r=new Mb;return N_(t,r,new Lb(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new _h(bh.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new xh;return e._queue.enqueueAndForgetEvenWhileRestricted(Eo(Ea().mark((function n(){return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Eo(Ea().mark((function e(t){var n;return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(By.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,By.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(kg(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Cj=function(){function e(t,n,r){var i=this;Ze(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof rd||(this._appCompat=t)}return Ye(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||yh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v_(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return P_(this._delegate)}},{key:"disableNetwork",value:function(){return A_(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&u_("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new xh;return e.asyncQueue.enqueueAndForget(Eo(Ea().mark((function n(){return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=eb,n.next=3,e_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(T_(e=f_(e,S_)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Zx(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new _h("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Bj(this,k_(this._delegate,e))}catch(FU){throw Dj(FU,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Oj(this,w_(this._delegate,e))}catch(FU){throw Dj(FU,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Uj(this,function(e,t){if(e=f_(e,p_),o_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new _h(bh.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new m_(e,null,function(e){return new vp(Wh.emptyPath(),e)}(t))}(this._delegate,e))}catch(FU){throw Dj(FU,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Xx(this._delegate,(function(n){return e(new Pj(t,n))}))}},{key:"batch",value:function(){var e=this;return T_(this._delegate),new Aj(new qx(this._delegate,(function(t){return Qx(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return R_(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return O_(this._delegate,e).then((function(e){return e?new Uj(t,e):null}))}}]),e}(),Nj=function(e){jt(n,e);var t=zt(n);function n(e){var r;return Ze(this,n),(r=t.call(this)).firestore=e,r}return Ye(n,[{key:"convertBytes",value:function(e){return new Ij(new M_(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Oj.forKey(t,this.firestore,null)}}]),n}(Fx);var Pj=function(){function e(t,n){Ze(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Nj(t)}return Ye(e,[{key:"get",value:function(e){var t=this,n=zj(e);return this._delegate.get(n).then((function(e){return new Fj(t._firestore,new vx(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=zj(e);return n?(_j("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=zj(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=zj(e);return this._delegate.delete(t),this}}]),e}(),Aj=function(){function e(t){Ze(this,e),this._delegate=t}return Ye(e,[{key:"set",value:function(e,t,n){var r=zj(e);return n?(_j("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=zj(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=zj(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Rj=function(){function e(t,n,r){Ze(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ye(e,[{key:"fromFirestore",value:function(e,t){var n=new yx(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jj(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Nj(t),n),i.set(n,a)),a}}]),e}();Rj.INSTANCES=new WeakMap;var Oj=function(){function e(t,n){Ze(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Nj(t)}return Ye(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Bj(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Bj(this.firestore,k_(this._delegate,e))}catch(FU){throw Dj(FU,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=_o(e))instanceof y_&&b_(this._delegate,e)}},{key:"set",value:function(e,t){t=_j("DocumentReference.set",t);try{return t?Kx(this._delegate,e,t):Kx(this._delegate,e)}catch(FU){throw Dj(FU,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Hx(this._delegate,e):Hx.apply(void 0,[this._delegate,e,t].concat(r))}catch(FU){throw Dj(FU,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Qx(f_(e.firestore,S_),[new cv(e._key,Zp.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Lj(n),a=Mj(n,(function(t){return new Fj(e.firestore,new vx(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Gx(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?zx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=f_(e,y_);var t=f_(e.firestore,S_);return r_(T_(t),e._key,{source:"server"}).then((function(n){return Yx(t,e,n)}))}(this._delegate):function(e){e=f_(e,y_);var t=f_(e.firestore,S_);return r_(T_(t),e._key).then((function(n){return Yx(t,e,n)}))}(this._delegate),t.then((function(e){return new Fj(n.firestore,new vx(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Rj.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new _h("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new y_(n._delegate,r,new ud(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new y_(n._delegate,r,t))}}]),e}();function Dj(e,t,n){return e.message=e.message.replace(t,n),e}function Lj(e){var t,n=Sa(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Sj(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Mj(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Sj(e[0])?e[0]:Sj(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Fj=function(){function e(t,n){Ze(this,e),this._firestore=t,this._delegate=n}return Ye(e,[{key:"ref",get:function(){return new Oj(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return kx(this._delegate,e._delegate)}}]),e}(),jj=function(e){jt(n,e);var t=zt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return Ye(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||gh()}(void 0!==t),t}}]),n}(Fj),Uj=function(){function e(t,n){Ze(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Nj(t)}return Ye(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,_x(this._delegate,function(e,t,n){var r=t,i=dx("where",e);return new xx(i,r,n)}(t,n,r)))}catch(FU){throw Dj(FU,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,_x(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=dx("orderBy",e);return new Ex(n,t)}(t,n)))}catch(FU){throw Dj(FU,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,_x(this._delegate,function(e){return h_("limit",e),new Ix("limit",e,"F")}(t)))}catch(FU){throw Dj(FU,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,_x(this._delegate,function(e){return h_("limitToLast",e),new Ix("limitToLast",e,"L")}(t)))}catch(FU){throw Dj(FU,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,_x(this._delegate,Tx.apply(void 0,arguments)))}catch(FU){throw Dj(FU,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,_x(this._delegate,Cx.apply(void 0,arguments)))}catch(FU){throw Dj(FU,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,_x(this._delegate,Px.apply(void 0,arguments)))}catch(FU){throw Dj(FU,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,_x(this._delegate,Ax.apply(void 0,arguments)))}catch(FU){throw Dj(FU,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return __(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Wx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=f_(e,m_);var t=f_(e.firestore,S_),n=T_(t),r=new Bx(t);return i_(n,e._query,{source:"server"}).then((function(n){return new mx(t,r,e,n)}))}(this._delegate):function(e){e=f_(e,m_);var t=f_(e.firestore,S_),n=T_(t),r=new Bx(t);return wx(e._query),i_(n,e._query).then((function(n){return new mx(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Vj(n.firestore,new mx(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Lj(n),a=Mj(n,(function(t){return new Vj(e.firestore,new mx(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Gx(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Rj.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),qj=function(){function e(t,n){Ze(this,e),this._firestore=t,this._delegate=n}return Ye(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new jj(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Vj=function(){function e(t,n){Ze(this,e),this._firestore=t,this._delegate=n}return Ye(e,[{key:"query",get:function(){return new Uj(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new jj(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new qj(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new jj(n._firestore,r))}))}},{key:"isEqual",value:function(e){return kx(this._delegate,e._delegate)}}]),e}(),Bj=function(e){jt(n,e);var t=zt(n);function n(e,r){var i;return Ze(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ye(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Oj(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Oj(this.firestore,void 0===e?w_(this._delegate):w_(this._delegate,e))}catch(FU){throw Dj(FU,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=f_(e.firestore,S_),r=w_(e),i=jx(e.converter,t);return Qx(n,[H_(K_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Zp.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Oj(t.firestore,e)}))}},{key:"isEqual",value:function(e){return b_(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Rj.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Uj);function zj(e){return f_(e,y_)}var Wj=function(){function e(){Ze(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Ta(L_,n)}return Ye(e,[{key:"isEqual",value:function(e){return(e=_o(e))instanceof L_&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Hh.keyField().canonicalString())}}]),e}(),Kj=function(){function e(t){Ze(this,e),this._delegate=t}return Ye(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Q_("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new G_("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Jx.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=eE.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new X_("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Hj={Firestore:Cj,GeoPoint:j_,Timestamp:jh,Blob:Ij,Transaction:Pj,WriteBatch:Aj,DocumentReference:Oj,DocumentSnapshot:Fj,Query:Uj,QueryDocumentSnapshot:jj,QuerySnapshot:Vj,CollectionReference:Bj,FieldPath:Wj,FieldValue:Kj,setLogLevel:function(e){!function(e){hh.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Io("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Hj)))}(e,(function(e,t){return new Cj(e,t,new Tj)})),e.registerVersion("@firebase/firestore-compat","0.1.18")}(Zu);var Gj="USERS.GET_USERS",Zj="USERS.FETCH_USERS",Qj=function(e){return{type:Gj,payload:e}},Yj=Ea().mark(Xj),$j=Ea().mark(Jj);function Xj(e){var t;return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.prev=1,n.next=4,(0,Ia.call)(lP.auth.createUserWithEmailAndPassword,e.email,e.password);case 4:return t=n.sent,n.next=7,(0,Ia.put)(ca(t));case 7:n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0),console.log(e.password);case 13:case"end":return n.stop()}}),Yj,null,[[1,9]])}function Jj(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ia.takeEvery)(sa,Xj);case 2:case"end":return e.stop()}}),$j)}var eU=Ea().mark(nU),tU=Ea().mark(rU);function nU(e){var t;return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.prev=1,n.next=4,(0,Ia.call)(lP.auth.signInWithEmailAndPassword,e.loginEmail,e.loginPassword);case 4:return t=n.sent,n.next=7,(0,Ia.put)(ca(t));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0);case 12:case"end":return n.stop()}}),eU,null,[[1,9]])}function rU(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ia.takeEvery)(ua,nU);case 2:case"end":return e.stop()}}),tU)}var iU,aU="POST_ORDER.POST_ORDER",oU=new Uint8Array(16);function uU(){if(!iU&&!(iU="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return iU(oU)}var sU=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var cU=function(e){return"string"===typeof e&&sU.test(e)},lU=[],fU=0;fU<256;++fU)lU.push((fU+256).toString(16).substr(1));var hU=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(lU[e[t+0]]+lU[e[t+1]]+lU[e[t+2]]+lU[e[t+3]]+"-"+lU[e[t+4]]+lU[e[t+5]]+"-"+lU[e[t+6]]+lU[e[t+7]]+"-"+lU[e[t+8]]+lU[e[t+9]]+"-"+lU[e[t+10]]+lU[e[t+11]]+lU[e[t+12]]+lU[e[t+13]]+lU[e[t+14]]+lU[e[t+15]]).toLowerCase();if(!cU(n))throw TypeError("Stringified UUID is invalid");return n};var dU=function(e,t,n){var r=(e=e||{}).random||(e.rng||uU)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return hU(r)},pU=Ea().mark(yU),vU=Ea().mark(mU);function yU(e){return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Ia.call)(lP.firestore.addDocument,"orders",{uid:dU(),order:e.cart,userUid:e.userUid,userEmail:e.userEmail,orderTotalPrice:e.orderTotalPrice,status:0,name:e.name,number:e.number,street:e.street,house:e.house,flat:e.flat});case 2:t.sent;case 3:case"end":return t.stop()}}),pU)}function mU(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ia.takeEvery)(aU,yU);case 2:case"end":return e.stop()}}),vU)}var gU=Ea().mark(wU),kU=Ea().mark(bU);function wU(){var e,t;return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Ia.call)(lP.firestore.getCollection,"usersInfo");case 2:return e=n.sent,t=e.docs.map((function(e){return(0,i.Z)({id:e.id},e.data())})),n.next=6,(0,Ia.put)(Qj(t));case 6:case"end":return n.stop()}}),gU)}function bU(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ia.takeEvery)(Zj,wU);case 2:case"end":return e.stop()}}),kU)}var _U="DELIVERY.UPD_INFO",xU=Ea().mark(IU),EU=Ea().mark(SU);function IU(e){return Ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Ia.call)(lP.firestore.updateDocument,"usersInfo/".concat(e.uid),"house",e.house,"flat",e.flat,"number",e.number,"street",e.street,"name",e.name);case 2:case"end":return t.stop()}}),xU)}function SU(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ia.takeEvery)(_U,IU);case 2:case"end":return e.stop()}}),EU)}var TU="FULL_ORDERS.SET_FULL_ORDERS",CU="FULL_ORDERS.FETCH__FULL_ORDERS",NU=function(e){return{type:TU,payload:e}},PU=Ea().mark(RU),AU=Ea().mark(OU);function RU(){var e,t;return Ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Ia.call)(lP.firestore.getCollection,"orders");case 2:return e=n.sent,t=e.docs.map((function(e){return(0,i.Z)({id:e.id},e.data())})),n.next=6,(0,Ia.put)(NU(t));case 6:case"end":return n.stop()}}),PU)}function OU(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ia.takeEvery)(CU,RU);case 2:case"end":return e.stop()}}),AU)}var DU=Ea().mark(LU);function LU(){return Ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ia.all)([mP(),Jj(),rU(),mU(),bU(),SU(),OU()]);case 2:case"end":return e.stop()}}),DU)}var MU=(0,ka.MT)(wa,xa);_a.run(LU),r.createRoot(document.getElementById("root")).render((0,k.jsx)(Or,{children:(0,k.jsx)(Gi,{store:MU,children:(0,k.jsx)(ma,{})})})),ga()}()}();
//# sourceMappingURL=main.174ac97c.js.map